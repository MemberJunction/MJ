<header class="header">
  <!-- App Switcher (shows current app) -->
  <div class="app-switcher-container" [style.--app-color]="activeApp?.Color || '#1976d2'">
    <div class="app-switcher-button" (click)="ToggleAppSwitcher()" title="Switch Apps">
      <i [class]="activeApp?.Icon || 'fa-solid fa-grid-2'" class="app-icon"></i>
      <span class="app-name">{{ activeApp?.Name || 'Apps' }}</span>
      <i class="fa-solid fa-chevron-down dropdown-arrow"></i>
    </div>

    <!-- App Switcher Dropdown -->
    <div class="app-switcher-dropdown" *ngIf="showAppSwitcher">
      <div *ngFor="let app of GetAllApps()"
           class="app-switcher-item"
           [class.active]="activeApp?.Id === app.Id"
           [style.--item-color]="app.Color"
           (click)="SwitchToApp(app)">
        <i [class]="app.Icon"></i>
        <span>{{ app.Name }}</span>
      </div>
    </div>
  </div>

  <!-- Navigation Items (List style) -->
  <nav class="nav-list" [style.--app-color]="activeApp?.Color || '#1976d2'" *ngIf="navigationType === 'list' && navItems.length > 0">
    <a
      *ngFor="let item of navItems"
      (click)="OnNavigate(item.Route)"
      class="nav-item"
      [class.active]="isNavItemActive(item.Route)"
    >
      <i [class]="item.Icon" *ngIf="item.Icon"></i>
      <span>{{ item.Label }}</span>
      <span class="badge" *ngIf="item.Badge">{{ item.Badge }}</span>
    </a>
  </nav>

  <!-- Breadcrumb (Alternative style) -->
  <nav class="breadcrumb" *ngIf="navigationType === 'breadcrumb' && breadcrumbs.length > 0">
    <ng-container *ngFor="let crumb of breadcrumbs; let last = last">
      <span class="separator" *ngIf="!last">â€º</span>
      <a
        *ngIf="crumb.Route"
        [routerLink]="crumb.Route"
        class="breadcrumb-item"
      >
        <i [class]="crumb.Icon" *ngIf="crumb.Icon"></i>
        {{ crumb.Label }}
      </a>
      <span *ngIf="!crumb.Route" class="breadcrumb-item current">
        <i [class]="crumb.Icon" *ngIf="crumb.Icon"></i>
        {{ crumb.Label }}
      </span>
    </ng-container>
  </nav>

  <div class="spacer"></div>

  <!-- Actions -->
  <div class="actions">
    <button class="icon-btn" (click)="OnSearch()" title="Search">
      <i class="fa-solid fa-search"></i>
    </button>

    <button class="icon-btn" title="Notifications">
      <i class="fa-solid fa-bell"></i>
    </button>

    <div class="user-menu">
      <button class="avatar-btn" (click)="ToggleUserMenu()">
        <i class="fa-solid fa-user"></i>
      </button>
      <div class="dropdown" *ngIf="showUserMenu">
        <div class="dropdown-item" (click)="OnNavigate('/settings'); ToggleUserMenu()">
          <i class="fa-solid fa-gear"></i>
          Settings
        </div>
      </div>
    </div>
  </div>
</header>
