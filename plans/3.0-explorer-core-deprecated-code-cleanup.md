# Explorer Core Deprecated Code Cleanup Plan

**Status:** Phase 1 Complete (commented out in module.ts)
**Target:** MemberJunction 3.0
**Package:** `@memberjunction/ng-explorer-core`

## Executive Summary

Analysis of `packages/Angular/Explorer/explorer-core` revealed ~3,571 lines of deprecated/unused code (~14.5% of the package). This code has been commented out in Phase 1 and can be fully removed in Phase 2 after testing.

## Deprecated Components Identified

### 1. NavigationComponent (mj-navigation) - CRITICAL
- **Location:** `src/lib/navigation/`
- **Size:** 1,381 lines (56K)
- **Reason:** Completely replaced by new ShellModule (`mj-shell`)
- **Evidence:**
  - MJExplorer app.component.html uses `<mj-shell>`, NOT `<mj-navigation>`
  - Zero template usage of `<mj-navigation>` in codebase
  - New Shell provides: Golden Layout tabs, app switcher, modern navigation

### 2. ExpansionPanelComponent
- **Location:** `src/lib/expansion-panel-component/`
- **Size:** 219 lines (13K)
- **Reason:** Only consumer was NavigationComponent
- **Evidence:** Zero template usage of `<expansion-panel-component>`

### 3. GenericBrowseListComponent
- **Location:** `src/lib/generic-browse-list/`
- **Size:** 349 lines (14K)
- **Reason:** Superseded by `GenericBrowserListComponent` (642 lines, feature-rich)
- **Evidence:** Zero template usage; the newer component is used in report-browser

### 4. StyleGuideTestComponent
- **Location:** `src/lib/style-guide-test/`
- **Size:** 1,519 lines (49K)
- **Reason:** Test/demo component, not part of production app
- **Evidence:** Only accessible via `/style-guide-test` route, not used elsewhere

### 5. CustomIconComponent (Standalone)
- **Location:** `src/lib/shared/custom-icon/`
- **Size:** 103 lines (9.5K)
- **Reason:** Unused standalone component, violates no-standalone-components rule
- **Note:** Not in module.ts, requires file deletion only

## Cascading Cleanup (Item.types.ts)

When NavigationComponent and ExpansionPanelComponent are removed, these types become orphaned:

| Type | Only Used By |
|------|--------------|
| `TreeItem` class | Navigation, ExpansionPanel |
| `TreeFolder` class | ExpansionPanel |
| `ItemType.Application` | Navigation, ExpansionPanel |
| `ItemType.StubData` | Navigation, ExpansionPanel |
| `ItemType.UserView` | ExpansionPanel |

**Still in use (DO NOT REMOVE):**
- `Item` class
- `Folder` class
- `ItemType.Folder`, `ItemType.Entity`, `ItemType.Resource`
- `NewItemOption`

## Metrics

| Category | Before | Removable | Reduction |
|----------|--------|-----------|-----------|
| Source Lines | 24,622 | 3,571 | 14.5% |
| Source Size | 1.1MB | ~142KB | ~13% |
| Est. Bundle (minified) | - | ~50-100KB | - |

## Implementation Phases

### Phase 1: Comment Out (COMPLETED)
- [x] Comment out imports in `module.ts`
- [x] Comment out declarations in `module.ts`
- [x] Comment out exports in `module.ts`
- [x] Comment out exports in `public-api.ts`
- All changes marked with `// [3.0] DEPRECATED`

### Phase 2: Delete Files (After Testing)
After confirming the app builds and runs correctly:

```bash
# Remove deprecated component directories
rm -rf src/lib/navigation/
rm -rf src/lib/expansion-panel-component/
rm -rf src/lib/generic-browse-list/
rm -rf src/lib/style-guide-test/
rm -rf src/lib/shared/custom-icon/

# Clean up Item.types.ts (remove TreeItem, TreeFolder, unused ItemType values)
```

### Phase 3: Additional Cleanup
- Remove StyleGuideTestComponent route from `app-routing.module.ts`
- Update README.md to remove `<mj-navigation>` examples
- Clean up commented code in `single-report.component.ts`

## Rollback Plan

If issues arise after Phase 1:
1. Uncomment the `// [3.0] DEPRECATED` lines in `module.ts`
2. Uncomment the exports in `public-api.ts`
3. Rebuild the package

Files remain on disk until Phase 2, making rollback trivial.

## Testing Checklist

Before proceeding to Phase 2:
- [ ] `npm run build` succeeds for explorer-core
- [ ] MJExplorer application loads correctly
- [ ] Shell navigation works (app switching, tabs)
- [ ] All browser components render (dashboards, reports, queries, data)
- [ ] No console errors referencing removed components

## Unused/Duplicate Module Imports

Analysis of the module's `imports` array revealed significant cleanup opportunities:

### Duplicate Imports Removed
These modules were imported twice in the imports array:
- `CommonModule`
- `FormsModule`
- `GridModule`
- `IndicatorsModule`
- `DialogsModule`
- `CompareRecordsModule`

### Unused Modules Commented Out

| Module | Reason |
|--------|--------|
| `CompareRecordsModule` | No `mj-compare-records` component usage in templates |
| `ChartsModule` | No `kendo-chart` usage in templates |
| `SortableModule` | No `kendoSortable` directive usage in templates |
| `FilterModule` | No `kendo-filter` usage in templates |
| `EntityPermissionsModule` | No `mj-entity-permissions` component usage in templates |
| `AITestHarnessModule` | No `mj-ai-test` component usage in templates |

**Note:** These modules may be used by consuming applications that import `ExplorerCoreModule`. If build errors occur, uncomment the required modules.

## Files Modified in Phase 1

1. `packages/Angular/Explorer/explorer-core/src/module.ts`
   - Commented out 4 component imports
   - Commented out 4 component declarations
   - Commented out 4 component exports
   - Removed 6 duplicate module imports
   - Commented out 6 unused module imports

2. `packages/Angular/Explorer/explorer-core/src/public-api.ts`
   - Commented out 2 exports

## Related Issues

- SystemValidationBannerComponent uses `standalone: true` (violates project rules)
- Should be converted to non-standalone or properly configured in module

## Notes

- The new Shell system (`ShellModule`) provides all functionality of the old NavigationComponent
- ShellModule uses Golden Layout for advanced tab management (drag/drop, splitting)
- AppSwitcherComponent and AppNavComponent replace drawer-based navigation
