{
  "name": "SalesPipelineDashboard",
  "description": "Comprehensive sales pipeline dashboard with metrics, visualizations, and drill-down capabilities",
  "category": "Dashboard",
  "type": "dashboard",
  "location": "embedded",
  "code": "function SalesPipelineDashboard({ utilities, styles, components, callbacks, savedUserSettings, onSaveUserSettings }) {\n  // Extract AIInsightsPanel from components\n  const AIInsightsPanel = components?.AIInsightsPanel;\n  \n  if (!AIInsightsPanel) {\n    console.warn('AIInsightsPanel component not available');\n  }\n\n  const [deals, setDeals] = useState([]);\n  const [activities, setActivities] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isPanelOpen, setIsPanelOpen] = useState(false);\n  const [timeFilter, setTimeFilter] = useState(savedUserSettings?.timeFilter || 'quarter');\n  const [startDate, setStartDate] = useState(savedUserSettings?.startDate || null);\n  const [endDate, setEndDate] = useState(savedUserSettings?.endDate || null);\n  const [drillDownData, setDrillDownData] = useState(null);\n  const [aiInsights, setAiInsights] = useState(null);\n  const [loadingInsights, setLoadingInsights] = useState(false);\n  const [insightsError, setInsightsError] = useState(null);\n  const chartRef = useRef(null);\n  const saveSettingsTimeoutRef = useRef(null);\n\n  // Debounced save settings function\n  const debouncedSaveSettings = useCallback((newSettings) => {\n    if (saveSettingsTimeoutRef.current) {\n      clearTimeout(saveSettingsTimeoutRef.current);\n    }\n    saveSettingsTimeoutRef.current = setTimeout(() => {\n      if (onSaveUserSettings) {\n        onSaveUserSettings(newSettings);\n      }\n    }, 1000); // Save after 1 second of no changes\n  }, [onSaveUserSettings]);\n\n  const stages = ['Lead', 'Qualified', 'Proposal', 'Negotiation', 'Closed Won', 'Closed Lost'];\n  const stageColors = {\n    'Lead': '#3B82F6',\n    'Qualified': '#6366F1',\n    'Proposal': '#8B5CF6',\n    'Negotiation': '#A855F7',\n    'Closed Won': '#10B981',\n    'Closed Lost': '#EF4444'\n  };\n\n  // Load sub-components from registry\n  const PipelineMetricsCards = components['PipelineMetricsCards'];\n  const PipelineKanban = components['PipelineKanban'];\n  const DealCards = components['DealCards'];\n  const DealList = components['DealList'];\n  const DrillDownPanel = components['DrillDownPanel'];\n\n  useEffect(() => {\n    loadData();\n  }, [timeFilter, startDate, endDate]);\n\n  const getDateFilter = () => {\n    if (startDate && endDate) {\n      return `CloseDate >= '${startDate}' AND CloseDate <= '${endDate}'`;\n    }\n    \n    const now = dayjs();\n    let filterStart;\n    \n    switch (timeFilter) {\n      case 'month':\n        filterStart = now.subtract(1, 'month');\n        break;\n      case 'quarter':\n        filterStart = now.subtract(3, 'month');\n        break;\n      case 'year':\n        filterStart = now.subtract(1, 'year');\n        break;\n      case 'all':\n        return '';\n      default:\n        return '';\n    }\n    \n    return `CloseDate >= '${filterStart.format('YYYY-MM-DD')}'`;\n  };\n\n  const handleDateRangeChange = (start, end) => {\n    setStartDate(start);\n    setEndDate(end);\n    setTimeFilter('custom');\n    debouncedSaveSettings({ \n      ...savedUserSettings, \n      startDate: start, \n      endDate: end,\n      timeFilter: 'custom'\n    });\n  };\n  \n  const handlePresetChange = (preset) => {\n    setTimeFilter(preset);\n    setStartDate(null);\n    setEndDate(null);\n    debouncedSaveSettings({ \n      ...savedUserSettings, \n      timeFilter: preset,\n      startDate: null,\n      endDate: null\n    });\n  };\n\n  const loadData = async () => {\n    setLoading(true);\n    setError(null);\n    \n    const dateFilter = getDateFilter();\n    \n    try {\n      const [dealsResult, activitiesResult] = await Promise.all([\n        utilities.rv.RunView({\n          EntityName: 'Deals',\n          ExtraFilter: dateFilter,\n          OrderBy: 'CloseDate DESC'\n        }),\n        utilities.rv.RunView({\n          EntityName: 'Activities',\n          ExtraFilter: `__mj_CreatedAt >= '${dayjs().subtract(30, 'day').format('YYYY-MM-DD')}'`,\n          OrderBy: '__mj_CreatedAt DESC',\n          MaxRows: 100\n        })\n      ]);\n\n      if (dealsResult.Success) {\n        setDeals(dealsResult.Results || []);\n      }\n      if (activitiesResult.Success) {\n        setActivities(activitiesResult.Results || []);\n      }\n      \n      if (!dealsResult.Success && !activitiesResult.Success) {\n        setError('Failed to load dashboard data');\n      }\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const calculateMetrics = () => {\n    const totalValue = deals.reduce((sum, d) => sum + (d.Amount || 0), 0);\n    const wonDeals = deals.filter(d => d.Stage === 'Closed Won');\n    const lostDeals = deals.filter(d => d.Stage === 'Closed Lost');\n    const activeDeals = deals.filter(d => !['Closed Won', 'Closed Lost'].includes(d.Stage));\n    \n    const avgDealSize = deals.length > 0 ? totalValue / deals.length : 0;\n    const winRate = deals.length > 0 ? (wonDeals.length / (wonDeals.length + lostDeals.length) * 100) : 0;\n    const avgCycleTime = activeDeals.length > 0 ?\n      activeDeals.reduce((sum, d) => {\n        const created = new Date(d.CreatedAt || d.__mj_CreatedAt);\n        const now = new Date();\n        return sum + Math.floor((now - created) / (1000 * 60 * 60 * 24));\n      }, 0) / activeDeals.length : 0;\n    \n    return {\n      totalValue,\n      avgDealSize,\n      winRate,\n      avgCycleTime,\n      activeCount: activeDeals.length,\n      wonCount: wonDeals.length,\n      lostCount: lostDeals.length\n    };\n  };\n\n  const generateAIInsights = async () => {\n    console.log('üéØ generateAIInsights called');\n    console.log('üì¶ utilities object:', utilities);\n    console.log('ü§ñ utilities.ai:', utilities?.ai);\n    console.log('üîß utilities.ai.ExecutePrompt type:', typeof utilities?.ai?.ExecutePrompt);\n    \n    if (!deals || deals.length === 0) {\n      setInsightsError('No data available for analysis');\n      return;\n    }\n    \n    if (!utilities?.ai?.ExecutePrompt) {\n      console.error('‚ùå utilities.ai.ExecutePrompt is not available');\n      setInsightsError('AI service not available');\n      return;\n    }\n\n    setLoadingInsights(true);\n    setInsightsError(null);\n    \n    try {\n      const metrics = calculateMetrics();\n      const activeDeals = deals.filter(d => !['Closed Won', 'Closed Lost'].includes(d.Stage));\n      \n      // Calculate stage distribution and conversion rates\n      const stageDistribution = {};\n      stages.forEach(stage => {\n        stageDistribution[stage] = deals.filter(d => d.Stage === stage).length;\n      });\n      \n      // Calculate conversion rates between stages\n      const conversionRates = {};\n      for (let i = 0; i < stages.length - 2; i++) { // Exclude closed stages\n        const currentStage = stages[i];\n        const nextStage = stages[i + 1];\n        const currentCount = stageDistribution[currentStage] || 0;\n        const nextCount = stageDistribution[nextStage] || 0;\n        const totalDownstream = stages.slice(i + 1).reduce((sum, s) => sum + (stageDistribution[s] || 0), 0);\n        \n        if (currentCount > 0) {\n          conversionRates[`${currentStage} ‚Üí ${nextStage}`] = \n            ((totalDownstream / (currentCount + totalDownstream)) * 100).toFixed(1);\n        }\n      }\n      \n      // Calculate velocity metrics\n      const dealsByAge = activeDeals.map(d => {\n        const created = new Date(d.CreatedAt || d.__mj_CreatedAt);\n        const now = new Date();\n        const daysOld = Math.floor((now - created) / (1000 * 60 * 60 * 24));\n        return { stage: d.Stage, daysOld, amount: d.Amount || 0 };\n      });\n      \n      const stuckDeals = dealsByAge.filter(d => d.daysOld > metrics.avgCycleTime * 1.5);\n      \n      // Prepare data snapshot for AI\n      const dataSnapshot = {\n        summary: {\n          totalDeals: deals.length,\n          totalPipelineValue: metrics.totalValue,\n          averageDealSize: metrics.avgDealSize,\n          winRate: metrics.winRate.toFixed(1),\n          averageCycleTime: Math.round(metrics.avgCycleTime),\n          activeDeals: metrics.activeCount,\n          wonDeals: metrics.wonCount,\n          lostDeals: metrics.lostCount\n        },\n        stageDistribution,\n        conversionRates,\n        bottlenecks: {\n          stuckDealsCount: stuckDeals.length,\n          stuckDealsValue: stuckDeals.reduce((sum, d) => sum + d.amount, 0),\n          averageStuckDays: stuckDeals.length > 0 ? \n            Math.round(stuckDeals.reduce((sum, d) => sum + d.daysOld, 0) / stuckDeals.length) : 0\n        },\n        recentTrends: {\n          dealsClosedThisMonth: deals.filter(d => {\n            const closeDate = new Date(d.CloseDate);\n            const now = new Date();\n            return closeDate.getMonth() === now.getMonth() && \n                   closeDate.getFullYear() === now.getFullYear();\n          }).length,\n          timeFrame: timeFilter\n        }\n      };\n      \n      // Call AI for insights with formatted data\n      const prompt = `Analyze this sales pipeline data and provide actionable insights:\n\n## Pipeline Summary\n- **Total Deals:** ${dataSnapshot.summary.totalDeals}\n- **Pipeline Value:** $${dataSnapshot.summary.totalPipelineValue.toLocaleString()}\n- **Average Deal Size:** $${dataSnapshot.summary.averageDealSize.toLocaleString()}\n- **Win Rate:** ${dataSnapshot.summary.winRate}%\n- **Average Cycle Time:** ${dataSnapshot.summary.averageCycleTime} days\n- **Active Deals:** ${dataSnapshot.summary.activeDeals}\n- **Won Deals:** ${dataSnapshot.summary.wonDeals}\n- **Lost Deals:** ${dataSnapshot.summary.lostDeals}\n\n## Stage Distribution\n${Object.entries(stageDistribution).map(([stage, count]) => `- **${stage}:** ${count} deals`).join('\\n')}\n\n## Conversion Rates\n${Object.entries(conversionRates).map(([transition, rate]) => `- ${transition}: ${rate}%`).join('\\n')}\n\n## Bottlenecks\n- **Stuck Deals:** ${dataSnapshot.bottlenecks.stuckDealsCount} deals\n- **Value at Risk:** $${dataSnapshot.bottlenecks.stuckDealsValue.toLocaleString()}\n- **Average Days Stuck:** ${dataSnapshot.bottlenecks.averageStuckDays} days\n\n## Recent Activity\n- **Deals Closed This Month:** ${dataSnapshot.recentTrends.dealsClosedThisMonth}\n- **Time Frame Analyzed:** ${dataSnapshot.recentTrends.timeFrame}\n\nBased on this specific data, please provide:\n1. **Key Performance Highlights** - What's working well based on these numbers?\n2. **Pipeline Health Assessment** - Is this pipeline balanced and healthy?\n3. **Bottleneck Analysis** - Where specifically are the ${dataSnapshot.bottlenecks.stuckDealsCount} stuck deals concentrated?\n4. **Conversion Rate Analysis** - Which specific transitions need improvement?\n5. **3 Specific Recommendations** - Based on the data, what actions would improve velocity and win rate?\n6. **Risk Indicators** - What specific risks do you see in these numbers?\n\nUse markdown formatting with headers (##), bullet points, and **bold** text. Reference the actual numbers in your analysis.`;\n\n      console.log('üîç Calling utilities.ai.ExecutePrompt with:', {\n        systemPrompt: 'You are a sales analytics expert...',\n        messageLength: prompt.length,\n        modelPower: 'medium',\n        fullPrompt: prompt.substring(0, 500) + '...' // Show first 500 chars\n      });\n      \n      // Use the correct parameter structure with systemPrompt and better models\n      const aiParams = {\n        systemPrompt: 'You are a sales analytics expert. Analyze sales pipeline data and provide clear, actionable business insights formatted with sections and bullet points. Focus on strategic recommendations, not technical implementation.',\n        messages: prompt,  // Just pass the prompt as messages\n        preferredModels: ['GPT-OSS-120B', 'Qwen3 32B'],  // Use more capable models\n        modelPower: 'high'  // Use higher power for better reasoning\n      };\n      \n      console.log('üìù AI params with systemPrompt:', {\n        hasSystemPrompt: !!aiParams.systemPrompt,\n        messagesLength: aiParams.messages?.length,\n        modelPower: aiParams.modelPower\n      });\n      \n      const result = await utilities.ai.ExecutePrompt(aiParams);\n      \n      console.log('üìä ExecutePrompt result:', {\n        fullResult: result,\n        hasSuccess: 'Success' in result,\n        successValue: result?.Success,\n        hasResponse: 'Response' in result,\n        responseType: typeof result?.Response,\n        responseLength: result?.Response?.length,\n        errorMessage: result?.ErrorMessage,\n        allKeys: Object.keys(result || {}),\n        // Check for alternative property names\n        hasSuccess2: 'success' in result,\n        success: result?.success,\n        hasResult: 'result' in result,\n        result: result?.result,\n        hasResponse2: 'response' in result,\n        response: result?.response,\n        hasError: 'error' in result,\n        error: result?.error,\n        hasMessage: 'message' in result,\n        message: result?.message\n      });\n      \n      if (result.success && result.result) {\n        console.log('‚úÖ Setting AI insights to:', result.result);\n        setAiInsights(result.result);\n      } else {\n        const error = result.error || result.message || 'Failed to generate insights';\n        console.log('‚ùå Setting error:', error, 'Full result:', result);\n        setInsightsError(error);\n      }\n    } catch (err) {\n      console.error('üö® Error in generateAIInsights:', {\n        error: err,\n        message: err.message,\n        stack: err.stack,\n        type: err.constructor.name\n      });\n      setInsightsError(`Error generating insights: ${err.message}`);\n    } finally {\n      setLoadingInsights(false);\n    }\n  };\n\n\n  const handleDrillDown = (title, dealList, type, metadata) => {\n    setDrillDownData({ title, deals: dealList, type, metadata });\n    setIsPanelOpen(true);\n  };\n\n  useEffect(() => {\n    if (!loading && deals.length > 0) {\n      renderPipelineChart();\n    }\n  }, [deals, loading]);\n\n  const renderPipelineChart = () => {\n    if (!chartRef.current) return;\n    \n    const stageData = stages.map(stage => ({\n      name: stage,\n      count: deals.filter(d => d.Stage === stage).length,\n      value: deals.filter(d => d.Stage === stage).reduce((sum, d) => sum + (d.Amount || 0), 0)\n    }));\n\n    const options = {\n      series: [{\n        name: 'Deal Count',\n        data: stageData.map(s => s.count)\n      }, {\n        name: 'Total Value',\n        data: stageData.map(s => s.value / 1000) // In thousands\n      }],\n      chart: {\n        type: 'bar',\n        height: 300,\n        toolbar: { show: false }\n      },\n      plotOptions: {\n        bar: {\n          horizontal: false,\n          columnWidth: '55%'\n        }\n      },\n      colors: ['#3B82F6', '#10B981'],\n      xaxis: {\n        categories: stages\n      },\n      yaxis: [{\n        title: { text: 'Number of Deals' }\n      }, {\n        opposite: true,\n        title: { text: 'Value ($K)' }\n      }],\n      tooltip: {\n        y: [{\n          formatter: (val) => `${val} deals`\n        }, {\n          formatter: (val) => `$${val.toFixed(0)}K`\n        }]\n      },\n      legend: {\n        position: 'top'\n      }\n    };\n\n    if (chartRef.current._chart) {\n      chartRef.current._chart.destroy();\n    }\n    chartRef.current._chart = new ApexCharts(chartRef.current, options);\n    chartRef.current._chart.render();\n  };\n\n  const metrics = calculateMetrics();\n\n  if (loading) {\n    return (\n      <div style={{ padding: '40px', textAlign: 'center' }}>\n        <div style={{ fontSize: '18px', color: '#6B7280' }}>Loading pipeline dashboard...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ padding: '20px', backgroundColor: '#FEE2E2', borderRadius: '8px', margin: '20px' }}>\n        <div style={{ color: '#991B1B', fontWeight: 'bold' }}>Error loading data</div>\n        <div style={{ color: '#DC2626', marginTop: '8px' }}>{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ padding: '20px', backgroundColor: '#F3F4F6', minHeight: '100%' }}>\n      <style>{`\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        \n        /* Markdown content styling */\n        .markdown-insights h1 { font-size: 20px; font-weight: 600; color: #111827; margin: 16px 0 12px 0; }\n        .markdown-insights h2 { font-size: 18px; font-weight: 600; color: #1F2937; margin: 14px 0 10px 0; }\n        .markdown-insights h3 { font-size: 16px; font-weight: 600; color: #374151; margin: 12px 0 8px 0; }\n        .markdown-insights h4 { font-size: 14px; font-weight: 600; color: #4B5563; margin: 10px 0 6px 0; }\n        .markdown-insights p { margin: 8px 0; color: #374151; line-height: 1.6; }\n        .markdown-insights ul, .markdown-insights ol { margin: 8px 0; padding-left: 24px; color: #374151; }\n        .markdown-insights li { margin: 4px 0; line-height: 1.5; }\n        .markdown-insights strong { font-weight: 600; color: #1F2937; }\n        .markdown-insights em { font-style: italic; }\n        .markdown-insights code { background: #F3F4F6; padding: 2px 4px; border-radius: 3px; font-family: monospace; font-size: 0.9em; }\n        .markdown-insights blockquote { border-left: 3px solid #6366F1; padding-left: 12px; margin: 12px 0; color: #4B5563; }\n        .markdown-insights hr { border: none; border-top: 1px solid #E5E7EB; margin: 16px 0; }\n        .markdown-insights a { color: #6366F1; text-decoration: none; }\n        .markdown-insights a:hover { text-decoration: underline; }\n      `}</style>\n      <div style={{ marginBottom: '20px' }}>\n        <h2 style={{ margin: '0 0 20px 0', fontSize: '24px', fontWeight: 'bold' }}>\n          Sales Pipeline Dashboard\n        </h2>\n        \n        <div style={{ display: 'flex', gap: '8px', alignItems: 'center', flexWrap: 'wrap', marginBottom: '20px' }}>\n          <select\n            value={timeFilter}\n            onChange={(e) => handlePresetChange(e.target.value)}\n            style={{\n              padding: '6px 12px',\n              border: '1px solid #D1D5DB',\n              borderRadius: '6px'\n            }}\n          >\n            <option value=\"month\">Last Month</option>\n            <option value=\"quarter\">Last Quarter</option>\n            <option value=\"year\">Last Year</option>\n            <option value=\"all\">All Time</option>\n            <option value=\"custom\">Custom Range</option>\n          </select>\n          \n          {timeFilter === 'custom' && (\n            <>\n              <input\n                type=\"date\"\n                value={startDate || ''}\n                onChange={(e) => handleDateRangeChange(e.target.value, endDate)}\n                style={{\n                  padding: '6px 12px',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '6px'\n                }}\n              />\n              <span>to</span>\n              <input\n                type=\"date\"\n                value={endDate || ''}\n                onChange={(e) => handleDateRangeChange(startDate, e.target.value)}\n                style={{\n                  padding: '6px 12px',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '6px'\n                }}\n              />\n            </>\n          )}\n          \n          <div style={{ marginLeft: 'auto' }}>\n            <button\n              onClick={generateAIInsights}\n              disabled={loadingInsights || !deals.length}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#6366F1',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                fontSize: '14px',\n                fontWeight: '500',\n                cursor: loadingInsights || !deals.length ? 'not-allowed' : 'pointer',\n                opacity: loadingInsights || !deals.length ? 0.5 : 1,\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px'\n              }}\n            >\n              {loadingInsights ? (\n                <>\n                  <span style={{ display: 'inline-block', animation: 'spin 1s linear infinite' }}>‚ü≥</span>\n                  Analyzing...\n                </>\n              ) : (\n                <>\n                  <span>‚ú®</span>\n                  Get AI Insights\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n        \n        {/* AI Insights Panel */}\n        <AIInsightsPanel\n          utilities={utilities}\n          styles={styles}\n          components={components}\n          callbacks={callbacks}\n          savedUserSettings={savedUserSettings?.aiInsights}\n          onSaveUserSettings={(settings) => onSaveUserSettings?.({\n            ...savedUserSettings,\n            aiInsights: settings\n          })}\n          insights={aiInsights}\n          loading={loadingInsights}\n          error={insightsError}\n          onGenerate={generateAIInsights}\n          title=\"Sales Pipeline Insights\"\n          icon=\"fa-wand-magic-sparkles\"\n          iconColor={styles?.colors?.primary || '#8B5CF6'}\n          position=\"top\"\n          onClose={() => {\n            setAiInsights(null);\n            setInsightsError(null);\n          }}\n        />\n        \n        <PipelineMetricsCards\n          metrics={metrics}\n          deals={deals}\n          onCardClick={handleDrillDown}\n        />\n        \n        <PipelineKanban\n          deals={deals}\n          stages={stages}\n          stageColors={stageColors}\n          onStageClick={handleDrillDown}\n        />\n        \n        <div style={{ backgroundColor: 'white', borderRadius: '8px', padding: '16px', marginBottom: '20px', border: '1px solid #E5E7EB' }}>\n          <h3 style={{ margin: '0 0 16px 0', fontSize: '18px' }}>Pipeline Overview</h3>\n          <div ref={chartRef} />\n        </div>\n        \n        <DrillDownPanel\n          isOpen={isPanelOpen}\n          drillDownData={drillDownData}\n          stageColors={stageColors}\n          onClose={() => {\n            setIsPanelOpen(false);\n            setDrillDownData(null);\n          }}\n          onOpenDeal={(entityName, primaryKey) => callbacks?.OpenEntityRecord && callbacks.OpenEntityRecord(entityName, primaryKey)}\n          components={components}\n        />\n      </div>\n    </div>\n  );\n}",
  "properties": [
    {
      "name": "utilities",
      "type": "object",
      "description": "MemberJunction utilities for data access"
    },
    {
      "name": "styles",
      "type": "object",
      "description": "Style utilities and theme configuration"
    },
    {
      "name": "components",
      "type": "object",
      "description": "Registry of available child components"
    },
    {
      "name": "callbacks",
      "type": "object",
      "description": "Event callbacks including OpenEntityRecord"
    },
    {
      "name": "savedUserSettings",
      "type": "object",
      "description": "Persisted user preferences"
    },
    {
      "name": "onSaveUserSettings",
      "type": "function",
      "description": "Callback to persist user settings"
    }
  ],
  "dependencies": [
    "@include:sales-pipeline-dashboard-pipeline-metrics-cards.spec.json",
    "@include:sales-pipeline-dashboard-pipeline-kanban.spec.json",
    "@include:sales-pipeline-dashboard-deal-cards.spec.json",
    "@include:sales-pipeline-dashboard-deal-list.spec.json",
    "@include:sales-pipeline-dashboard-drill-down-panel.spec.json",
    {
      "name": "AIInsightsPanel",
      "location": "registry",
      "namespace": "Generic/UI/AI",
      "version": "^1.0.0"
    }
  ],
  "libraries": [
    {
      "name": "dayjs",
      "version": "1.11.10",
      "globalVariable": "dayjs"
    },
    {
      "name": "ApexCharts",
      "version": "3.45.1",
      "globalVariable": "ApexCharts"
    }
  ],
  "dataRequirements": {
    "mode": "views",
    "entities": [
      {
        "name": "Deals",
        "displayFields": [
          "ID",
          "Dealname",
          "Accountname",
          "Stage",
          "Amount",
          "CloseDate",
          "Probability",
          "Owner",
          "CreatedAt"
        ],
        "filterFields": [
          "CloseDate",
          "Stage",
          "Owner"
        ],
        "sortFields": [
          "CloseDate",
          "Amount",
          "Probability"
        ],
        "permissions": [
          "read"
        ]
      },
      {
        "name": "Activities",
        "displayFields": [
          "ID",
          "type",
          "Subject",
          "Owner",
          "CreatedAt"
        ],
        "filterFields": [
          "CreatedAt",
          "Owner"
        ],
        "sortFields": [
          "CreatedAt"
        ],
        "permissions": [
          "read"
        ]
      }
    ]
  },
  "usageExample": "```javascript\n<SalesPipelineDashboard\n  utilities={utilities}\n  styles={styles}\n  components={components}\n  callbacks={callbacks}\n  savedUserSettings={savedUserSettings}\n  onSaveUserSettings={onSaveUserSettings}\n/>\n```",
  "functionalRequirements": "- Display key pipeline metrics in cards\n- Show pipeline stages in kanban view\n- Provide date filtering with presets and custom ranges\n- Visualize pipeline data with interactive charts\n- Show team performance leaderboard\n- Display recent activity feed\n- Enable drill-down into any metric or stage\n- Support card and list views for deals\n- Allow opening deals in external application",
  "technicalDesign": "Main dashboard component that orchestrates multiple sub-components. Manages global state for deals and activities data. Implements date filtering logic. Renders ApexCharts for visualizations. Uses composition pattern with sub-components for modularity."
}