<div class="conversation-empty-state">
  <!-- Sidebar Toggle Button (top-left when sidebar is collapsed) -->
  <button class="sidebar-toggle-btn"
          *ngIf="showSidebarToggle"
          (click)="sidebarToggleClicked.emit()"
          title="Show conversations">
    <i class="fas fa-table-columns"></i>
  </button>

  <!-- Loading Overlay -->
  <div class="loading-overlay" *ngIf="disabled">
    <mj-loading text="Creating your conversation..." size="large"></mj-loading>
  </div>

  <div class="empty-state-container" [class.loading]="disabled">
    <!-- Greeting Header -->
    <div class="greeting-section">
      <div class="greeting-icon">
        <i class="fa-solid fa-comments fa-3x"></i>
      </div>
      <h1 class="greeting-title">Welcome to Conversations</h1>
      <p class="greeting-subtitle">
        Start a new conversation by typing a message below, or choose a suggested prompt to get started.
      </p>
    </div>

    <!-- Suggested Prompts -->
    <div class="suggested-prompts">
      <div class="prompt-grid">
        <div
          *ngFor="let prompt of suggestedPrompts"
          class="prompt-card"
          (click)="onSuggestedPromptClicked(prompt.prompt)"
          [class.disabled]="disabled"
        >
          <div class="prompt-icon">
            <i class="fa-solid {{prompt.icon}}"></i>
          </div>
          <div class="prompt-content">
            <div class="prompt-title">{{prompt.title}}</div>
            <div class="prompt-text">{{prompt.prompt}}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Message Input (using full mj-message-input in empty state mode) -->
    <div class="message-input-wrapper">
      <mj-message-input
        [placeholder]="'Type your message to start a new conversation...'"
        [disabled]="disabled"
        [currentUser]="currentUser"
        [emptyStateMode]="true"
        [enableAttachments]="true"
        (emptyStateSubmit)="onEmptyStateSubmit($event)">
      </mj-message-input>
    </div>

    <!-- Footer Tips -->
    <div class="tips-section">
      <div class="tip-item">
        <i class="fa-solid fa-at"></i>
        <span>Use <strong>&#64;AgentName</strong> to directly invoke a specific agent</span>
      </div>
      <div class="tip-item">
        <i class="fa-solid fa-keyboard"></i>
        <span>Press <strong>Enter</strong> to send, <strong>Shift+Enter</strong> for new line</span>
      </div>
    </div>
  </div>
</div>
