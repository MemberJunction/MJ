<div class="message-input-box-container" (click)="onContainerClick($event)">
  <div class="input-wrapper">
    <mj-mention-editor
      #mentionEditor
      [placeholder]="placeholder"
      [disabled]="disabled"
      [currentUser]="currentUser"
      [enableMentions]="enableMentions"
      [enableAttachments]="enableAttachments"
      [maxAttachments]="maxAttachments"
      [maxAttachmentSizeBytes]="maxAttachmentSizeBytes"
      [acceptedFileTypes]="acceptedFileTypes"
      [(ngModel)]="value"
      (valueChange)="onValueChange($event)"
      (enterPressed)="onEnterPressed($event)"
      (mentionSelected)="onMentionSelected($event)"
      (attachmentsChanged)="onAttachmentsChanged($event)"
      (attachmentError)="onAttachmentError($event)"
      (attachmentClicked)="onAttachmentClicked($event)">
    </mj-mention-editor>

    <!-- Attach Button - Positioned over editor -->
    <button
      *ngIf="enableAttachments"
      class="attach-button-icon"
      [disabled]="disabled"
      (click)="openFilePicker(); $event.stopPropagation()"
      title="Attach file"
    >
      <i class="fa-solid fa-paperclip"></i>
    </button>

    <!-- Send Button (Icon Only) - Positioned over editor -->
    <button
      class="send-button-icon"
      [disabled]="!canSend"
      (click)="onSendClick()"
      title="Send message (Enter)"
    >
      <i class="fa-solid fa-paper-plane"></i>
    </button>
  </div>
</div>
