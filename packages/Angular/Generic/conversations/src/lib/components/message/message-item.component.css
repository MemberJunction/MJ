.message-item {
  display: flex;
  gap: 12px;
  padding: 8px 24px;
  transition: background-color 150ms ease;
  animation: fadeIn 0.3s ease;
  position: relative;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message-item.ai-message {
  background-color: transparent;
}

.message-item.user-message {
  background-color: transparent;
}

.message-item.pinned {
  border-left: 3px solid #0076B6;
  background-color: rgba(0, 118, 182, 0.08);
}

.message-item.in-progress {
  background: linear-gradient(90deg,
    rgba(59, 130, 246, 0.08) 0%,
    rgba(59, 130, 246, 0.12) 50%,
    rgba(59, 130, 246, 0.08) 100%);
  background-size: 200% 100%;
  animation: shimmer 2s ease-in-out infinite;
  border-left: 3px solid #3B82F6;
  position: relative;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Progress message styling - make it visually distinct */
.message-item.in-progress .message-text {
  color: #1F2937;
  font-weight: 500;
  max-height: 150px;
  overflow-y: auto;
  display: block;
}


/* Pulse effect for avatar */
.message-item.in-progress .avatar-circle {
  box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
  }
}

.message-item:hover {
  background-color: rgba(0, 0, 0, 0.02);
}

/* Mention Pills - Match new editor chip style */
:host ::ng-deep .mention-badge {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 4px 12px;
  margin: 0 3px;
  border-radius: 16px;
  font-weight: 600;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
  vertical-align: middle;
  white-space: nowrap;
}

:host ::ng-deep .mention-badge.agent {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: 2px solid rgba(102, 126, 234, 0.4);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.1);
}

:host ::ng-deep .mention-badge.user {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  border: 2px solid rgba(240, 147, 251, 0.4);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.1);
}

:host ::ng-deep .mention-badge i {
  font-size: 12px;
  opacity: 0.95;
}

/* Support for custom icon classes with background-image (like mj-icon-skip) */
:host ::ng-deep .mention-badge i[class^="mj-icon-"],
:host ::ng-deep .mention-badge i[class*=" mj-icon-"] {
  width: 16px;
  height: 16px;
  display: inline-block;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  vertical-align: middle;
  font-size: inherit;
}

/* Skip icon - must use ::ng-deep for dynamically injected HTML */
:host ::ng-deep .mention-badge i.mj-icon-skip {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 101.89918457031249 96.83947368421053'%3E%3Cg transform='translate(-0.1288232421875,-0.0)'%3E%3Cpath d='M93.85,41.56c-.84,0-1.62.2-2.37.55-3-4.35-7.49-8.12-13.04-11.04l.04-7.18v-14.44h-10.24v17.6c-1.52-.43-3.07-.8-4.67-1.11V0h-10.24v24.72s-.09,0-.14,0h-4.38s-.1,0-.14,0V7.3h-10.24v18.62c-1.6.32-3.15.69-4.67,1.11v-11.67h-10.24v6.09l.04,9.6c-5.55,2.92-10.04,6.7-13.04,11.04-.75-.35-1.53-.55-2.37-.55-4.5,0-8.14,5.61-8.14,12.51s3.64,12.53,8.14,12.53c.58,0,1.14-.12,1.67-.29,4.1,6.62,11.54,12.06,20.98,15.28l.79.13v7.05c0,2.97,1.45,5.58,3.87,6.99,1.18.69,2.5,1.04,3.85,1.03,1.4,0,2.83-.37,4.15-1.12l7.54-4.29,7.56,4.3c1.31.74,2.73,1.12,4.13,1.12s2.67-.35,3.85-1.04c2.42-1.41,3.86-4.02,3.86-6.98v-7.05l.79-.13c9.44-3.22,16.89-8.66,20.98-15.28.54.17,1.09.29,1.68.29,4.5,0,8.14-5.61,8.14-12.53s-3.63-12.51-8.14-12.51' fill='%23AAAAAA'/%3E%3Cpath d='M86.69,50.87c0-12.22-13.6-19.1-28.94-20.66-4.48-.47-9.19-.54-13.52,0-15.34,1.53-28.93,8.41-28.93,20.66,0,8.55,5.7,15.55,12.68,15.55h7.94c3.05,2.5,6.93,4.1,11.08,4.71,2.65.4,5.44.46,8.01,0,4.15-.6,8.05-2.2,11.1-4.71h7.92c6.97,0,12.68-7,12.68-15.55' fill='white' opacity='0.9'/%3E%3Cpath d='M57.83,55.82c-1.19,2.58-3.8,4.35-6.84,4.35s-5.65-1.77-6.84-4.35h13.68Z' fill='%23AAAAAA'/%3E%3Cpath d='M32.52,41.14c1.74,0,3.18,2.13,3.18,4.76s-1.44,4.74-3.18,4.74-3.16-2.13-3.16-4.74,1.41-4.76,3.16-4.76' fill='%23AAAAAA'/%3E%3Cpath d='M69.46,41.14c1.74,0,3.16,2.13,3.16,4.76s-1.41,4.74-3.16,4.74-3.18-2.13-3.18-4.74,1.41-4.76,3.18-4.76' fill='%23AAAAAA'/%3E%3Cpath d='M63.91,76.15c-.82-.48-1.84-.43-2.8.12l-10.13,5.75-10.11-5.75c-.96-.55-1.98-.59-2.8-.12-.82.47-1.29,1.38-1.29,2.49v10.12c0,1.11.47,2.02,1.28,2.49.38.22.8.33,1.24.33.51,0,1.05-.15,1.57-.44l10.12-5.75,10.11,5.75c.52.29,1.05.44,1.56.44.44,0,.86-.11,1.24-.33.81-.48,1.28-1.38,1.28-2.49v-10.12c0-1.11-.47-2.02-1.28-2.49' fill='white' opacity='0.9'/%3E%3C/g%3E%3C/svg%3E");
}

/* Betty icon */
:host ::ng-deep .mention-badge i.mj-icon-betty {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23FF6B6B'/%3E%3Ctext x='50' y='65' text-anchor='middle' font-size='40' fill='white' font-family='Arial, sans-serif' font-weight='bold'%3EB%3C/text%3E%3C/svg%3E");
}

/* Izzy icon */
:host ::ng-deep .mention-badge i.mj-icon-izzy {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 204 180'%3E%3Cpath d='M0 0 C3.61144774 3.08477828 4.84942137 4.90830493 5.5 9.625 C5 13 5 13 3.5 14.9375 C1.74432121 17.35155834 1.83578869 18.21944114 1.90625 21.12890625 C1.9371875 22.40636719 1.968125 23.68382813 2 25 C3.18335937 24.72285156 4.36671875 24.44570313 5.5859375 24.16015625 C22.44010416 20.26839867 22.44010416 20.26839867 30 20 C31.80210938 19.92265625 31.80210938 19.92265625 33.640625 19.84375 C47.49356199 19.44904163 61.73614427 20.86627802 75 25 C75.53596907 19.64244551 75.53596907 19.64244551 73.5 15 C71.5549761 12.4066348 71.45048389 10.16629658 71.59375 6.97265625 C72.33633815 3.36681955 74.01253991 1.99164006 77 0 C79.80907914 -0.63997166 82.18961327 -0.63020793 85 0 C87.8100346 1.79363911 89.50940468 3.01880935 91 6 C90.984375 8.05859375 90.984375 8.05859375 90.75 10.4375 C90.68296875 11.21996094 90.6159375 12.00242187 90.546875 12.80859375 C90 15 90 15 88.49609375 16.3984375 C86.25734576 18.79500846 86.4852344 20.97464008 86.3125 24.1875 C86.21388672 25.81751953 86.21388672 25.81751953 86.11328125 27.48046875 C86.07589844 28.31191406 86.03851563 29.14335937 86 30 C86.67675781 30.0825 87.35351562 30.165 88.05078125 30.25 C91.82333306 31.20937741 94.89353787 32.99425194 98.1875 35 C99.18052124 35.60448975 99.18052124 35.60448975 100.19360352 36.22119141 C111.98050012 43.58460075 121.17745776 53.2687532 127 66 C127 66.66 127 67.32 127 68 C127.721875 68.0825 128.44375 68.165 129.1875 68.25 C133.81406141 69.48374971 136.2179022 71.66516963 138.625 75.7734375 C140.97801199 81.55147269 140.43210927 87.87027126 140.375 94 C140.38660156 95.24523437 140.39820313 96.49046875 140.41015625 97.7734375 C140.3675701 111.08870765 140.3675701 111.08870765 135.5 116.7421875 C131.62323281 119.66995439 128.8523137 121.14337998 124 121.125 C122.9790625 121.12886719 122.9790625 121.12886719 121.9375 121.1328125 C120 121 120 121 117 120 C116.74347656 120.65226562 116.48695313 121.30453125 116.22265625 121.9765625 C115.83980469 122.85054688 115.45695313 123.72453125 115.0625 124.625 C114.70285156 125.48351562 114.34320313 126.34203125 113.97265625 127.2265625 C108.57908063 134.80960941 99.56813916 137.59212379 91.0625 140.375 C90.02287109 140.72949219 88.98324219 141.08398438 87.91210938 141.44921875 C80.34347852 144 80.34347852 144 78 144 C78.02094727 144.65484375 78.04189453 145.3096875 78.06347656 145.984375 C78.14730383 148.98942328 78.19886895 151.99422464 78.25 155 C78.28351563 156.02996094 78.31703125 157.05992187 78.3515625 158.12109375 C78.43361416 164.56214867 77.93369275 169.71304442 74 175 C68.75523423 179.17440541 64.68195675 180.53237245 58 180 C55.12653443 178.963898 52.49379495 177.58020045 49.8125 176.125 C49.11447266 175.76019531 48.41644531 175.39539063 47.69726562 175.01953125 C46.39868999 174.33997216 45.10309803 173.65465367 43.81176758 172.96142578 C43.21388428 172.64415527 42.61600098 172.32688477 42 172 C41.34290039 171.59402588 40.68580078 171.18805176 40.00878906 170.76977539 C38.03672401 169.77639533 38.03672401 169.77639533 36.12475586 170.58325195 C35.49448486 170.96441162 34.86421387 171.34557129 34.21484375 171.73828125 C33.17166992 172.35026367 33.17166992 172.35026367 32.10742188 172.97460938 C31.39134766 173.41611328 30.67527344 173.85761719 29.9375 174.3125 C28.51029236 175.1647359 27.08194984 176.01507485 25.65234375 176.86328125 C25.02320068 177.24782471 24.39405762 177.63236816 23.74584961 178.02856445 C19.79572932 180.2265128 16.44037501 180.296025 12 180 C6.82155197 178.33236419 3.95074467 176.59004726 1 172 C-0.72417326 168.34258111 -1.2403609 165.51230089 -1.1953125 161.48046875 C-1.18886719 160.45888672 -1.18242188 159.43730469 -1.17578125 158.38476562 C-1.15902344 157.32966797 -1.14226563 156.27457031 -1.125 155.1875 C-1.11597656 154.11306641 -1.10695312 153.03863281 -1.09765625 151.93164062 C-1.07415306 149.28753146 -1.04129575 146.64388128 -1 144 C-1.63196289 143.81171631 -2.26392578 143.62343262 -2.91503906 143.42944336 C-8.20708475 141.84808949 -13.49207901 140.2541307 -18.75 138.5625 C-19.98234375 138.17191406 -21.2146875 137.78132812 -22.484375 137.37890625 C-29.06200008 134.79901552 -34.12925122 130.90130551 -38 125 C-38.875 121.5625 -38.875 121.5625 -39 119 C-39.495 119.33 -39.99 119.66 -40.5 120 C-45.24354984 121.89741993 -49.49426304 121.53143657 -54.1875 119.875 C-58.42051121 117.05299253 -61.35909664 113.92271008 -63 109 C-63.22709306 104.92471184 -63.22828659 100.8492307 -63.24023438 96.76806641 C-63.2498982 94.77103695 -63.28108516 92.77414948 -63.3125 90.77734375 C-63.36188158 78.59243786 -63.36188158 78.59243786 -60 73 C-57.7509823 70.86631654 -55.88785241 69.35340008 -53.0078125 68.20703125 C-50.3010212 66.57979679 -49.65488803 64.83796148 -48.3125 62 C-45.06106922 55.7428385 -40.95735135 50.97447519 -36 46 C-35.40832031 45.38511719 -34.81664063 44.77023438 -34.20703125 44.13671875 C-28.97373562 39.11136864 -17.47215548 30 -10 30 C-10.08733973 27.91589342 -10.19552278 25.83265331 -10.3125 23.75 C-10.37050781 22.58984375 -10.42851563 21.4296875 -10.48828125 20.234375 C-11.02905532 16.81635262 -11.84853545 15.59874271 -14 13 C-14.54046356 8.75350057 -14.48376179 6.74176808 -12.125 3.125 C-8.57275398 -0.42724602 -4.8825369 -0.970906 0 0 Z M5 35 C4.30245605 35.21962402 3.60491211 35.43924805 2.88623047 35.66552734 C-14.1501062 41.15773444 -29.02751477 50.81254544 -39 66 C-39.33 66.99 -39.66 67.98 -40 69 C-37.525 70.98 -37.525 70.98 -35 73 C-34.52691406 72.29875 -34.05382812 71.5975 -33.56640625 70.875 C-21.08320269 52.96537462 -2.17172019 42.38052109 19.26171875 38.5078125 C46.97805996 34.9959591 75.10426623 38.71529466 97.73046875 56.09765625 C103.53827054 61.07953766 107.9264808 66.53902088 112 73 C113.32 72.01 114.64 71.02 116 70 C115.01713954 61.60788376 107.55262518 55.04847712 101.375 49.8125 C82.80696113 35.82916208 61.35998978 30.59265576 38.375 30.625 C37.71836365 30.62554382 37.06172729 30.62608765 36.38519287 30.62664795 C25.42439402 30.66823796 15.42390121 31.62072499 5 35 Z' fill='%234E3B78' transform='translate(63,0)'/%3E%3Cpath d='M0 0 C5.27957047 5.78547525 9.31612861 13.25448014 10 21.125 C9.69743213 24.83293961 8.77676366 26.8914086 6.1875 29.5625 C-2.04152489 35.76003038 -13.60917874 39.6270706 -23.875 38.8125 C-24.535 38.1525 -25.195 37.4925 -25.875 36.8125 C-28.97847254 36.48234335 -31.03281176 36.30718706 -33.75 37.9375 C-35.40354531 40.69340884 -35.26865568 42.66325452 -34.875 45.8125 C-33.95833333 47.89583333 -33.95833333 47.89583333 -31.875 48.8125 C-28.29166667 48.89583333 -28.29166667 48.89583333 -24.875 47.8125 C-24.57086182 47.16466553 -24.26672363 46.51683105 -23.95336914 45.84936523 C-22.875 43.8125 -22.875 43.8125 -20.77124023 42.88696289 C-19.91731689 42.6883667 -19.06339355 42.48977051 -18.18359375 42.28515625 C-17.23806641 42.04990234 -16.29253906 41.81464844 -15.31835938 41.57226562 C-14.32642578 41.34216797 -13.33449219 41.11207031 -12.3125 40.875 C-4.77934417 39.10870895 1.54823541 36.95205932 8.125 32.8125 C7.81647145 40.06292099 4.56245219 45.32546918 -0.5 50.4609375 C-5.29811284 54.61130511 -8.83216751 54.86916719 -15 55 C-21.13677833 55.26569953 -25.04589225 56.51893716 -29.890625 60.31640625 C-39.17633501 67.31724667 -52.82450605 66.52799961 -63.875 65.8125 C-71.37432145 64.60538489 -79.4496824 61.2378176 -84.875 55.8125 C-86.81199027 55.70419517 -88.75076074 55.60687514 -90.69067383 55.58691406 C-97.68300211 55.51299157 -103.12007731 55.4392364 -108.44140625 50.40234375 C-108.91449219 49.87769531 -109.38757813 49.35304688 -109.875 48.8125 C-110.6175 48.090625 -111.36 47.36875 -112.125 46.625 C-118.35765562 36.60823203 -119.69570866 25.34707186 -117.25 13.8828125 C-113.47065738 3.0509466 -104.76645407 -4.0120534 -94.875 -9.1875 C-91.26850975 -10.75400624 -87.62602625 -12.0153043 -83.875 -13.1875 C-83.029375 -13.47496094 -82.18375 -13.76242188 -81.3125 -14.05859375 C-56.0861494 -22.29657387 -20.04377266 -18.06142152 0 0 Z' fill='%23FDFDFD' transform='translate(155.875,64.1875)'/%3E%3Cpath d='M0 0 C5.24479788 1.58079188 9.51172656 4.60408712 14.06640625 7.58984375 C18.37837094 10.28462973 18.37837094 10.28462973 23.30859375 11.1328125 C28.49696048 9.20971132 33.08639658 6.29555589 37.79882812 3.42578125 C43.66838131 -0.00837477 43.66838131 -0.00837477 47.27734375 0.078125 C49.34375 1.0078125 49.34375 1.0078125 51.34375 3.0078125 C51.82984303 7.30136192 51.71414913 11.62739332 51.71875 15.9453125 C51.74324219 17.15123047 51.76773438 18.35714844 51.79296875 19.59960938 C51.79876953 21.33114258 51.79876953 21.33114258 51.8046875 23.09765625 C51.81290527 24.15847412 51.82112305 25.21929199 51.82958984 26.31225586 C51.34375 29.0078125 51.34375 29.0078125 49.48461914 30.87670898 C46.29658529 32.56106989 44.78123809 32.062357 41.34375 31.0078125 C37.60135447 29.03986817 34.07891261 26.72386924 30.53320312 24.42578125 C26.44214688 21.80182316 26.44214688 21.80182316 21.77734375 20.921875 C17.60401055 22.78413283 13.85973006 25.2663764 10.046875 27.76953125 C5.85335687 30.41401513 2.44659272 31.9581498 -2.65625 32.0078125 C-4.33203125 30.87695312 -4.33203125 30.87695312 -5.65625 29.0078125 C-6.04443359 26.328125 -6.04443359 26.328125 -6.0546875 23.1328125 C-6.05855469 21.98296875 -6.06242187 20.833125 -6.06640625 19.6484375 C-6.05480469 18.44703125 -6.04320313 17.245625 -6.03125 16.0078125 C-6.04285156 14.80640625 -6.05445312 13.605 -6.06640625 12.3671875 C-6.06253906 11.21734375 -6.05867188 10.0675 -6.0546875 8.8828125 C-6.05130371 7.82835937 -6.04791992 6.77390625 -6.04443359 5.6875 C-5.65625 3.0078125 -5.65625 3.0078125 -4.29736328 1.14111328 C-2.65625 0.0078125 -2.65625 0.0078125 0 0 Z' fill='%23FCFCFD' transform='translate(78.65625,136.9921875)'/%3E%3Cpath d='M0 0 C2.5 0.625 2.5 0.625 4.8125 2.625 C6.96830116 6.4575354 7.24792603 9.32007692 6.5 13.625 C5.34367254 15.98793002 4.35016245 17.77483755 2.5 19.625 C0.1875 20 0.1875 20 -2.5 19.625 C-5.06638215 17.47478793 -6.29103188 15.79226637 -6.88671875 12.46484375 C-7.08084032 8.45522921 -6.77549931 6.12498023 -4.8125 2.5625 C-2.5 0.625 -2.5 0.625 0 0 Z' fill='%2353417C' transform='translate(138.5,67.375)'/%3E%3Cpath d='M0 0 C2.5 0.6875 2.5 0.6875 4.8125 2.625 C7.08407605 6.74748987 7.32547179 10.07653131 6.5 14.6875 C4.8125 17.75 4.8125 17.75 2.5 19.6875 C-0.0625 20.25 -0.0625 20.25 -2.5 19.6875 C-5.30401904 17.38419865 -5.84979387 14.76309142 -6.4375 11.3125 C-6.72853275 7.71913649 -6.44645777 6.57011897 -4.875 3.125 C-2.5 0.6875 -2.5 0.6875 0 0 Z' fill='%23523F7B' transform='translate(64.5,67.3125)'/%3E%3Cpath d='M0 0 C8.91 0 17.82 0 27 0 C24.81183076 5.47042311 24.169236 6.55141452 19 9 C14.08609728 9.94526984 9.88605617 10.13992406 5.51171875 7.49609375 C3.4733513 5.76185217 1.65854906 4.10051199 0 2 C0 1.34 0 0.68 0 0 Z' fill='%23574680' transform='translate(88,95)'/%3E%3C/svg%3E");
}

/* Support for image tags in mention badges */
:host ::ng-deep .mention-badge img {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  object-fit: cover;
  vertical-align: middle;
}

:host ::ng-deep .mention-badge:hover {
  transform: translateY(-1px);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25), 0 1px 3px rgba(0, 0, 0, 0.15);
}

/* Configuration preset indicator for agent mentions with non-default presets */
/* Matches the styling from mention-editor.component.ts (lines 432-444) */
:host ::ng-deep .mention-badge .preset-indicator {
  display: inline-block;
  font-size: 10px;
  font-weight: 600;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Courier New', monospace;
  background: rgba(255, 255, 255, 0.25);
  padding: 2px 6px;
  border-radius: 4px;
  margin-left: 4px;
  letter-spacing: 0.3px;
  text-transform: uppercase;
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.message-avatar {
  flex-shrink: 0;
}

.avatar-circle {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: white;
}

/* User avatars are circular */
.avatar-circle.user-avatar {
  border-radius: 50%;
  background-color: #333;
}

/* Agent avatars are square with rounded corners */
.avatar-circle.ai-avatar {
  border-radius: 8px;
  background-color: #9333EA; /* Purple for agents */
}

/* Avatar images (for users with uploaded photos or URLs) */
.avatar-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

/* System artifact styling - subtle visual distinction */
.artifact-wrapper.system-artifact {
  opacity: 0.85;
  position: relative;
}

.artifact-wrapper.system-artifact::before {
  content: 'SYSTEM';
  position: absolute;
  top: 8px;
  right: 8px;
  font-size: 9px;
  font-weight: 600;
  color: #9CA3AF;
  background: #F3F4F6;
  padding: 2px 6px;
  border-radius: 3px;
  letter-spacing: 0.5px;
  z-index: 10;
}

.message-content {
  flex: 1;
  min-width: 0;
  position: relative;
}

.message-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
  font-size: 13px;
}

.message-sender {
  font-weight: 600;
  color: #333;
}

/* Agent role badge */
.agent-badge {
  display: inline-block;
  padding: 2px 8px;
  background: #F3F4F6;
  border-radius: 10px;
  font-size: 11px;
  color: #6B7280;
  font-weight: 500;
}

.message-time {
  color: #9CA3AF;
  font-size: 12px;
  font-weight: 400;
}

/* Time pill - unified styling for all AI message states */
.time-pill {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 500;
  margin-left: auto;
  transition: all 0.3s ease;
}

.time-pill i {
  font-size: 10px;
}

/* Complete state - light blue (default) */
.time-pill.complete {
  background: #E0F2FE;
  color: #0369A1;
}

/* In-progress state - purple/violet with subtle pulse */
.time-pill.in-progress {
  background: #F3E8FF;
  color: #7C3AED;
}

/* Active agent run state - indigo with subtle pulse */
.time-pill.active {
  background: #E0E7FF;
  color: #4F46E5;
}

/* Failed state - red */
.time-pill.failed {
  background: #FEE2E2;
  color: #DC2626;
}

@keyframes pillPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.85;
  }
}

/* Deprecated - keeping for backward compatibility but no longer used */
.generation-time {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: #E0F2FE;
  border-radius: 10px;
  font-size: 11px;
  color: #0369A1;
  font-weight: 500;
  margin-left: auto;
}

.generation-time i {
  font-size: 10px;
}

/* Deprecated - keeping for backward compatibility but no longer used */
.message-elapsed {
  color: #AAA;
  font-size: 11px;
  font-style: italic;
}

.message-body {
  margin-bottom: 0;
}

.message-text {
  color: #333;
  line-height: 1.5;
  word-wrap: break-word;
}

/* Remove extra margin from markdown paragraphs */
.message-text mj-markdown > :first-child,
.message-text ::ng-deep .mj-markdown-container > :first-child {
  margin-top: 0;
}

.message-text mj-markdown > :last-child,
.message-text ::ng-deep .mj-markdown-container > :last-child {
  margin-bottom: 0;
}

/* Asymmetric bubble shapes for message content */
.message-item.user-message .message-content {
  border-radius: 12px 12px 12px 4px;
}

.message-item.ai-message .message-content {
  border-radius: 4px 12px 12px 12px;
}

/* Reaction Buttons */
.message-reactions {
  display: none; /* Hide reactions for now - not implemented */
}

/* Artifact Card - Claude.ai Style */
.artifact-card {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
  padding: 16px;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 8px;
  background: linear-gradient(135deg, #F8F7FF 0%, #F3F2FF 100%);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  max-width: 500px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  position: relative;
  overflow: hidden;
}

.artifact-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, #8B5CF6 0%, #6366F1 100%);
  opacity: 1;
}

.artifact-card:hover {
  background: linear-gradient(135deg, #F3F2FF 0%, #EBE9FF 100%);
  border-color: rgba(139, 92, 246, 0.3);
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.12);
  transform: translateY(-1px);
}

.artifact-card-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.artifact-card-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #8B5CF6;
  flex-shrink: 0;
  background: rgba(139, 92, 246, 0.1);
  border-radius: 6px;
  transition: all 0.2s ease;
}

.artifact-card:hover .artifact-card-icon {
  background: rgba(139, 92, 246, 0.15);
  transform: scale(1.05);
}

.artifact-card-icon i {
  font-size: 18px;
}

.artifact-card-content {
  flex: 1;
  min-width: 0;
}

.artifact-card-label {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  letter-spacing: -0.01em;
  margin-bottom: 4px;
}

.artifact-card-description {
  font-size: 13px;
  color: #6B7280;
  line-height: 1.5;
}

.message-actions {
  position: absolute;
  bottom: 8px;
  right: 8px;
  display: flex;
  gap: 2px;
  opacity: 0;
  transform: translateY(4px);
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  background: white;
  border: 1px solid #E5E7EB;
  border-radius: 8px;
  padding: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  pointer-events: none;
}

.message-item:hover .message-actions {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.message-action-btn {
  padding: 6px 8px;
  background: transparent;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  color: #6B7280;
  font-size: 13px;
  transition: all 150ms ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
}

.message-action-btn:hover {
  background-color: #F3F4F6;
  color: #111827;
}

.message-action-btn.danger:hover {
  background-color: #FEE2E2;
  color: #DC2626;
}

.message-action-btn.retry-btn {
  color: #3B82F6;
  background: #EFF6FF;
  font-weight: 600;
  gap: 6px;
  padding: 6px 12px;
  min-width: auto;
}

.message-action-btn.retry-btn:hover {
  background-color: #DBEAFE;
  color: #2563EB;
}

/* Thread indicator badge */
.thread-indicator {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  margin-top: 8px;
  background: #EFF6FF;
  border: 1px solid #DBEAFE;
  border-radius: 16px;
  cursor: pointer;
  transition: all 150ms ease;
  font-size: 12px;
  color: #1E40AF;
  font-weight: 500;
}

.thread-indicator:hover {
  background: #DBEAFE;
  border-color: #93C5FD;
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(30, 64, 175, 0.1);
}

.thread-indicator i {
  font-size: 14px;
}

.thread-count {
  font-weight: 600;
}

/* Edit mode styles */
.message-item.editing {
  background-color: rgba(255, 243, 205, 0.3);
  border-left: 3px solid #FFA726;
}

.message-edit-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.message-edit-textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #D9D9D9;
  border-radius: 6px;
  font-family: inherit;
  font-size: 14px;
  line-height: 1.6;
  resize: vertical;
  min-height: 80px;
  transition: border-color 150ms ease;
}

.message-edit-textarea:focus {
  outline: none;
  border-color: #0076B6;
  box-shadow: 0 0 0 2px rgba(0, 118, 182, 0.1);
}

.edit-actions {
  display: flex;
  gap: 8px;
}

.edit-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 150ms ease;
}

.edit-action-btn.save {
  background-color: #0076B6;
  color: white;
}

.edit-action-btn.save:hover {
  background-color: #005A8F;
}

.edit-action-btn.cancel {
  background-color: #F4F4F4;
  color: #666;
}

.edit-action-btn.cancel:hover {
  background-color: #E0E0E0;
  color: #333;
}

.edit-hint {
  font-size: 12px;
  color: #AAA;
  font-style: italic;
}

.edited-badge {
  margin-left: 8px;
  font-size: 11px;
  color: #AAA;
  font-style: italic;
  font-weight: normal;
}

/* Message Action Bar (separate panel above agent details) */
.message-action-bar {
  margin-top: 12px;
  margin-bottom: 8px;
  background: #F9FAFB;
  border: 1px solid #D1D5DB;
  border-radius: 8px;
  padding: 12px;
}

.action-bar-container {
  display: flex;
  align-items: center;
  gap: 16px;
}

.action-buttons {
  display: flex;
  gap: 4px;
  margin-left: 16px;
  padding-left: 16px;
  border-left: 1px solid #E5E7EB;
}

.action-bar-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px 10px;
  background: white;
  border: 1px solid #9CA3AF;
  border-radius: 6px;
  font-size: 16px;
  line-height: 1;
  color: #6B7280;
  cursor: pointer;
  transition: all 0.2s;
  min-width: 36px;
  height: 32px;
  opacity: 0.6;
}

.action-bar-btn i {
  font-size: 16px;
  line-height: 1;
}

.action-bar-btn:hover {
  opacity: 1;
  border-color: #6B7280;
}

.action-bar-btn.danger {
  color: #DC2626;
}

.action-bar-btn.danger:hover {
  opacity: 1;
  background: #FEF2F2;
  border-color: #DC2626;
}

.action-bar-btn i.pinned {
  color: #3B82F6;
}

.action-bar-btn.test-feedback {
  color: #F57C00;
}

.action-bar-btn.test-feedback:hover {
  opacity: 1;
  background: #FFF8E1;
  border-color: #F57C00;
}

/* Message status indicator */
.message-status {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: #6B7280;
  padding: 2px 8px;
  background: #F3F4F6;
  border-radius: 4px;
  margin-left: 8px;
  animation: statusPulse 2s ease-in-out infinite;
}

.message-status i {
  color: #0076B6;
  font-size: 11px;
}

.message-status.error {
  background: #FEE2E2;
  color: #DC2626;
}

.message-status.error i {
  color: #DC2626;
}

.status-text {
  font-weight: 500;
}

@keyframes statusPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* ============================================
   Agent Run Icon & Details Panel
   ============================================ */

/* Agent run gear icon in header - muted style for power users */
.agent-run-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  color: #9CA3AF;
  cursor: pointer;
  transition: all 0.2s ease;
  user-select: none;
  margin-left: 8px;
}

.agent-run-icon i.fa-cog {
  font-size: 13px;
}

.agent-run-icon:hover {
  color: #6B7280;
}

.agent-run-icon.expanded {
  color: #9333EA;
  transform: scale(1.1);
}

/* Test feedback icon in header - appears for test runs */
.test-feedback-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  color: #9CA3AF;
  cursor: pointer;
  transition: all 0.2s ease;
  user-select: none;
  margin-left: 8px;
}

.test-feedback-icon i.fa-flask {
  font-size: 13px;
}

.test-feedback-icon:hover {
  color: #3B82F6; /* Blue color for test feedback */
  transform: scale(1.1);
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Agent details panel */
.agent-details-panel {
  margin-top: 12px;
  padding: 16px;
  background: #F9FAFB;
  border: 1px solid #E5E7EB;
  border-radius: 8px;
  animation: slideDown 0.2s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Loading state */
.agent-details-loading {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #6B7280;
  font-size: 13px;
}

.agent-details-loading i {
  color: #9333EA;
}

/* Error state */
.agent-details-error {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #DC2626;
  font-size: 13px;
}

.agent-details-error i {
  color: #DC2626;
}

/* Content header */
.agent-details-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid #E5E7EB;
  font-weight: 600;
  font-size: 13px;
  color: #374151;
}

.agent-details-header i {
  color: #9333EA;
}

.agent-name-link {
  color: #9333EA;
  cursor: pointer;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.2s ease;
}

.agent-name-link:hover {
  color: #7C3AED;
  text-decoration: underline;
}

/* Details grid */
.agent-details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin-bottom: 12px;
}

.detail-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 8px 12px;
  background: white;
  border-radius: 6px;
  border: 1px solid #E5E7EB;
}

.detail-label {
  font-size: 12px;
  color: #6B7280;
  font-weight: 500;
}

.detail-value {
  font-size: 13px;
  color: #111827;
  font-weight: 600;
  font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
}

/* Status badge in details */
.status-badge {
  padding: 3px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.status-badge.status-pending {
  background: #FEF3C7;
  color: #92400E;
}

.status-badge.status-running {
  background: #DBEAFE;
  color: #1E40AF;
}

.status-badge.status-complete {
  background: #D1FAE5;
  color: #065F46;
}

.status-badge.status-failed,
.status-badge.status-error {
  background: #FEE2E2;
  color: #991B1B;
}

.status-badge.status-cancelled {
  background: #F3F4F6;
  color: #4B5563;
}

/* Run ID link styling */
.run-id-link {
  color: #3B82F6;
  cursor: pointer;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  transition: all 0.2s ease;
}

.run-id-link:hover {
  color: #2563EB;
  text-decoration: underline;
}

.run-id-link i.fa-external-link-alt {
  font-size: 10px;
  opacity: 0.7;
}

/* Tasks section in agent details */
.agent-details-tasks {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #E5E7EB;
}

.tasks-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  font-weight: 600;
  font-size: 12px;
  color: #374151;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.tasks-section-header i {
  color: #3B82F6;
  font-size: 11px;
}

.tasks-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.tasks-list mj-task-widget {
  display: block;
}

/* Artifact version badge */
.artifact-version-badge {
  display: inline-block;
  margin-left: 8px;
  padding: 2px 8px;
  background: #EEF2FF;
  color: #4F46E5;
  font-size: 11px;
  font-weight: 600;
  font-family: monospace;
  border-radius: 4px;
  vertical-align: middle;
}

/* Message Footer (rating counts and inline actions) */
.message-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid #F3F4F6;
}

.rating-counts {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 13px;
  color: #6B7280;
}

.rating-count {
  display: flex;
  align-items: center;
  gap: 4px;
}

.rating-count.thumbs-up {
  color: #16A34A;
}

.rating-count.thumbs-down {
  color: #DC2626;
}

.rating-total {
  font-size: 12px;
  color: #9CA3AF;
}

.inline-actions {
  display: flex;
  gap: 4px;
  align-items: center;
}

/* Agent details section wrapper */
.agent-details-section {
  margin-top: 8px;
}

/* Mobile adjustments: 481px - 768px */
@media (max-width: 768px) {
  .message-item {
    padding: 8px 12px;
    gap: 8px;
  }

  .avatar-circle {
    width: 32px;
    height: 32px;
    font-size: 14px;
  }

  .artifact-card {
    max-width: 90vw;
    padding: 12px;
  }

  .artifact-card-icon {
    width: 32px;
    height: 32px;
  }

  .artifact-card-icon i {
    font-size: 16px;
  }

  .message-header {
    font-size: 12px;
  }

  .message-sender {
    font-size: 12px;
  }

  .message-time {
    font-size: 11px;
  }

  .agent-badge {
    font-size: 10px;
    padding: 1px 6px;
  }

  .time-pill {
    font-size: 10px;
    padding: 2px 6px;
  }

  .message-actions {
    gap: 1px;
    padding: 3px;
  }

  .message-action-btn {
    min-width: 28px;
    height: 28px;
    font-size: 12px;
  }
}

/* Small Phone adjustments: <= 480px */
@media (max-width: 480px) {
  .message-item {
    padding: 6px 8px;
    gap: 6px;
  }

  .avatar-circle {
    width: 28px;
    height: 28px;
    font-size: 12px;
  }

  .avatar-circle.ai-avatar {
    border-radius: 6px;
  }

  .artifact-card {
    padding: 10px;
    margin-top: 8px;
  }

  .artifact-card-header {
    gap: 8px;
  }

  .artifact-card-icon {
    width: 28px;
    height: 28px;
  }

  .artifact-card-icon i {
    font-size: 14px;
  }

  .artifact-card-label {
    font-size: 13px;
  }

  .artifact-card-description {
    font-size: 12px;
  }

  .message-header {
    font-size: 11px;
    gap: 6px;
  }

  .message-sender {
    font-size: 11px;
  }

  .message-time {
    font-size: 10px;
  }

  .agent-badge {
    font-size: 9px;
    padding: 1px 5px;
  }

  .time-pill {
    font-size: 9px;
    padding: 1px 5px;
  }

  .thread-indicator {
    padding: 4px 8px;
    font-size: 11px;
    margin-top: 6px;
  }

  .agent-details-panel {
    padding: 12px;
    margin-top: 8px;
  }

  .agent-details-grid {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  .detail-row {
    padding: 6px 8px;
  }

  .detail-label,
  .detail-value {
    font-size: 11px;
  }
}

/* Form Response Pills */
:host ::ng-deep .form-response-pill {
  margin: 0 3px;
  transition: all 0.2s ease;
}

/* Single field form - inline pill (similar to mention badges) */
:host ::ng-deep .form-response-pill.single-field {
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  gap: 6px;
  padding: 4px 12px;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  border: 2px solid rgba(16, 185, 129, 0.4);
  border-radius: 16px;
  font-size: 13px;
  font-weight: 600;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.1);
  cursor: default;
  white-space: nowrap;
}

/* Multi-field form - card-style (block display) */
:host ::ng-deep .form-response-pill.multi-field {
  display: inline-block;
  max-width: min(800px, 100%);
  width: auto;
  min-width: 400px;
  margin: 8px 0;
  vertical-align: top;
}

:host ::ng-deep .form-response-pill.single-field i {
  font-size: 11px;
  opacity: 0.95;
}

:host ::ng-deep .form-response-pill.single-field strong {
  font-weight: 600;
  margin-right: 4px;
}

/* Multi-field form - card-style pill */
:host ::ng-deep .form-response-pill .pill-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  font-weight: 600;
  font-size: 13px;
  border-radius: 12px 12px 0 0;
  border: 2px solid rgba(16, 185, 129, 0.4);
  border-bottom: none;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.1);
}

:host ::ng-deep .form-response-pill .pill-header i {
  font-size: 12px;
  opacity: 0.95;
}

:host ::ng-deep .form-response-pill .pill-fields {
  padding: 10px 12px;
  background: rgba(16, 185, 129, 0.08);
  border: 2px solid rgba(16, 185, 129, 0.4);
  border-top: none;
  border-radius: 0 0 12px 12px;
}

:host ::ng-deep .form-response-pill .pill-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px 0;
  font-size: 13px;
}

:host ::ng-deep .form-response-pill .pill-field:not(:last-child) {
  border-bottom: 1px solid rgba(16, 185, 129, 0.2);
  padding-bottom: 12px;
  margin-bottom: 0;
}

:host ::ng-deep .form-response-pill .field-question {
  font-weight: 600;
  color: #059669;
  font-size: 12px;
  line-height: 1.4;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  opacity: 0.9;
}

:host ::ng-deep .form-response-pill .field-answer {
  color: #1f2937;
  font-weight: 400;
  font-size: 15px;
  line-height: 1.6;
  padding: 8px 0 8px 12px;
  background: transparent;
  border-left: 3px solid rgba(16, 185, 129, 0.4);
  font-style: italic;
}


/* Hover effect for form pills */
:host ::ng-deep .form-response-pill.single-field:hover {
  transform: translateY(-1px);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25), 0 1px 3px rgba(0, 0, 0, 0.15);
}

:host ::ng-deep .form-response-pill.multi-field:hover {
  transform: translateY(-1px);
}

:host ::ng-deep .form-response-pill.multi-field:hover .pill-header {
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25), 0 1px 3px rgba(0, 0, 0, 0.15);
}

/* Responsive adjustments for multi-field forms */
@media (max-width: 600px) {
  :host ::ng-deep .form-response-pill.multi-field {
    min-width: 300px;
  }
}

@media (max-width: 400px) {
  :host ::ng-deep .form-response-pill.multi-field {
    min-width: 100%;
  }

  :host ::ng-deep .form-response-pill .field-question {
    font-size: 11px;
  }

  :host ::ng-deep .form-response-pill .field-answer {
    font-size: 14px;
    padding: 6px 0 6px 10px;
  }
}

/* ==================== Message Attachments ==================== */

.message-attachments {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
  margin-bottom: 8px;
}

.attachment-item {
  position: relative;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  background: #f5f5f5;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.attachment-item:hover {
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.attachment-item.image-attachment {
  width: 200px;
  height: 150px;
}

.attachment-thumbnail {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.attachment-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
}

.attachment-item:hover .attachment-overlay {
  opacity: 1;
}

.attachment-overlay i {
  color: white;
  font-size: 24px;
}

.attachment-file {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 16px 20px;
  min-width: 120px;
  gap: 6px;
}

.attachment-file i {
  font-size: 28px;
  color: #666;
}

.attachment-file .file-name {
  font-size: 12px;
  font-weight: 500;
  color: #333;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: center;
}

.attachment-file .file-size {
  font-size: 11px;
  color: #888;
}

/* Audio Attachment Styles */
.attachment-item.audio-attachment {
  width: 100%;
  max-width: 400px;
  cursor: default;
  background: #f8f9fa;
}

.attachment-item.audio-attachment:hover {
  transform: none;
  box-shadow: none;
}

.audio-player-container {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.audio-player {
  width: 100%;
  height: 40px;
  outline: none;
}

.audio-player:focus {
  outline: 2px solid #007bff;
  outline-offset: 2px;
  border-radius: 4px;
}

.audio-metadata {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #666;
}

.audio-metadata i {
  color: #007bff;
  font-size: 14px;
}

.audio-metadata .file-name {
  flex: 1;
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.audio-metadata .duration {
  color: #888;
  font-size: 12px;
  font-family: monospace;
}

/* Responsive attachments */
@media (max-width: 600px) {
  .attachment-item.image-attachment {
    width: 150px;
    height: 112px;
  }

  .attachment-file {
    padding: 12px 16px;
    min-width: 100px;
  }

  .attachment-item.audio-attachment {
    max-width: 100%;
  }
}