<div class="skip-artifact-viewer-container">
  <div class="skip-artifact-viewer-content">
    @if (isLoading) {
      <div class="loading-container">
        <kendo-loader size="large"></kendo-loader>
        <div class="loading-text">Loading artifact...</div>
      </div>
    } @else if (error) {
      <div class="error-container">
        <div class="error-icon">
          <i class="fa-solid fa-exclamation-circle"></i>
        </div>
        <div class="error-message">{{ error }}</div>
      </div>
    } @else if (!artifact) {
      <div class="empty-state">
        <div class="empty-icon">
          <i class="fa-solid fa-file-alt"></i>
        </div>
        <div class="empty-message">No artifact selected</div>
      </div>
    } @else {
      <div class="report-container" #reportContainer>
        <!-- The dynamic report component will be inserted here -->
      </div>

      @if (artifactVersion) {
        <div class="artifact-metadata">
          @if (artifactVersion.__mj_CreatedAt) {
            <div class="metadata-item">
              <span class="metadata-label">Created:</span>
              <span class="metadata-value">{{ artifactVersion.__mj_CreatedAt | date:'medium' }}</span>
            </div>
          }
        </div>
      }
    }
  </div>

  <!-- Component Feedback Panel -->
  <skip-component-feedback-panel
    [isVisible]="showFeedbackPanel"
    [rootComponent]="componentHierarchy"
    [conversationID]="conversationDetailRecord?.ConversationID"
    [conversationDetailID]="conversationDetailRecord?.ID"
    [reportID]="artifact?.ID"
    (feedbackSubmitted)="onFeedbackSubmitted($event)"
    (componentSelected)="onComponentSelected($event)"
    (closed)="closeFeedbackPanel()">
  </skip-component-feedback-panel>
</div>