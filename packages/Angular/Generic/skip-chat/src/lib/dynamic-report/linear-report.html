@if(SkipData) {
    <div>
        <!-- Report Controls -->
        @if (matchingReportID !== null) {
            <div>
                <div>
                    <div class="report-link" (click)="clickMatchingReport()">Report: {{matchingReportName}}</div>
                </div>
            </div>
        }

        <!-- Main Report Content -->
        <div>
            @if(IsChart) {
                <skip-dynamic-chart 
                    #theChart 
                    [AutoResizeChart]="false"
                    [SkipData]="SkipData" 
                    style="display:block; height: 100%;">
                </skip-dynamic-chart>
            }
            @else if(IsTable) {
                <skip-dynamic-grid  
                    [GridHeight]="300"
                    #theGrid 
                    [SkipData]="SkipData"
                    style="display:block; height: 100%;">
                </skip-dynamic-grid>  
            }
            @else if (IsInteractive) {
                <skip-dynamic-ui-component
                    #theUIComponent 
                    [SkipData]="SkipData"
                    [ShowCreateReportButton]="ShowCreateReportButton"
                    [matchingReportID]="matchingReportID"
                    (DrillDownEvent)="HandleDrillDownEvent($event)"
                    (CreateReportRequested)="handleCreateReportForOption($event)"
                    style="display:block; height: 100%;">
                </skip-dynamic-ui-component>  
            }
        </div>

        <!-- Bottom Bar with Explanation -->
        @if (SkipData.userExplanation || SkipData.analysis) {
            <div>
                @if (SkipData.userExplanation) {
                    <div>
                        <div>
                            <strong>Explanation:</strong>
                            <div>{{SkipData.userExplanation}}</div>
                        </div>
                    </div>
                }
                @if (SkipData.analysis) {
                    <div>
                        <div>
                            <strong>Analysis:</strong>
                        </div>
                        <div>
                            <markdown [data]="SkipData.analysis"></markdown>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
    
  @if (confirmCreateReportDialogOpen) {
    <kendo-dialog
      title="Please confirm"
      (close)="closeCreateReport('no')"
      [minWidth]="250"
      [width]="450"
    >
      <p style="margin: 30px; text-align: center;">
        Would you like to create a new report from this conversation element? If you choose to continue you'll be notified when the report has been created.
      </p>
      <kendo-dialog-actions>
        <button kendoButton (click)="closeCreateReport('yes')" themeColor="primary">
          Yes
        </button>
        <button kendoButton (click)="closeCreateReport('no')">No</button>
      </kendo-dialog-actions>
    </kendo-dialog>
  }
} 