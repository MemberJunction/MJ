<div class="record-form-container" mjFillContainer [bottomMargin]="20" [rightMargin]="5">
    <form *ngIf="record" class="record-form"  #form="ngForm" mjFillContainer>
        <mj-form-toolbar [form]="this"></mj-form-toolbar>
        <kendo-splitter orientation="vertical" (layoutChange)="splitterLayoutChange()" mjFillContainer>
            <kendo-splitter-pane [collapsible]="true" [size]="TopAreaHeight">
                <div #topArea class="record-form-group">
                    <mj-form-section Entity="Entities" Section="top-area" [record]="record" [EditMode]="this.EditMode" (LoadComplete)="CalcTopAreaHeight()"></mj-form-section>
                </div>
            </kendo-splitter-pane>
            <kendo-splitter-pane>
                <mj-tabstrip (TabSelected)="onTabSelect($event.index)" mjFillContainer>
                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Fields')">
                        Fields
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Entity Fields')"  
                            [AllowLoad]="this.IsCurrentTab('Fields')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body>

                    <mj-tab  [TabSelected]="this.RegisterAndCheckIfCurrentTab('Permissions')">
                        Permissions
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Entity Permissions')"  
                            [AllowLoad]="this.IsCurrentTab('Permissions')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body>

                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Details')">
                        Details
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section Entity="Entities" Section="details" [record]="record" [EditMode]="this.EditMode"></mj-form-section>
                    </mj-tab-body>

                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Audit')">
                        Audit
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section Entity="Entities" Section="audit" [record]="record" [EditMode]="this.EditMode"></mj-form-section>
                    </mj-tab-body>

                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('API')">
                        API
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section Entity="Entities" Section="api" [record]="record" [EditMode]="this.EditMode"></mj-form-section>
                    </mj-tab-body>


                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('DB')">
                        DB
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section Entity="Entities" Section="db" [record]="record" [EditMode]="this.EditMode"></mj-form-section>
                    </mj-tab-body>

                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('UI')">
                        UI
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section Entity="Entities" Section="ui" [record]="record" [EditMode]="this.EditMode"></mj-form-section>
                    </mj-tab-body>

                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Relationships')">
                        Relationships
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Entity Relationships')"  
                            [AllowLoad]="this.IsCurrentTab('Relationships')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body>


                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('AI Actions')">
                        AI Actions
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Entity AI Actions')"  
                            [AllowLoad]="this.IsCurrentTab('AI Actions')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body>


                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Application Entities')">
                        Application Entities
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Application Entities')"  
                            [AllowLoad]="this.IsCurrentTab('Application Entities')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body>

                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('User Views')">
                        User Views
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('User Views')"  
                            [AllowLoad]="this.IsCurrentTab('User Views')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body> 
                
                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Dataset Items')">
                        Dataset Items
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Dataset Items')"  
                            [AllowLoad]="this.IsCurrentTab('Dataset Items')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body> 
                
                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Entity Documents')">
                        Entity Documents
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Entity Documents')"  
                            [AllowLoad]="this.IsCurrentTab('Entity Documents')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body> 
                
                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('Entity Record Documents')">
                        Entity Record Documents
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('Entity Record Documents')"  
                            [AllowLoad]="this.IsCurrentTab('Entity Record Documents')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body> 
                
                    <mj-tab [TabSelected]="this.RegisterAndCheckIfCurrentTab('File Entity Record Links')">
                        File Entity Record Links
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid [Params]="this.BuildRelationshipViewParamsByEntityName('File Entity Record Links')"  
                            [AllowLoad]="this.IsCurrentTab('File Entity Record Links')"  
                            [EditMode]="this.GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>
                    </mj-tab-body> 
                </mj-tabstrip>
            </kendo-splitter-pane>
        </kendo-splitter>
    </form>
  </div>
    