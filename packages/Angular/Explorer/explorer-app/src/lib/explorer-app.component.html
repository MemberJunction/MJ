<!-- OAuth callback route - shown regardless of auth state, component handles waiting for auth -->
@if (isOAuthCallback) {
  <router-outlet></router-outlet>
}

<!-- Normal authenticated view (not OAuth callback) -->
@if ((authBase.isAuthenticated() | async) && !isOAuthCallback) {
  <div class="app-main">
    <mj-system-validation-banner></mj-system-validation-banner>
    @if (!HasError) {
      <mj-shell class="app-body"></mj-shell>
    }
    @if (HasError && !showValidationOnly) {
      <div><h1>System Error</h1><hr/>{{this.ErrorMessage}}</div>
    }
  </div>
}
<!-- Login - shows when NOT authenticated AND not on OAuth callback -->
@if (!(authBase.isAuthenticated() | async) && !isOAuthCallback) {
  <div class="login-wrapper">
    <div class="main-banner">
      <div class="logo-icon">
        <svg width="62" height="44" viewBox="0 0 62 44" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <mask id="mask0_236_1614" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="62" height="44">
            <rect width="61.3333" height="44" fill="#D9D9D9"/>
          </mask>
          <g mask="url(#mask0_236_1614)">
            <rect x="-94.4727" y="-2.66667" width="246.882" height="94.8387" fill="url(#pattern0)"/>
          </g>
        </svg>
      </div>
      <div class="title">
        <img src="/assets/MJ_logo.svg" height="45px" class="app-logo" alt="MemberJunction Logo" />
      </div>
      <h1 class="text-header">
        Welcome <br/> Back
      </h1>
    </div>
    <div class="login-btn">
      <h3>Log In</h3>
      <p>{{subHeaderText}}</p>
      <button (click)="authBase.login()">
        Log in
      </button>
    </div>
  </div>
}
