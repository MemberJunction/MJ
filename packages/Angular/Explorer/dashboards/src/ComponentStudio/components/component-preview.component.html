<div class="component-preview">
  <div class="preview-header">
    <h2>{{ component.Name }}</h2>
    <div class="preview-actions">
      <button kendoButton [icon]="'fa-solid fa-code'" [fillMode]="'flat'" (click)="showCode = !showCode">
        {{ showCode ? 'Hide' : 'Show' }} Code
      </button>
      <button kendoButton [icon]="'fa-solid fa-play'" [fillMode]="'flat'" (click)="runComponent()">
        Run Component
      </button>
    </div>
  </div>
  
  <div class="preview-content">
    @if (showCode) {
      <div class="code-view">
        <pre><code>{{ componentSpec?.code || 'No code available' }}</code></pre>
      </div>
    } @else {
      <div class="component-container">
        @if (componentSpec) {
          <mj-react-component 
            [component]="componentSpec"
            (openEntityRecord)="openEntityRecord.emit($event)">
          </mj-react-component>
        } @else {
          <div class="no-spec">
            <p>Component specification not available. The component may need to be configured with a proper ComponentSpec.</p>
          </div>
        }
      </div>
    }
  </div>
</div>