<div class="scheduling-types">
  <div class="types-header">
    <h2><i class="fa-solid fa-cogs"></i> Job Type Registry</h2>
    <button kendoButton (click)="onRefresh()" [disabled]="isLoading">
      <i class="fa-solid fa-refresh" [class.fa-spin]="isLoading"></i>
      Refresh
    </button>
  </div>

  @if (isLoading && jobTypes.length === 0) {
    <div class="loading-overlay">
      <i class="fa-solid fa-spinner fa-spin fa-3x"></i>
      <p>Loading job types...</p>
    </div>
  }

  @if (!isLoading && jobTypes.length === 0) {
    <div class="empty-state">
      <i class="fa-solid fa-inbox"></i>
      <p>No job types found</p>
    </div>
  }

  @if (jobTypes.length > 0) {
    <div class="types-grid">
      @for (type of jobTypes; track type.typeId) {
        <div class="type-card">
          <div class="type-card-header">
            <div class="type-icon">
              <i class="fa-solid" [ngClass]="getTypeIcon(type.typeName)"></i>
            </div>
            <h3>{{ type.typeName }}</h3>
          </div>

          <div class="type-card-body">
            <div class="type-stat">
              <div class="stat-label">Active Jobs</div>
              <div class="stat-value primary">{{ type.activeJobsCount }}</div>
            </div>

            <div class="type-stat">
              <div class="stat-label">Total Runs</div>
              <div class="stat-value">{{ type.totalRuns }}</div>
            </div>

            <div class="type-stat">
              <div class="stat-label">Success Rate</div>
              <div class="stat-value" [class.success]="type.successRate >= 0.9" [class.warning]="type.successRate < 0.9 && type.successRate >= 0.7" [class.error]="type.successRate < 0.7">
                {{ formatPercentage(type.successRate) }}
              </div>
            </div>

            <div class="success-rate-bar">
              <div class="rate-fill" [style.width.%]="type.successRate * 100"></div>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
