<div class="test-suite-form" kendoDialogContainer>
  <div class="suite-header">
    <div class="header-content">
      <div class="header-left">
        <div class="suite-icon" [style.background-color]="getStatusColor()">
          <i class="fas fa-layer-group"></i>
        </div>
        <div class="suite-info">
          <h1>{{ record.Name }}</h1>
          <div class="suite-meta">
            <span class="status-badge" [style.background-color]="getStatusColor()">
              {{ record.Status }}
            </span>
          </div>
        </div>
      </div>
      <div class="header-actions">
        <button kendoButton (click)="runSuite()" icon="play">Run Suite</button>
      </div>
    </div>
    <div class="suite-description" *ngIf="record.Description">
      <p>{{ record.Description }}</p>
    </div>
  </div>

  <div class="tabs-container">
    <div class="tabs">
      <button class="tab" [class.active]="activeTab === 'overview'" (click)="changeTab('overview')">
        <i class="fas fa-th-large"></i> Overview
      </button>
      <button class="tab" [class.active]="activeTab === 'tests'" (click)="changeTab('tests')">
        <i class="fas fa-flask"></i> Tests
        <span class="tab-badge" *ngIf="testsLoaded">{{ suiteTests.length }}</span>
      </button>
      <button class="tab" [class.active]="activeTab === 'runs'" (click)="changeTab('runs')">
        <i class="fas fa-history"></i> Runs
        <span class="tab-badge" *ngIf="runsLoaded">{{ suiteRuns.length }}</span>
      </button>
    </div>
  </div>

  <div class="tab-content">
    <div class="overview-tab" *ngIf="activeTab === 'overview'">
      <div class="info-section">
        <h3>Suite Information</h3>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Name</div>
            <div class="info-value">{{ record.Name }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Status</div>
            <div class="info-value">{{ record.Status }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Created</div>
            <div class="info-value">{{ record.__mj_CreatedAt | date:'medium' }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Updated</div>
            <div class="info-value">{{ record.__mj_UpdatedAt | date:'medium' }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Max Execution Time</div>
            <div class="info-value">{{ formatTimeout(record.MaxExecutionTimeMS) }}</div>
          </div>
        </div>
      </div>

      <div class="config-section">
        <h3>Execution Settings</h3>
        <div class="config-grid">
          <div class="config-item">
            <label>Max Execution Time (ms)</label>
            <input type="number" [(ngModel)]="record.MaxExecutionTimeMS" class="config-input" placeholder="Default: 300000 (5 min)" />
            <span class="config-hint">Default timeout for tests in this suite</span>
          </div>
        </div>
      </div>
    </div>

    <div class="tests-tab" *ngIf="activeTab === 'tests'">
      <div class="tests-list" *ngIf="suiteTests.length > 0">
        <div class="test-item" *ngFor="let test of suiteTests" (click)="openTest(test.TestID)">
          <div class="test-sequence">{{ test.Sequence }}</div>
          <div class="test-icon"><i class="fas fa-flask"></i></div>
          <div class="test-content">
            <div class="test-name">{{ test.Test }}</div>
            <div class="test-status">{{ test.Status }}</div>
          </div>
          <i class="fas fa-chevron-right"></i>
        </div>
      </div>
      <div class="no-data" *ngIf="testsLoaded && suiteTests.length === 0">
        <i class="fas fa-inbox"></i>
        <p>No tests in this suite</p>
      </div>
    </div>

    <div class="runs-tab" *ngIf="activeTab === 'runs'">
      <div class="runs-list" *ngIf="suiteRuns.length > 0">
        <div class="run-item" *ngFor="let run of suiteRuns" (click)="openSuiteRun(run.ID)">
          <div class="run-icon" [style.background-color]="run.Status === 'Completed' ? '#4caf50' : run.Status === 'Failed' ? '#f44336' : '#2196f3'">
            <i class="fas fa-play"></i>
          </div>
          <div class="run-content">
            <div class="run-header">
              <span class="run-id">{{ run.ID.substring(0, 8) }}</span>
              <span class="run-status">{{ run.Status }}</span>
            </div>
            <div class="run-meta">
              <span>{{ run.StartedAt | date:'short' }}</span>
              <span *ngIf="run.TotalTests">{{ run.PassedTests }}/{{ run.TotalTests }} passed</span>
            </div>
          </div>
          <i class="fas fa-chevron-right"></i>
        </div>
      </div>
      <div class="no-data" *ngIf="runsLoaded && suiteRuns.length === 0">
        <i class="fas fa-inbox"></i>
        <p>No runs for this suite</p>
      </div>
    </div>
  </div>
</div>
