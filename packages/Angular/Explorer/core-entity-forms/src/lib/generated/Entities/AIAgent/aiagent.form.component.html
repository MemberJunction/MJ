<mj-record-form-container [record]="record" [formComponent]="this">

    <!-- ========================================
         FIELD PANELS
         ======================================== -->
    <!-- Agent Identity & Presentation Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="agentIdentityPresentation"
        sectionName="Agent Identity & Presentation"
        icon="fa fa-id-card"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Name"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Description"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="LogoURL"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="URL"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="TypeID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Status"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DriverClass"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="IconClass"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ModelSelectionMode"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DefaultArtifactTypeID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="OwnerUserID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ArtifactCreationMode"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FunctionalRequirements"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="TechnicalDesign"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="IsRestricted"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AgentTypePromptParams"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Type"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DefaultArtifactType"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="OwnerUser"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Hierarchy & Invocation Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="hierarchyInvocation"
        sectionName="Hierarchy & Invocation"
        icon="fa fa-sitemap"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ExposeAsAction"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ExecutionOrder"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ExecutionMode"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="InvocationMode"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Parent"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RootParentID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Context Compression Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="contextCompression"
        sectionName="Context Compression"
        icon="fa fa-compress"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EnableContextCompression"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ContextCompressionMessageThreshold"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ContextCompressionPromptID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ContextCompressionMessageRetentionCount"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ContextCompressionPrompt"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Payload & Data Flow Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="payloadDataFlow"
        sectionName="Payload & Data Flow"
        icon="fa fa-exchange-alt"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PayloadDownstreamPaths"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PayloadUpstreamPaths"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PayloadSelfReadPaths"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PayloadSelfWritePaths"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PayloadScope"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FinalPayloadValidation"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FinalPayloadValidationMode"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FinalPayloadValidationMaxRetries"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="StartingPayloadValidation"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="StartingPayloadValidationMode"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="InjectNotes"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxNotesToInject"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="NoteInjectionStrategy"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="InjectExamples"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxExamplesToInject"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ExampleInjectionStrategy"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Runtime Limits & Execution Settings Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="runtimeLimitsExecutionSettings"
        sectionName="Runtime Limits & Execution Settings"
        icon="fa fa-tachometer-alt"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxCostPerRun"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxTokensPerRun"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxIterationsPerRun"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxTimePerRun"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MinExecutionsPerRun"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxExecutionsPerRun"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DefaultPromptEffortLevel"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ChatHandlingOption"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MessageMode"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="MaxMessages"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Attachment Storage Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="attachmentStorage"
        sectionName="Attachment Storage"
        icon="fa fa-paperclip"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AttachmentStorageProviderID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AttachmentRootPath"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="InlineStorageThresholdBytes"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AttachmentStorageProvider"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- System Metadata Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="systemMetadata"
        sectionName="System Metadata"
        icon="fa fa-cog"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_CreatedAt"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_UpdatedAt"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>
    <!-- ========================================
         RELATED ENTITY PANELS - AFTER
         ======================================== -->

    <!-- AIAgent Actions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentActions"
        sectionName="AIAgent Actions"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentActions')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Actions','AgentID')"
                [NewRecordValues]="NewRecordValues('AI Agent Actions')"
                [AllowLoad]="IsSectionExpanded('aIAgentActions')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIAgentActions', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AIAgent Learning Cycles Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentLearningCycles"
        sectionName="AIAgent Learning Cycles"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentLearningCycles')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Learning Cycles','AgentID')"
                [NewRecordValues]="NewRecordValues('AI Agent Learning Cycles')"
                [AllowLoad]="IsSectionExpanded('aIAgentLearningCycles')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIAgentLearningCycles', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AIAgent Models Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentModels"
        sectionName="AIAgent Models"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentModels')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Models','AgentID')"
                [NewRecordValues]="NewRecordValues('AI Agent Models')"
                [AllowLoad]="IsSectionExpanded('aIAgentModels')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIAgentModels', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AI Agent Requests Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentRequests"
        sectionName="AI Agent Requests"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentRequests')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Requests','AgentID')"
                [NewRecordValues]="NewRecordValues('AI Agent Requests')"
                [AllowLoad]="IsSectionExpanded('aIAgentRequests')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIAgentRequests', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Artifact Types Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentArtifactTypes"
        sectionName="MJ: AI Agent Artifact Types"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentArtifactTypes')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Artifact Types','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Artifact Types')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentArtifactTypes')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentArtifactTypes', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Data Sources Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentDataSources"
        sectionName="MJ: AI Agent Data Sources"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentDataSources')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Data Sources','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Data Sources')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentDataSources')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentDataSources', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Modalities Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentModalities"
        sectionName="MJ: AI Agent Modalities"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentModalities')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Modalities','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Modalities')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentModalities')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentModalities', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Permissions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentPermissions"
        sectionName="MJ: AI Agent Permissions"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentPermissions')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Permissions','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Permissions')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentPermissions')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentPermissions', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Relationships Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentRelationships"
        sectionName="MJ: AI Agent Relationships"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentRelationships')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Relationships','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Relationships')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentRelationships')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentRelationships', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Steps Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentSteps"
        sectionName="MJ: AI Agent Steps"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentSteps')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Steps','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Steps')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentSteps')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentSteps', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AIAgent Notes Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentNotes"
        sectionName="AIAgent Notes"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentNotes')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Notes','AgentID')"
                [NewRecordValues]="NewRecordValues('AI Agent Notes')"
                [AllowLoad]="IsSectionExpanded('aIAgentNotes')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIAgentNotes', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Configurations Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentConfigurations"
        sectionName="MJ: AI Agent Configurations"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentConfigurations')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Configurations','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Configurations')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentConfigurations')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentConfigurations', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Examples Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentExamples"
        sectionName="MJ: AI Agent Examples"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentExamples')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Examples','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Examples')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentExamples')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentExamples', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Prompts Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentPrompts"
        sectionName="MJ: AI Agent Prompts"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentPrompts')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Prompts','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Prompts')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentPrompts')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentPrompts', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Relationships Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentRelationships"
        sectionName="MJ: AI Agent Relationships"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentRelationships')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Relationships','SubAgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Relationships')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentRelationships')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentRelationships', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Runs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentRuns"
        sectionName="MJ: AI Agent Runs"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentRuns')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Runs','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Runs')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentRuns')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentRuns', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Steps Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentSteps"
        sectionName="MJ: AI Agent Steps"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentSteps')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Steps','SubAgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Steps')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentSteps')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentSteps', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: Tasks Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJTasks"
        sectionName="MJ: Tasks"
        icon="fa fa-tasks"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJTasks')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: Tasks','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: Tasks')"
                [AllowLoad]="IsSectionExpanded('mJTasks')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJTasks', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AI Result Cache Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIResultCache"
        sectionName="AI Result Cache"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIResultCache')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Result Cache','AgentID')"
                [NewRecordValues]="NewRecordValues('AI Result Cache')"
                [AllowLoad]="IsSectionExpanded('aIResultCache')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIResultCache', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Prompt Runs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIPromptRuns"
        sectionName="MJ: AI Prompt Runs"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIPromptRuns')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Prompt Runs','AgentID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Prompt Runs')"
                [AllowLoad]="IsSectionExpanded('mJAIPromptRuns')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIPromptRuns', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- Conversation Details Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="conversationDetails"
        sectionName="Conversation Details"
        icon="fa fa-comments"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('conversationDetails')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Conversation Details','AgentID')"
                [NewRecordValues]="NewRecordValues('Conversation Details')"
                [AllowLoad]="IsSectionExpanded('conversationDetails')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('conversationDetails', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AI Agents Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgents"
        sectionName="AI Agents"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgents')"
        [defaultExpanded]="false">
        <div *ngIf="record.IsSaved">
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agents','ParentID')"
                [NewRecordValues]="NewRecordValues('AI Agents')"
                [AllowLoad]="IsSectionExpanded('aIAgents')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIAgents', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
    </mj-collapsible-panel>
</mj-record-form-container>
        