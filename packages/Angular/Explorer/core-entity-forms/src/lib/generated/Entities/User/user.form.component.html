<div class="record-form-container">
    <form *ngIf="record" class="record-form" #form="ngForm">
        <mj-form-toolbar [form]="this"></mj-form-toolbar>

        <div class="form-section-controls">
            <div class="control-group">
                <button (click)="expandAllSections()" title="Expand all sections">
                    <i class="fa fa-expand-alt"></i>Expand All
                </button>
                <button (click)="collapseAllSections()" title="Collapse all sections">
                    <i class="fa fa-compress-alt"></i>Collapse All
                </button>
            </div>
            <input type="text"
                   class="section-search"
                   placeholder="Search sections..."
                   (input)="filterSections($event)"
                   #sectionSearch>
            <span class="section-count">
                <span class="section-count-badge">{{getExpandedCount()}}</span> of 65 expanded
            </span>
        </div>
        <div class="form-panels-container">
<!-- User Identity Section -->
        <div class="form-card collapsible-card" data-section-name="user identity" data-field-names="name firstname first name lastname last name title email firstlast first last">
            <div class="collapsible-header" (click)="toggleSection('userIdentity')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-id-card"></i>
                    <h3><span class="section-name">User Identity</span></h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userIdentity ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userIdentity">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Name"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FirstName"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="LastName"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Title"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Email"
            Type="textbox"
            [EditMode]="EditMode"
            LinkType="Email"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FirstLast"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- Account Settings Section -->
        <div class="form-card collapsible-card" data-section-name="account settings" data-field-names="type isactive is active userimageurl user image url userimageiconclass user image icon class">
            <div class="collapsible-header" (click)="toggleSection('accountSettings')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-cog"></i>
                    <h3><span class="section-name">Account Settings</span></h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.accountSettings ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.accountSettings">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Type"
            Type="dropdownlist"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="IsActive"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="UserImageURL"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="UserImageIconClass"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- Entity Links Section -->
        <div class="form-card collapsible-card" data-section-name="entity links" data-field-names="linkedrecordtype linked record type linkedentityid linked entity id linkedentityrecordid linked entity record id employeeid employee">
            <div class="collapsible-header" (click)="toggleSection('entityLinks')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-link"></i>
                    <h3><span class="section-name">Entity Links</span></h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entityLinks ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entityLinks">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="LinkedRecordType"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="LinkedEntityID"
            Type="textbox"
            [EditMode]="EditMode"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="LinkedEntityRecordID"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EmployeeID"
            Type="textbox"
            [EditMode]="EditMode"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- Employee Details Section -->
        <div class="form-card collapsible-card" data-section-name="employee details" data-field-names="employeefirstlast employee first last employeeemail employee email employeetitle employee title employeesupervisor employee supervisor employeesupervisoremail employee supervisor email">
            <div class="collapsible-header" (click)="toggleSection('employeeDetails')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-user-tie"></i>
                    <h3><span class="section-name">Employee Details</span></h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.employeeDetails ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.employeeDetails">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EmployeeFirstLast"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EmployeeEmail"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EmployeeTitle"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EmployeeSupervisor"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EmployeeSupervisorEmail"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- System Metadata Section -->
        <div class="form-card collapsible-card" data-section-name="system metadata" data-field-names="__mj_createdat __mj _created at __mj_updatedat __mj _updated at">
            <div class="collapsible-header" (click)="toggleSection('systemMetadata')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-database"></i>
                    <h3><span class="section-name">System Metadata</span></h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.systemMetadata ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.systemMetadata">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_CreatedAt"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_UpdatedAt"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>
        <div class="related-entity-grid">

        <!-- Action Execution Logs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="action execution logs" data-field-names="action execution logs" data-section-key="actionExecutionLogs">
            <div class="collapsible-header" (click)="toggleSection('actionExecutionLogs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-history"></i>
                    <h3>
                        <span class="section-name">Action Execution Logs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['actionExecutionLogs']">{{sectionRowCounts['actionExecutionLogs']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.actionExecutionLogs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.actionExecutionLogs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Action Execution Logs','UserID')"
                        [NewRecordValues]="NewRecordValues('Action Execution Logs')"
                        [AllowLoad]="IsCurrentSection('actionExecutionLogs')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['actionExecutionLogs'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Actions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="actions" data-field-names="actions" data-section-key="actions">
            <div class="collapsible-header" (click)="toggleSection('actions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-bolt"></i>
                    <h3>
                        <span class="section-name">Actions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['actions']">{{sectionRowCounts['actions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.actions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.actions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Actions','CodeApprovedByUserID')"
                        [NewRecordValues]="NewRecordValues('Actions')"
                        [AllowLoad]="IsCurrentSection('actions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['actions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Audit Logs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="audit logs" data-field-names="audit logs" data-section-key="auditLogs">
            <div class="collapsible-header" (click)="toggleSection('auditLogs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-fingerprint"></i>
                    <h3>
                        <span class="section-name">Audit Logs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['auditLogs']">{{sectionRowCounts['auditLogs']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.auditLogs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.auditLogs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Audit Logs','UserID')"
                        [NewRecordValues]="NewRecordValues('Audit Logs')"
                        [AllowLoad]="IsCurrentSection('auditLogs')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['auditLogs'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Communication Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="communication runs" data-field-names="communication runs" data-section-key="communicationRuns">
            <div class="collapsible-header" (click)="toggleSection('communicationRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-comment"></i>
                    <h3>
                        <span class="section-name">Communication Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['communicationRuns']">{{sectionRowCounts['communicationRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.communicationRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.communicationRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Communication Runs','UserID')"
                        [NewRecordValues]="NewRecordValues('Communication Runs')"
                        [AllowLoad]="IsCurrentSection('communicationRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['communicationRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Company Integration Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="company integration runs" data-field-names="company integration runs" data-section-key="companyIntegrationRuns">
            <div class="collapsible-header" (click)="toggleSection('companyIntegrationRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-briefcase"></i>
                    <h3>
                        <span class="section-name">Company Integration Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['companyIntegrationRuns']">{{sectionRowCounts['companyIntegrationRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.companyIntegrationRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.companyIntegrationRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Company Integration Runs','RunByUserID')"
                        [NewRecordValues]="NewRecordValues('Company Integration Runs')"
                        [AllowLoad]="IsCurrentSection('companyIntegrationRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['companyIntegrationRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Conversations Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="conversations" data-field-names="conversations" data-section-key="conversations">
            <div class="collapsible-header" (click)="toggleSection('conversations')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-regular fa-comments"></i>
                    <h3>
                        <span class="section-name">Conversations</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['conversations']">{{sectionRowCounts['conversations']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.conversations ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.conversations" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Conversations','UserID')"
                        [NewRecordValues]="NewRecordValues('Conversations')"
                        [AllowLoad]="IsCurrentSection('conversations')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['conversations'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Dashboard Categories Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="dashboard categories" data-field-names="dashboard categories" data-section-key="dashboardCategories">
            <div class="collapsible-header" (click)="toggleSection('dashboardCategories')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-tachometer-alt"></i>
                    <h3>
                        <span class="section-name">Dashboard Categories</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['dashboardCategories']">{{sectionRowCounts['dashboardCategories']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.dashboardCategories ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.dashboardCategories" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Dashboard Categories','UserID')"
                        [NewRecordValues]="NewRecordValues('Dashboard Categories')"
                        [AllowLoad]="IsCurrentSection('dashboardCategories')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['dashboardCategories'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Dashboards Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="dashboards" data-field-names="dashboards" data-section-key="dashboards">
            <div class="collapsible-header" (click)="toggleSection('dashboards')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-table-columns"></i>
                    <h3>
                        <span class="section-name">Dashboards</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['dashboards']">{{sectionRowCounts['dashboards']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.dashboards ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.dashboards" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Dashboards','UserID')"
                        [NewRecordValues]="NewRecordValues('Dashboards')"
                        [AllowLoad]="IsCurrentSection('dashboards')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['dashboards'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Data Contexts Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="data contexts" data-field-names="data contexts" data-section-key="dataContexts">
            <div class="collapsible-header" (click)="toggleSection('dataContexts')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-database"></i>
                    <h3>
                        <span class="section-name">Data Contexts</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['dataContexts']">{{sectionRowCounts['dataContexts']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.dataContexts ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.dataContexts" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Data Contexts','UserID')"
                        [NewRecordValues]="NewRecordValues('Data Contexts')"
                        [AllowLoad]="IsCurrentSection('dataContexts')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['dataContexts'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Duplicate Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="duplicate runs" data-field-names="duplicate runs" data-section-key="duplicateRuns">
            <div class="collapsible-header" (click)="toggleSection('duplicateRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-search"></i>
                    <h3>
                        <span class="section-name">Duplicate Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['duplicateRuns']">{{sectionRowCounts['duplicateRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.duplicateRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.duplicateRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Duplicate Runs','StartedByUserID')"
                        [NewRecordValues]="NewRecordValues('Duplicate Runs')"
                        [AllowLoad]="IsCurrentSection('duplicateRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['duplicateRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Lists Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="lists" data-field-names="lists" data-section-key="lists">
            <div class="collapsible-header" (click)="toggleSection('lists')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-list-ul"></i>
                    <h3>
                        <span class="section-name">Lists</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['lists']">{{sectionRowCounts['lists']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.lists ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.lists" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Lists','UserID')"
                        [NewRecordValues]="NewRecordValues('Lists')"
                        [AllowLoad]="IsCurrentSection('lists')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['lists'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Query Categories Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="query categories" data-field-names="query categories" data-section-key="queryCategories">
            <div class="collapsible-header" (click)="toggleSection('queryCategories')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-folder"></i>
                    <h3>
                        <span class="section-name">Query Categories</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['queryCategories']">{{sectionRowCounts['queryCategories']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.queryCategories ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.queryCategories" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Query Categories','UserID')"
                        [NewRecordValues]="NewRecordValues('Query Categories')"
                        [AllowLoad]="IsCurrentSection('queryCategories')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['queryCategories'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Recommendation Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="recommendation runs" data-field-names="recommendation runs" data-section-key="recommendationRuns">
            <div class="collapsible-header" (click)="toggleSection('recommendationRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-rocket"></i>
                    <h3>
                        <span class="section-name">Recommendation Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['recommendationRuns']">{{sectionRowCounts['recommendationRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recommendationRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recommendationRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Recommendation Runs','RunByUserID')"
                        [NewRecordValues]="NewRecordValues('Recommendation Runs')"
                        [AllowLoad]="IsCurrentSection('recommendationRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['recommendationRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Record Change Replay Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="record change replay runs" data-field-names="record change replay runs" data-section-key="recordChangeReplayRuns">
            <div class="collapsible-header" (click)="toggleSection('recordChangeReplayRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-sync"></i>
                    <h3>
                        <span class="section-name">Record Change Replay Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['recordChangeReplayRuns']">{{sectionRowCounts['recordChangeReplayRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recordChangeReplayRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recordChangeReplayRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Record Change Replay Runs','UserID')"
                        [NewRecordValues]="NewRecordValues('Record Change Replay Runs')"
                        [AllowLoad]="IsCurrentSection('recordChangeReplayRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['recordChangeReplayRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Record Changes Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="record changes" data-field-names="record changes" data-section-key="recordChanges">
            <div class="collapsible-header" (click)="toggleSection('recordChanges')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-history"></i>
                    <h3>
                        <span class="section-name">Record Changes</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['recordChanges']">{{sectionRowCounts['recordChanges']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recordChanges ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recordChanges" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Record Changes','UserID')"
                        [NewRecordValues]="NewRecordValues('Record Changes')"
                        [AllowLoad]="IsCurrentSection('recordChanges')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['recordChanges'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Record Merge Logs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="record merge logs" data-field-names="record merge logs" data-section-key="recordMergeLogs">
            <div class="collapsible-header" (click)="toggleSection('recordMergeLogs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-clone"></i>
                    <h3>
                        <span class="section-name">Record Merge Logs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['recordMergeLogs']">{{sectionRowCounts['recordMergeLogs']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recordMergeLogs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recordMergeLogs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Record Merge Logs','InitiatedByUserID')"
                        [NewRecordValues]="NewRecordValues('Record Merge Logs')"
                        [AllowLoad]="IsCurrentSection('recordMergeLogs')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['recordMergeLogs'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Report Categories Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="report categories" data-field-names="report categories" data-section-key="reportCategories">
            <div class="collapsible-header" (click)="toggleSection('reportCategories')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-folder-open"></i>
                    <h3>
                        <span class="section-name">Report Categories</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['reportCategories']">{{sectionRowCounts['reportCategories']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.reportCategories ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.reportCategories" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Report Categories','UserID')"
                        [NewRecordValues]="NewRecordValues('Report Categories')"
                        [AllowLoad]="IsCurrentSection('reportCategories')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['reportCategories'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Report Snapshots Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="report snapshots" data-field-names="report snapshots" data-section-key="reportSnapshots">
            <div class="collapsible-header" (click)="toggleSection('reportSnapshots')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-camera"></i>
                    <h3>
                        <span class="section-name">Report Snapshots</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['reportSnapshots']">{{sectionRowCounts['reportSnapshots']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.reportSnapshots ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.reportSnapshots" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Report Snapshots','UserID')"
                        [NewRecordValues]="NewRecordValues('Report Snapshots')"
                        [AllowLoad]="IsCurrentSection('reportSnapshots')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['reportSnapshots'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="reports" data-field-names="reports" data-section-key="reports">
            <div class="collapsible-header" (click)="toggleSection('reports')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-chart-line"></i>
                    <h3>
                        <span class="section-name">Reports</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['reports']">{{sectionRowCounts['reports']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.reports ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.reports" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Reports','UserID')"
                        [NewRecordValues]="NewRecordValues('Reports')"
                        [AllowLoad]="IsCurrentSection('reports')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['reports'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Template Categories Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="template categories" data-field-names="template categories" data-section-key="templateCategories">
            <div class="collapsible-header" (click)="toggleSection('templateCategories')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-tags"></i>
                    <h3>
                        <span class="section-name">Template Categories</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['templateCategories']">{{sectionRowCounts['templateCategories']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.templateCategories ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.templateCategories" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Template Categories','UserID')"
                        [NewRecordValues]="NewRecordValues('Template Categories')"
                        [AllowLoad]="IsCurrentSection('templateCategories')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['templateCategories'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Templates Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="templates" data-field-names="templates" data-section-key="templates">
            <div class="collapsible-header" (click)="toggleSection('templates')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-regular fa-rectangle-list"></i>
                    <h3>
                        <span class="section-name">Templates</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['templates']">{{sectionRowCounts['templates']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.templates ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.templates" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Templates','UserID')"
                        [NewRecordValues]="NewRecordValues('Templates')"
                        [AllowLoad]="IsCurrentSection('templates')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['templates'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Applications Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user applications" data-field-names="user applications" data-section-key="userApplications">
            <div class="collapsible-header" (click)="toggleSection('userApplications')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-th"></i>
                    <h3>
                        <span class="section-name">User Applications</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['userApplications']">{{sectionRowCounts['userApplications']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userApplications ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userApplications" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User Applications','UserID')"
                        [NewRecordValues]="NewRecordValues('User Applications')"
                        [AllowLoad]="IsCurrentSection('userApplications')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['userApplications'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Favorites Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user favorites" data-field-names="user favorites" data-section-key="userFavorites">
            <div class="collapsible-header" (click)="toggleSection('userFavorites')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-star"></i>
                    <h3>
                        <span class="section-name">User Favorites</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['userFavorites']">{{sectionRowCounts['userFavorites']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userFavorites ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userFavorites" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User Favorites','UserID')"
                        [NewRecordValues]="NewRecordValues('User Favorites')"
                        [AllowLoad]="IsCurrentSection('userFavorites')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['userFavorites'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Notifications Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user notifications" data-field-names="user notifications" data-section-key="userNotifications">
            <div class="collapsible-header" (click)="toggleSection('userNotifications')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-bell"></i>
                    <h3>
                        <span class="section-name">User Notifications</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['userNotifications']">{{sectionRowCounts['userNotifications']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userNotifications ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userNotifications" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User Notifications','UserID')"
                        [NewRecordValues]="NewRecordValues('User Notifications')"
                        [AllowLoad]="IsCurrentSection('userNotifications')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['userNotifications'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Record Logs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user record logs" data-field-names="user record logs" data-section-key="userRecordLogs">
            <div class="collapsible-header" (click)="toggleSection('userRecordLogs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-history"></i>
                    <h3>
                        <span class="section-name">User Record Logs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['userRecordLogs']">{{sectionRowCounts['userRecordLogs']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userRecordLogs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userRecordLogs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User Record Logs','UserID')"
                        [NewRecordValues]="NewRecordValues('User Record Logs')"
                        [AllowLoad]="IsCurrentSection('userRecordLogs')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['userRecordLogs'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Roles Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="roles" data-field-names="user roles" data-section-key="roles">
            <div class="collapsible-header" (click)="toggleSection('roles')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-user-shield"></i>
                    <h3>
                        <span class="section-name">Roles</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['roles']">{{sectionRowCounts['roles']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.roles ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.roles" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User Roles','UserID')"
                        [NewRecordValues]="NewRecordValues('User Roles')"
                        [AllowLoad]="IsCurrentSection('roles')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['roles'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User View Categories Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user view categories" data-field-names="user view categories" data-section-key="userViewCategories">
            <div class="collapsible-header" (click)="toggleSection('userViewCategories')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-folder-open"></i>
                    <h3>
                        <span class="section-name">User View Categories</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['userViewCategories']">{{sectionRowCounts['userViewCategories']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userViewCategories ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userViewCategories" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User View Categories','UserID')"
                        [NewRecordValues]="NewRecordValues('User View Categories')"
                        [AllowLoad]="IsCurrentSection('userViewCategories')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['userViewCategories'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User View Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user view runs" data-field-names="user view runs" data-section-key="userViewRuns">
            <div class="collapsible-header" (click)="toggleSection('userViewRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-eye"></i>
                    <h3>
                        <span class="section-name">User View Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['userViewRuns']">{{sectionRowCounts['userViewRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userViewRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userViewRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User View Runs','RunByUserID')"
                        [NewRecordValues]="NewRecordValues('User View Runs')"
                        [AllowLoad]="IsCurrentSection('userViewRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['userViewRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Views Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user views" data-field-names="user views" data-section-key="userViews">
            <div class="collapsible-header" (click)="toggleSection('userViews')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-table-cells"></i>
                    <h3>
                        <span class="section-name">User Views</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['userViews']">{{sectionRowCounts['userViews']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userViews ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userViews" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('User Views','UserID')"
                        [NewRecordValues]="NewRecordValues('User Views')"
                        [AllowLoad]="IsCurrentSection('userViews')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['userViews'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Workspaces Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="workspaces" data-field-names="workspaces" data-section-key="workspaces">
            <div class="collapsible-header" (click)="toggleSection('workspaces')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-folder"></i>
                    <h3>
                        <span class="section-name">Workspaces</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['workspaces']">{{sectionRowCounts['workspaces']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.workspaces ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.workspaces" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Workspaces','UserID')"
                        [NewRecordValues]="NewRecordValues('Workspaces')"
                        [AllowLoad]="IsCurrentSection('workspaces')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['workspaces'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Agent Notes Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai agent notes" data-field-names="ai agent notes" data-section-key="aIAgentNotes">
            <div class="collapsible-header" (click)="toggleSection('aIAgentNotes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-robot"></i>
                    <h3>
                        <span class="section-name">AI Agent Notes</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIAgentNotes']">{{sectionRowCounts['aIAgentNotes']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIAgentNotes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIAgentNotes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Notes','UserID')"
                        [NewRecordValues]="NewRecordValues('AI Agent Notes')"
                        [AllowLoad]="IsCurrentSection('aIAgentNotes')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIAgentNotes'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Agent Requests Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai agent requests" data-field-names="ai agent requests" data-section-key="aIAgentRequests">
            <div class="collapsible-header" (click)="toggleSection('aIAgentRequests')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-robot"></i>
                    <h3>
                        <span class="section-name">AI Agent Requests</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIAgentRequests']">{{sectionRowCounts['aIAgentRequests']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIAgentRequests ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIAgentRequests" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Requests','ResponseByUserID')"
                        [NewRecordValues]="NewRecordValues('AI Agent Requests')"
                        [AllowLoad]="IsCurrentSection('aIAgentRequests')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIAgentRequests'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- List Categories Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="list categories" data-field-names="list categories" data-section-key="listCategories">
            <div class="collapsible-header" (click)="toggleSection('listCategories')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-list"></i>
                    <h3>
                        <span class="section-name">List Categories</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['listCategories']">{{sectionRowCounts['listCategories']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.listCategories ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.listCategories" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('List Categories','UserID')"
                        [NewRecordValues]="NewRecordValues('List Categories')"
                        [AllowLoad]="IsCurrentSection('listCategories')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['listCategories'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Artifact Permissions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: artifact permissions" data-field-names="mj: artifact permissions" data-section-key="mJArtifactPermissions">
            <div class="collapsible-header" (click)="toggleSection('mJArtifactPermissions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-key"></i>
                    <h3>
                        <span class="section-name">MJ: Artifact Permissions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJArtifactPermissions']">{{sectionRowCounts['mJArtifactPermissions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJArtifactPermissions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJArtifactPermissions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Artifact Permissions','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Artifact Permissions')"
                        [AllowLoad]="IsCurrentSection('mJArtifactPermissions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJArtifactPermissions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Artifact Uses Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: artifact uses" data-field-names="mj: artifact uses" data-section-key="mJArtifactUses">
            <div class="collapsible-header" (click)="toggleSection('mJArtifactUses')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-eye"></i>
                    <h3>
                        <span class="section-name">MJ: Artifact Uses</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJArtifactUses']">{{sectionRowCounts['mJArtifactUses']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJArtifactUses ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJArtifactUses" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Artifact Uses','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Artifact Uses')"
                        [AllowLoad]="IsCurrentSection('mJArtifactUses')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJArtifactUses'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Artifact Versions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: artifact versions" data-field-names="mj: artifact versions" data-section-key="mJArtifactVersions">
            <div class="collapsible-header" (click)="toggleSection('mJArtifactVersions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-history"></i>
                    <h3>
                        <span class="section-name">MJ: Artifact Versions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJArtifactVersions']">{{sectionRowCounts['mJArtifactVersions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJArtifactVersions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJArtifactVersions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Artifact Versions','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Artifact Versions')"
                        [AllowLoad]="IsCurrentSection('mJArtifactVersions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJArtifactVersions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Conversation Detail Ratings Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: conversation detail ratings" data-field-names="mj: conversation detail ratings" data-section-key="mJConversationDetailRatings">
            <div class="collapsible-header" (click)="toggleSection('mJConversationDetailRatings')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-comment"></i>
                    <h3>
                        <span class="section-name">MJ: Conversation Detail Ratings</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJConversationDetailRatings']">{{sectionRowCounts['mJConversationDetailRatings']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJConversationDetailRatings ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJConversationDetailRatings" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Conversation Detail Ratings','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Conversation Detail Ratings')"
                        [AllowLoad]="IsCurrentSection('mJConversationDetailRatings')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJConversationDetailRatings'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Dashboard User Preferences Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: dashboard user preferences" data-field-names="mj: dashboard user preferences" data-section-key="mJDashboardUserPreferences">
            <div class="collapsible-header" (click)="toggleSection('mJDashboardUserPreferences')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-tachometer-alt"></i>
                    <h3>
                        <span class="section-name">MJ: Dashboard User Preferences</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJDashboardUserPreferences']">{{sectionRowCounts['mJDashboardUserPreferences']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJDashboardUserPreferences ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJDashboardUserPreferences" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Dashboard User Preferences','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Dashboard User Preferences')"
                        [AllowLoad]="IsCurrentSection('mJDashboardUserPreferences')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJDashboardUserPreferences'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Dashboard User States Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: dashboard user states" data-field-names="mj: dashboard user states" data-section-key="mJDashboardUserStates">
            <div class="collapsible-header" (click)="toggleSection('mJDashboardUserStates')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-tachometer-alt"></i>
                    <h3>
                        <span class="section-name">MJ: Dashboard User States</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJDashboardUserStates']">{{sectionRowCounts['mJDashboardUserStates']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJDashboardUserStates ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJDashboardUserStates" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Dashboard User States','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Dashboard User States')"
                        [AllowLoad]="IsCurrentSection('mJDashboardUserStates')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJDashboardUserStates'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Public Links Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: public links" data-field-names="mj: public links" data-section-key="mJPublicLinks">
            <div class="collapsible-header" (click)="toggleSection('mJPublicLinks')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-link"></i>
                    <h3>
                        <span class="section-name">MJ: Public Links</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJPublicLinks']">{{sectionRowCounts['mJPublicLinks']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJPublicLinks ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJPublicLinks" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Public Links','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Public Links')"
                        [AllowLoad]="IsCurrentSection('mJPublicLinks')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJPublicLinks'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Report User States Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: report user states" data-field-names="mj: report user states" data-section-key="mJReportUserStates">
            <div class="collapsible-header" (click)="toggleSection('mJReportUserStates')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-chart-line"></i>
                    <h3>
                        <span class="section-name">MJ: Report User States</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJReportUserStates']">{{sectionRowCounts['mJReportUserStates']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJReportUserStates ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJReportUserStates" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Report User States','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Report User States')"
                        [AllowLoad]="IsCurrentSection('mJReportUserStates')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJReportUserStates'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Scheduled Job Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: scheduled job runs" data-field-names="mj: scheduled job runs" data-section-key="mJScheduledJobRuns">
            <div class="collapsible-header" (click)="toggleSection('mJScheduledJobRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-tasks"></i>
                    <h3>
                        <span class="section-name">MJ: Scheduled Job Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJScheduledJobRuns']">{{sectionRowCounts['mJScheduledJobRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJScheduledJobRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJScheduledJobRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Scheduled Job Runs','ExecutedByUserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Scheduled Job Runs')"
                        [AllowLoad]="IsCurrentSection('mJScheduledJobRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJScheduledJobRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Scheduled Jobs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: scheduled jobs" data-field-names="mj: scheduled jobs" data-section-key="mJScheduledJobs">
            <div class="collapsible-header" (click)="toggleSection('mJScheduledJobs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-calendar"></i>
                    <h3>
                        <span class="section-name">MJ: Scheduled Jobs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJScheduledJobs']">{{sectionRowCounts['mJScheduledJobs']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJScheduledJobs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJScheduledJobs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Scheduled Jobs','NotifyUserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Scheduled Jobs')"
                        [AllowLoad]="IsCurrentSection('mJScheduledJobs')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJScheduledJobs'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Resource Links Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="resource links" data-field-names="resource links" data-section-key="resourceLinks">
            <div class="collapsible-header" (click)="toggleSection('resourceLinks')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-link"></i>
                    <h3>
                        <span class="section-name">Resource Links</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['resourceLinks']">{{sectionRowCounts['resourceLinks']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.resourceLinks ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.resourceLinks" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Resource Links','UserID')"
                        [NewRecordValues]="NewRecordValues('Resource Links')"
                        [AllowLoad]="IsCurrentSection('resourceLinks')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['resourceLinks'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Scheduled Actions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="scheduled actions" data-field-names="scheduled actions" data-section-key="scheduledActions">
            <div class="collapsible-header" (click)="toggleSection('scheduledActions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-calendar"></i>
                    <h3>
                        <span class="section-name">Scheduled Actions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['scheduledActions']">{{sectionRowCounts['scheduledActions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.scheduledActions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.scheduledActions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Scheduled Actions','CreatedByUserID')"
                        [NewRecordValues]="NewRecordValues('Scheduled Actions')"
                        [AllowLoad]="IsCurrentSection('scheduledActions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['scheduledActions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Agent Requests Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai agent requests" data-field-names="ai agent requests" data-section-key="aIAgentRequests">
            <div class="collapsible-header" (click)="toggleSection('aIAgentRequests')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-robot"></i>
                    <h3>
                        <span class="section-name">AI Agent Requests</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIAgentRequests']">{{sectionRowCounts['aIAgentRequests']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIAgentRequests ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIAgentRequests" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Requests','RequestForUserID')"
                        [NewRecordValues]="NewRecordValues('AI Agent Requests')"
                        [AllowLoad]="IsCurrentSection('aIAgentRequests')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIAgentRequests'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Conversation Details Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="conversation details" data-field-names="conversation details" data-section-key="conversationDetails">
            <div class="collapsible-header" (click)="toggleSection('conversationDetails')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-comments"></i>
                    <h3>
                        <span class="section-name">Conversation Details</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['conversationDetails']">{{sectionRowCounts['conversationDetails']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.conversationDetails ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.conversationDetails" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Conversation Details','UserID')"
                        [NewRecordValues]="NewRecordValues('Conversation Details')"
                        [AllowLoad]="IsCurrentSection('conversationDetails')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['conversationDetails'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Access Control Rules Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: access control rules" data-field-names="mj: access control rules" data-section-key="mJAccessControlRules">
            <div class="collapsible-header" (click)="toggleSection('mJAccessControlRules')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-lock"></i>
                    <h3>
                        <span class="section-name">MJ: Access Control Rules</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAccessControlRules']">{{sectionRowCounts['mJAccessControlRules']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAccessControlRules ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAccessControlRules" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Access Control Rules','GrantedByUserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Access Control Rules')"
                        [AllowLoad]="IsCurrentSection('mJAccessControlRules')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAccessControlRules'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Artifact Permissions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: artifact permissions" data-field-names="mj: artifact permissions" data-section-key="mJArtifactPermissions">
            <div class="collapsible-header" (click)="toggleSection('mJArtifactPermissions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-key"></i>
                    <h3>
                        <span class="section-name">MJ: Artifact Permissions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJArtifactPermissions']">{{sectionRowCounts['mJArtifactPermissions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJArtifactPermissions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJArtifactPermissions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Artifact Permissions','SharedByUserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Artifact Permissions')"
                        [AllowLoad]="IsCurrentSection('mJArtifactPermissions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJArtifactPermissions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Artifacts Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: artifacts" data-field-names="mj: artifacts" data-section-key="mJArtifacts">
            <div class="collapsible-header" (click)="toggleSection('mJArtifacts')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-file"></i>
                    <h3>
                        <span class="section-name">MJ: Artifacts</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJArtifacts']">{{sectionRowCounts['mJArtifacts']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJArtifacts ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJArtifacts" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Artifacts','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Artifacts')"
                        [AllowLoad]="IsCurrentSection('mJArtifacts')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJArtifacts'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Collection Permissions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: collection permissions" data-field-names="mj: collection permissions" data-section-key="mJCollectionPermissions">
            <div class="collapsible-header" (click)="toggleSection('mJCollectionPermissions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-folder"></i>
                    <h3>
                        <span class="section-name">MJ: Collection Permissions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJCollectionPermissions']">{{sectionRowCounts['mJCollectionPermissions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJCollectionPermissions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJCollectionPermissions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Collection Permissions','SharedByUserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Collection Permissions')"
                        [AllowLoad]="IsCurrentSection('mJCollectionPermissions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJCollectionPermissions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Scheduled Jobs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: scheduled jobs" data-field-names="mj: scheduled jobs" data-section-key="mJScheduledJobs">
            <div class="collapsible-header" (click)="toggleSection('mJScheduledJobs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-calendar"></i>
                    <h3>
                        <span class="section-name">MJ: Scheduled Jobs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJScheduledJobs']">{{sectionRowCounts['mJScheduledJobs']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJScheduledJobs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJScheduledJobs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Scheduled Jobs','OwnerUserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Scheduled Jobs')"
                        [AllowLoad]="IsCurrentSection('mJScheduledJobs')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJScheduledJobs'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Resource Permissions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="resource permissions" data-field-names="resource permissions" data-section-key="resourcePermissions">
            <div class="collapsible-header" (click)="toggleSection('resourcePermissions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-lock"></i>
                    <h3>
                        <span class="section-name">Resource Permissions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['resourcePermissions']">{{sectionRowCounts['resourcePermissions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.resourcePermissions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.resourcePermissions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Resource Permissions','UserID')"
                        [NewRecordValues]="NewRecordValues('Resource Permissions')"
                        [AllowLoad]="IsCurrentSection('resourcePermissions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['resourcePermissions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Agent Permissions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai agent permissions" data-field-names="mj: ai agent permissions" data-section-key="mJAIAgentPermissions">
            <div class="collapsible-header" (click)="toggleSection('mJAIAgentPermissions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-robot"></i>
                    <h3>
                        <span class="section-name">MJ: AI Agent Permissions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIAgentPermissions']">{{sectionRowCounts['mJAIAgentPermissions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIAgentPermissions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIAgentPermissions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Permissions','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Agent Permissions')"
                        [AllowLoad]="IsCurrentSection('mJAIAgentPermissions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIAgentPermissions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Agent Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai agent runs" data-field-names="mj: ai agent runs" data-section-key="mJAIAgentRuns">
            <div class="collapsible-header" (click)="toggleSection('mJAIAgentRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-robot"></i>
                    <h3>
                        <span class="section-name">MJ: AI Agent Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIAgentRuns']">{{sectionRowCounts['mJAIAgentRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIAgentRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIAgentRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Runs','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Agent Runs')"
                        [AllowLoad]="IsCurrentSection('mJAIAgentRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIAgentRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Collection Permissions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: collection permissions" data-field-names="mj: collection permissions" data-section-key="mJCollectionPermissions">
            <div class="collapsible-header" (click)="toggleSection('mJCollectionPermissions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-folder"></i>
                    <h3>
                        <span class="section-name">MJ: Collection Permissions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJCollectionPermissions']">{{sectionRowCounts['mJCollectionPermissions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJCollectionPermissions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJCollectionPermissions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Collection Permissions','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Collection Permissions')"
                        [AllowLoad]="IsCurrentSection('mJCollectionPermissions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJCollectionPermissions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Collections Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: collections" data-field-names="mj: collections" data-section-key="mJCollections">
            <div class="collapsible-header" (click)="toggleSection('mJCollections')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-folder-open"></i>
                    <h3>
                        <span class="section-name">MJ: Collections</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJCollections']">{{sectionRowCounts['mJCollections']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJCollections ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJCollections" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Collections','OwnerID')"
                        [NewRecordValues]="NewRecordValues('MJ: Collections')"
                        [AllowLoad]="IsCurrentSection('mJCollections')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJCollections'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Agent Examples Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai agent examples" data-field-names="mj: ai agent examples" data-section-key="mJAIAgentExamples">
            <div class="collapsible-header" (click)="toggleSection('mJAIAgentExamples')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-robot"></i>
                    <h3>
                        <span class="section-name">MJ: AI Agent Examples</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIAgentExamples']">{{sectionRowCounts['mJAIAgentExamples']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIAgentExamples ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIAgentExamples" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Examples','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Agent Examples')"
                        [AllowLoad]="IsCurrentSection('mJAIAgentExamples')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIAgentExamples'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Tasks Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: tasks" data-field-names="mj: tasks" data-section-key="mJTasks">
            <div class="collapsible-header" (click)="toggleSection('mJTasks')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-tasks"></i>
                    <h3>
                        <span class="section-name">MJ: Tasks</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJTasks']">{{sectionRowCounts['mJTasks']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJTasks ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJTasks" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Tasks','UserID')"
                        [NewRecordValues]="NewRecordValues('MJ: Tasks')"
                        [AllowLoad]="IsCurrentSection('mJTasks')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJTasks'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Agents Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai agents" data-field-names="ai agents" data-section-key="aIAgents">
            <div class="collapsible-header" (click)="toggleSection('aIAgents')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-robot"></i>
                    <h3>
                        <span class="section-name">AI Agents</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIAgents']">{{sectionRowCounts['aIAgents']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIAgents ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIAgents" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Agents','OwnerUserID')"
                        [NewRecordValues]="NewRecordValues('AI Agents')"
                        [AllowLoad]="IsCurrentSection('aIAgents')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIAgents'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>
        </div>
        </div>
    </form>
</div>
        