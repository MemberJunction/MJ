<div class="record-form-container">
    <form *ngIf="record" class="record-form" #form="ngForm">
        <mj-form-toolbar [form]="this"></mj-form-toolbar>
        <kendo-splitter orientation="vertical" (layoutChange)="splitterLayoutChange()">
            <kendo-splitter-pane [collapsible]="true" [size]="TopAreaHeight">
                <div #topArea class="record-form-group">
                    <mj-form-section Entity="Entities" Section="top-area" [record]="record" [EditMode]="this.EditMode"></mj-form-section>
                </div>
            </kendo-splitter-pane>
            <kendo-splitter-pane>
        <div class="form-section-controls">
            <div class="control-group">
                <button (click)="expandAllSections()" title="Expand all sections">
                    <i class="fa fa-expand-alt"></i>Expand All
                </button>
                <button (click)="collapseAllSections()" title="Collapse all sections">
                    <i class="fa fa-compress-alt"></i>Collapse All
                </button>
            </div>
            <input type="text"
                   class="section-search"
                   placeholder="Search sections..."
                   (input)="filterSections($event)"
                   #sectionSearch>
            <span class="section-count">
                <span class="section-count-badge">{{getExpandedCount()}}</span> of 45 expanded
            </span>
        </div>
        <div class="form-panels-container">
<!-- Details Section -->
        <div class="form-card collapsible-card" data-section-name="details">
            <div class="collapsible-header" (click)="toggleSection('details')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-align-left"></i>
                    <h3>Details</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.details ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.details">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentID"
            Type="textbox"
            [EditMode]="EditMode"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="NameSuffix"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AutoUpdateDescription"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="BaseViewGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="VirtualEntity"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextSearchEnabled"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextCatalog"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextCatalogGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextIndex"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextIndexGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextSearchFunction"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextSearchFunctionGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="UserViewMaxRows"
            Type="numerictextbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CascadeDeletes"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DeleteType"
            Type="dropdownlist"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowRecordMerge"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spMatch"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RelationshipDefaultDisplayType"
            Type="dropdownlist"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EntityObjectSubclassName"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EntityObjectSubclassImport"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PreferredCommunicationField"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Icon"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_CreatedAt"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_UpdatedAt"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ScopeDefault"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackWithSchema"
            Type="dropdownlist"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackSampleMethod"
            Type="dropdownlist"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackSampleCount"
            Type="numerictextbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackSampleOrder"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AutoRowCountFrequency"
            Type="numerictextbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowCount"
            Type="numerictextbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowCountRunAt"
            Type="datepicker"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Status"
            Type="dropdownlist"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DisplayName"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CodeName"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ClassName"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="BaseTableCodeName"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentEntity"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentBaseTable"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentBaseView"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- Audit Section -->
        <div class="form-card collapsible-card" data-section-name="audit">
            <div class="collapsible-header" (click)="toggleSection('audit')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-info-circle"></i>
                    <h3>Audit</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.audit ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.audit">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AuditRecordAccess"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AuditViewRuns"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- API Section -->
        <div class="form-card collapsible-card" data-section-name="api">
            <div class="collapsible-header" (click)="toggleSection('aPI')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-info-circle"></i>
                    <h3>API</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aPI ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aPI">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="IncludeInAPI"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowAllRowsAPI"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowUpdateAPI"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowCreateAPI"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowDeleteAPI"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CustomResolverAPI"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowUserSearchAPI"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- DB Section -->
        <div class="form-card collapsible-card" data-section-name="db">
            <div class="collapsible-header" (click)="toggleSection('dB')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-info-circle"></i>
                    <h3>DB</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.dB ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.dB">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spCreate"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spUpdate"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spDelete"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spCreateGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spUpdateGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spDeleteGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- UI Section -->
        <div class="form-card collapsible-card" data-section-name="ui">
            <div class="collapsible-header" (click)="toggleSection('uI')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-info-circle"></i>
                    <h3>UI</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.uI ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.uI">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="false"
            FieldName="UserFormGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>

        <!-- Application Entities Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="application entities">
            <div class="collapsible-header" (click)="toggleSection('applicationEntities')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Application Entities</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.applicationEntities ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.applicationEntities" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Application Entities','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Application Entities')"
                        [AllowLoad]="IsCurrentTab('Application Entities')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Audit Logs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="audit logs">
            <div class="collapsible-header" (click)="toggleSection('auditLogs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-fingerprint tab-header-icon"></i>
                    <h3>Audit Logs</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.auditLogs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.auditLogs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Audit Logs','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Audit Logs')"
                        [AllowLoad]="IsCurrentTab('Audit Logs')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Company Integration Record Maps Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="company integration record maps">
            <div class="collapsible-header" (click)="toggleSection('companyIntegrationRecordMaps')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Company Integration Record Maps</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.companyIntegrationRecordMaps ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.companyIntegrationRecordMaps" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Company Integration Record Maps','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Company Integration Record Maps')"
                        [AllowLoad]="IsCurrentTab('Company Integration Record Maps')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Company Integration Run Details Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="company integration run details">
            <div class="collapsible-header" (click)="toggleSection('companyIntegrationRunDetails')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Company Integration Run Details</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.companyIntegrationRunDetails ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.companyIntegrationRunDetails" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Company Integration Run Details','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Company Integration Run Details')"
                        [AllowLoad]="IsCurrentTab('Company Integration Run Details')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Conversations Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="conversations">
            <div class="collapsible-header" (click)="toggleSection('conversations')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-regular fa-comments tab-header-icon"></i>
                    <h3>Conversations</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.conversations ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.conversations" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Conversations','LinkedEntityID')"  
                        [NewRecordValues]="NewRecordValues('Conversations')"
                        [AllowLoad]="IsCurrentTab('Conversations')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Data Context Items Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="data context items">
            <div class="collapsible-header" (click)="toggleSection('dataContextItems')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Data Context Items</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.dataContextItems ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.dataContextItems" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Data Context Items','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Data Context Items')"
                        [AllowLoad]="IsCurrentTab('Data Context Items')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Dataset Items Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="dataset items">
            <div class="collapsible-header" (click)="toggleSection('datasetItems')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Dataset Items</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.datasetItems ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.datasetItems" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Dataset Items','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Dataset Items')"
                        [AllowLoad]="IsCurrentTab('Dataset Items')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Duplicate Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="duplicate runs">
            <div class="collapsible-header" (click)="toggleSection('duplicateRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Duplicate Runs</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.duplicateRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.duplicateRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Duplicate Runs','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Duplicate Runs')"
                        [AllowLoad]="IsCurrentTab('Duplicate Runs')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entities Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entities">
            <div class="collapsible-header" (click)="toggleSection('entities')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-database tab-header-icon"></i>
                    <h3>Entities</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entities ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entities" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entities','ParentID')"  
                        [NewRecordValues]="NewRecordValues('Entities')"
                        [AllowLoad]="IsCurrentTab('Entities')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entity Actions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entity actions">
            <div class="collapsible-header" (click)="toggleSection('entityActions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Entity Actions</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entityActions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entityActions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Actions','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Actions')"
                        [AllowLoad]="IsCurrentTab('Entity Actions')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Actions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai actions">
            <div class="collapsible-header" (click)="toggleSection('aIActions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>AI Actions</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIActions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIActions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity AI Actions','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity AI Actions')"
                        [AllowLoad]="IsCurrentTab('AI Actions')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entity Communication Message Types Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entity communication message types">
            <div class="collapsible-header" (click)="toggleSection('entityCommunicationMessageTypes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Entity Communication Message Types</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entityCommunicationMessageTypes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entityCommunicationMessageTypes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Communication Message Types','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Communication Message Types')"
                        [AllowLoad]="IsCurrentTab('Entity Communication Message Types')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entity Documents Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entity documents">
            <div class="collapsible-header" (click)="toggleSection('entityDocuments')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Entity Documents</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entityDocuments ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entityDocuments" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Documents','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Documents')"
                        [AllowLoad]="IsCurrentTab('Entity Documents')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Fields Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="fields">
            <div class="collapsible-header" (click)="toggleSection('fields')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Fields</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.fields ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.fields" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Fields','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Fields')"
                        [AllowLoad]="IsCurrentTab('Fields')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Permissions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="permissions">
            <div class="collapsible-header" (click)="toggleSection('permissions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Permissions</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.permissions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.permissions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Permissions','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Permissions')"
                        [AllowLoad]="IsCurrentTab('Permissions')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entity Record Documents Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entity record documents">
            <div class="collapsible-header" (click)="toggleSection('entityRecordDocuments')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Entity Record Documents</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entityRecordDocuments ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entityRecordDocuments" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Record Documents','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Record Documents')"
                        [AllowLoad]="IsCurrentTab('Entity Record Documents')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Relationships Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="relationships">
            <div class="collapsible-header" (click)="toggleSection('relationships')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Relationships</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.relationships ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.relationships" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Relationships','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Relationships')"
                        [AllowLoad]="IsCurrentTab('Relationships')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entity Settings Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entity settings">
            <div class="collapsible-header" (click)="toggleSection('entitySettings')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Entity Settings</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entitySettings ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entitySettings" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Settings','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Entity Settings')"
                        [AllowLoad]="IsCurrentTab('Entity Settings')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- File Entity Record Links Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="file entity record links">
            <div class="collapsible-header" (click)="toggleSection('fileEntityRecordLinks')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>File Entity Record Links</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.fileEntityRecordLinks ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.fileEntityRecordLinks" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('File Entity Record Links','EntityID')"  
                        [NewRecordValues]="NewRecordValues('File Entity Record Links')"
                        [AllowLoad]="IsCurrentTab('File Entity Record Links')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Integration URL Formats Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="integration url formats">
            <div class="collapsible-header" (click)="toggleSection('integrationURLFormats')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Integration URL Formats</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.integrationURLFormats ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.integrationURLFormats" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Integration URL Formats','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Integration URL Formats')"
                        [AllowLoad]="IsCurrentTab('Integration URL Formats')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Lists Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="lists">
            <div class="collapsible-header" (click)="toggleSection('lists')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Lists</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.lists ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.lists" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Lists','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Lists')"
                        [AllowLoad]="IsCurrentTab('Lists')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Query Fields Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="query fields">
            <div class="collapsible-header" (click)="toggleSection('queryFields')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Query Fields</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.queryFields ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.queryFields" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Query Fields','SourceEntityID')"  
                        [NewRecordValues]="NewRecordValues('Query Fields')"
                        [AllowLoad]="IsCurrentTab('Query Fields')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Recommendation Items Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="recommendation items">
            <div class="collapsible-header" (click)="toggleSection('recommendationItems')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Recommendation Items</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recommendationItems ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recommendationItems" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Recommendation Items','DestinationEntityID')"  
                        [NewRecordValues]="NewRecordValues('Recommendation Items')"
                        [AllowLoad]="IsCurrentTab('Recommendation Items')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Recommendations Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="recommendations">
            <div class="collapsible-header" (click)="toggleSection('recommendations')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-circle-nodes tab-header-icon"></i>
                    <h3>Recommendations</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recommendations ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recommendations" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Recommendations','SourceEntityID')"  
                        [NewRecordValues]="NewRecordValues('Recommendations')"
                        [AllowLoad]="IsCurrentTab('Recommendations')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Record Changes Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="record changes">
            <div class="collapsible-header" (click)="toggleSection('recordChanges')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Record Changes</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recordChanges ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recordChanges" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Record Changes','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Record Changes')"
                        [AllowLoad]="IsCurrentTab('Record Changes')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Record Merge Logs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="record merge logs">
            <div class="collapsible-header" (click)="toggleSection('recordMergeLogs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Record Merge Logs</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.recordMergeLogs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.recordMergeLogs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Record Merge Logs','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Record Merge Logs')"
                        [AllowLoad]="IsCurrentTab('Record Merge Logs')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Resource Types Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="resource types">
            <div class="collapsible-header" (click)="toggleSection('resourceTypes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Resource Types</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.resourceTypes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.resourceTypes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Resource Types','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Resource Types')"
                        [AllowLoad]="IsCurrentTab('Resource Types')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Tagged Items Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="tagged items">
            <div class="collapsible-header" (click)="toggleSection('taggedItems')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Tagged Items</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.taggedItems ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.taggedItems" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Tagged Items','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Tagged Items')"
                        [AllowLoad]="IsCurrentTab('Tagged Items')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Template Params Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="template params">
            <div class="collapsible-header" (click)="toggleSection('templateParams')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Template Params</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.templateParams ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.templateParams" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Template Params','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Template Params')"
                        [AllowLoad]="IsCurrentTab('Template Params')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Application Entities Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user application entities">
            <div class="collapsible-header" (click)="toggleSection('userApplicationEntities')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>User Application Entities</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userApplicationEntities ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userApplicationEntities" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('User Application Entities','EntityID')"  
                        [NewRecordValues]="NewRecordValues('User Application Entities')"
                        [AllowLoad]="IsCurrentTab('User Application Entities')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Favorites Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user favorites">
            <div class="collapsible-header" (click)="toggleSection('userFavorites')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>User Favorites</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userFavorites ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userFavorites" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('User Favorites','EntityID')"  
                        [NewRecordValues]="NewRecordValues('User Favorites')"
                        [AllowLoad]="IsCurrentTab('User Favorites')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Record Logs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user record logs">
            <div class="collapsible-header" (click)="toggleSection('userRecordLogs')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>User Record Logs</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userRecordLogs ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userRecordLogs" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('User Record Logs','EntityID')"  
                        [NewRecordValues]="NewRecordValues('User Record Logs')"
                        [AllowLoad]="IsCurrentTab('User Record Logs')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User View Categories Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user view categories">
            <div class="collapsible-header" (click)="toggleSection('userViewCategories')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>User View Categories</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userViewCategories ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userViewCategories" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('User View Categories','EntityID')"  
                        [NewRecordValues]="NewRecordValues('User View Categories')"
                        [AllowLoad]="IsCurrentTab('User View Categories')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- User Views Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="user views">
            <div class="collapsible-header" (click)="toggleSection('userViews')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-table-cells tab-header-icon"></i>
                    <h3>User Views</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.userViews ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.userViews" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('User Views','EntityID')"  
                        [NewRecordValues]="NewRecordValues('User Views')"
                        [AllowLoad]="IsCurrentTab('User Views')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Users Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="users">
            <div class="collapsible-header" (click)="toggleSection('users')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-user tab-header-icon"></i>
                    <h3>Users</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.users ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.users" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Users','LinkedEntityID')"  
                        [NewRecordValues]="NewRecordValues('Users')"
                        [AllowLoad]="IsCurrentTab('Users')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Access Control Rules Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: access control rules">
            <div class="collapsible-header" (click)="toggleSection('mJAccessControlRules')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>MJ: Access Control Rules</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAccessControlRules ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAccessControlRules" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Access Control Rules','EntityID')"  
                        [NewRecordValues]="NewRecordValues('MJ: Access Control Rules')"
                        [AllowLoad]="IsCurrentTab('MJ: Access Control Rules')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Record Links Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: record links">
            <div class="collapsible-header" (click)="toggleSection('mJRecordLinks')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>MJ: Record Links</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJRecordLinks ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJRecordLinks" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Record Links','SourceEntityID')"  
                        [NewRecordValues]="NewRecordValues('MJ: Record Links')"
                        [AllowLoad]="IsCurrentTab('MJ: Record Links')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Query Entities Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="query entities">
            <div class="collapsible-header" (click)="toggleSection('queryEntities')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Query Entities</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.queryEntities ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.queryEntities" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Query Entities','EntityID')"  
                        [NewRecordValues]="NewRecordValues('Query Entities')"
                        [AllowLoad]="IsCurrentTab('Query Entities')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Generated Codes Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="generated codes">
            <div class="collapsible-header" (click)="toggleSection('generatedCodes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>Generated Codes</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.generatedCodes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.generatedCodes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('Generated Codes','LinkedEntityID')"  
                        [NewRecordValues]="NewRecordValues('Generated Codes')"
                        [AllowLoad]="IsCurrentTab('Generated Codes')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: Record Links Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: record links">
            <div class="collapsible-header" (click)="toggleSection('mJRecordLinks')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>MJ: Record Links</h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJRecordLinks ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJRecordLinks" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid 
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: Record Links','TargetEntityID')"  
                        [NewRecordValues]="NewRecordValues('MJ: Record Links')"
                        [AllowLoad]="IsCurrentTab('MJ: Record Links')"  
                        [EditMode]="GridEditMode()"  
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>
        </div>
            </kendo-splitter-pane>
        </kendo-splitter>
    </form>
</div>
        