<div class="record-form-container" mjFillContainer [bottomMargin]="20" [rightMargin]="5">
    <form *ngIf="record" class="record-form"  #form="ngForm" mjFillContainer>
        <mj-form-toolbar [form]="this"></mj-form-toolbar>
        <kendo-splitter orientation="vertical" (layoutChange)="splitterLayoutChange()" mjFillContainer>
            <kendo-splitter-pane [collapsible]="true" [size]="TopAreaHeight">
                <div #topArea class="record-form-group">
                    <mj-form-section Entity="Entities" Section="top-area" [record]="record" [EditMode]="this.EditMode"></mj-form-section>
                </div>
            </kendo-splitter-pane>
            <kendo-splitter-pane>
                <mj-tabstrip (TabSelected)="onTabSelect($event.index)" mjFillContainer>
                    
                    <mj-tab Name="Details">
                        Details
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section 
                            Entity="Entities" 
                            Section="details" 
                            [record]="record" 
                            [EditMode]="this.EditMode">
                        </mj-form-section>
                    </mj-tab-body>
               
                    <mj-tab Name="Audit">
                        Audit
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section 
                            Entity="Entities" 
                            Section="audit" 
                            [record]="record" 
                            [EditMode]="this.EditMode">
                        </mj-form-section>
                    </mj-tab-body>
               
                    <mj-tab Name="API">
                        API
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section 
                            Entity="Entities" 
                            Section="api" 
                            [record]="record" 
                            [EditMode]="this.EditMode">
                        </mj-form-section>
                    </mj-tab-body>
               
                    <mj-tab Name="DB">
                        DB
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section 
                            Entity="Entities" 
                            Section="db" 
                            [record]="record" 
                            [EditMode]="this.EditMode">
                        </mj-form-section>
                    </mj-tab-body>
               
                    <mj-tab Name="UI">
                        UI
                    </mj-tab>
                    <mj-tab-body>
                        <mj-form-section 
                            Entity="Entities" 
                            Section="ui" 
                            [record]="record" 
                            [EditMode]="this.EditMode">
                        </mj-form-section>
                    </mj-tab-body>
                    
                    <mj-tab Name="Audit Logs" [Visible]="record.IsSaved"> 
                        <span class="fa-solid fa-fingerprint tab-header-icon"></span>Audit Logs
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Audit Logs','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Audit Logs')"
                            [AllowLoad]="IsCurrentTab('Audit Logs')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Template Params" [Visible]="record.IsSaved"> 
                        Template Params
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Template Params','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Template Params')"
                            [AllowLoad]="IsCurrentTab('Template Params')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Dataset Items" [Visible]="record.IsSaved"> 
                        Dataset Items
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Dataset Items','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Dataset Items')"
                            [AllowLoad]="IsCurrentTab('Dataset Items')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Users" [Visible]="record.IsSaved"> 
                        <span class="fa-solid fa-user tab-header-icon"></span>Users
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Users','LinkedEntityID')"  
                            [NewRecordValues]="NewRecordValues('Users')"
                            [AllowLoad]="IsCurrentTab('Users')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Company Integration Record Maps" [Visible]="record.IsSaved"> 
                        Company Integration Record Maps
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Company Integration Record Maps','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Company Integration Record Maps')"
                            [AllowLoad]="IsCurrentTab('Company Integration Record Maps')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Entities" [Visible]="record.IsSaved"> 
                        <span class="fa-solid fa-database tab-header-icon"></span>Entities
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entities','ParentID')"  
                            [NewRecordValues]="NewRecordValues('Entities')"
                            [AllowLoad]="IsCurrentTab('Entities')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="User View Categories" [Visible]="record.IsSaved"> 
                        User View Categories
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('User View Categories','EntityID')"  
                            [NewRecordValues]="NewRecordValues('User View Categories')"
                            [AllowLoad]="IsCurrentTab('User View Categories')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="AI Actions" [Visible]="record.IsSaved"> 
                        AI Actions
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity AI Actions','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity AI Actions')"
                            [AllowLoad]="IsCurrentTab('AI Actions')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Entity Actions" [Visible]="record.IsSaved"> 
                        Entity Actions
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Actions','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Actions')"
                            [AllowLoad]="IsCurrentTab('Entity Actions')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Conversations" [Visible]="record.IsSaved"> 
                        <span class="fa-regular fa-comments tab-header-icon"></span>Conversations
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Conversations','LinkedEntityID')"  
                            [NewRecordValues]="NewRecordValues('Conversations')"
                            [AllowLoad]="IsCurrentTab('Conversations')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Duplicate Runs" [Visible]="record.IsSaved"> 
                        Duplicate Runs
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Duplicate Runs','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Duplicate Runs')"
                            [AllowLoad]="IsCurrentTab('Duplicate Runs')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Tagged Items" [Visible]="record.IsSaved"> 
                        Tagged Items
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Tagged Items','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Tagged Items')"
                            [AllowLoad]="IsCurrentTab('Tagged Items')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Record Merge Logs" [Visible]="record.IsSaved"> 
                        Record Merge Logs
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Record Merge Logs','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Record Merge Logs')"
                            [AllowLoad]="IsCurrentTab('Record Merge Logs')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="User Application Entities" [Visible]="record.IsSaved"> 
                        User Application Entities
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('User Application Entities','EntityID')"  
                            [NewRecordValues]="NewRecordValues('User Application Entities')"
                            [AllowLoad]="IsCurrentTab('User Application Entities')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Query Fields" [Visible]="record.IsSaved"> 
                        Query Fields
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Query Fields','SourceEntityID')"  
                            [NewRecordValues]="NewRecordValues('Query Fields')"
                            [AllowLoad]="IsCurrentTab('Query Fields')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="User Views" [Visible]="record.IsSaved"> 
                        <span class="fa-solid fa-table-cells tab-header-icon"></span>User Views
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('User Views','EntityID')"  
                            [NewRecordValues]="NewRecordValues('User Views')"
                            [AllowLoad]="IsCurrentTab('User Views')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Recommendation Items" [Visible]="record.IsSaved"> 
                        Recommendation Items
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Recommendation Items','DestinationEntityID')"  
                            [NewRecordValues]="NewRecordValues('Recommendation Items')"
                            [AllowLoad]="IsCurrentTab('Recommendation Items')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Permissions" [Visible]="record.IsSaved"> 
                        Permissions
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Permissions','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Permissions')"
                            [AllowLoad]="IsCurrentTab('Permissions')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Lists" [Visible]="record.IsSaved"> 
                        Lists
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Lists','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Lists')"
                            [AllowLoad]="IsCurrentTab('Lists')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="User Record Logs" [Visible]="record.IsSaved"> 
                        User Record Logs
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('User Record Logs','EntityID')"  
                            [NewRecordValues]="NewRecordValues('User Record Logs')"
                            [AllowLoad]="IsCurrentTab('User Record Logs')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Entity Documents" [Visible]="record.IsSaved"> 
                        Entity Documents
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Documents','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Documents')"
                            [AllowLoad]="IsCurrentTab('Entity Documents')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Recommendations" [Visible]="record.IsSaved"> 
                        <span class="fa-solid fa-circle-nodes tab-header-icon"></span>Recommendations
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Recommendations','SourceEntityID')"  
                            [NewRecordValues]="NewRecordValues('Recommendations')"
                            [AllowLoad]="IsCurrentTab('Recommendations')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="File Entity Record Links" [Visible]="record.IsSaved"> 
                        File Entity Record Links
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('File Entity Record Links','EntityID')"  
                            [NewRecordValues]="NewRecordValues('File Entity Record Links')"
                            [AllowLoad]="IsCurrentTab('File Entity Record Links')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Entity Settings" [Visible]="record.IsSaved"> 
                        Entity Settings
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Settings','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Settings')"
                            [AllowLoad]="IsCurrentTab('Entity Settings')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Relationships" [Visible]="record.IsSaved"> 
                        Relationships
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Relationships','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Relationships')"
                            [AllowLoad]="IsCurrentTab('Relationships')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Company Integration Run Details" [Visible]="record.IsSaved"> 
                        Company Integration Run Details
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Company Integration Run Details','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Company Integration Run Details')"
                            [AllowLoad]="IsCurrentTab('Company Integration Run Details')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Data Context Items" [Visible]="record.IsSaved"> 
                        Data Context Items
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Data Context Items','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Data Context Items')"
                            [AllowLoad]="IsCurrentTab('Data Context Items')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Integration URL Formats" [Visible]="record.IsSaved"> 
                        Integration URL Formats
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Integration URL Formats','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Integration URL Formats')"
                            [AllowLoad]="IsCurrentTab('Integration URL Formats')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Fields" [Visible]="record.IsSaved"> 
                        Fields
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Fields','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Fields')"
                            [AllowLoad]="IsCurrentTab('Fields')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="User Favorites" [Visible]="record.IsSaved"> 
                        User Favorites
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('User Favorites','EntityID')"  
                            [NewRecordValues]="NewRecordValues('User Favorites')"
                            [AllowLoad]="IsCurrentTab('User Favorites')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Entity Communication Message Types" [Visible]="record.IsSaved"> 
                        Entity Communication Message Types
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Communication Message Types','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Communication Message Types')"
                            [AllowLoad]="IsCurrentTab('Entity Communication Message Types')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Entity Record Documents" [Visible]="record.IsSaved"> 
                        Entity Record Documents
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Entity Record Documents','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Entity Record Documents')"
                            [AllowLoad]="IsCurrentTab('Entity Record Documents')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Record Changes" [Visible]="record.IsSaved"> 
                        Record Changes
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Record Changes','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Record Changes')"
                            [AllowLoad]="IsCurrentTab('Record Changes')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Application Entities" [Visible]="record.IsSaved"> 
                        Application Entities
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Application Entities','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Application Entities')"
                            [AllowLoad]="IsCurrentTab('Application Entities')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>

                    <mj-tab Name="Resource Types" [Visible]="record.IsSaved"> 
                        Resource Types
                    </mj-tab>
                    <mj-tab-body>
                        <mj-user-view-grid 
                            [Params]="BuildRelationshipViewParamsByEntityName('Resource Types','EntityID')"  
                            [NewRecordValues]="NewRecordValues('Resource Types')"
                            [AllowLoad]="IsCurrentTab('Resource Types')"  
                            [EditMode]="GridEditMode()"  
                            [BottomMargin]="GridBottomMargin">
                        </mj-user-view-grid>                    
                    </mj-tab-body>
                </mj-tabstrip>
            </kendo-splitter-pane>
        </kendo-splitter>
    </form>
</div>
        