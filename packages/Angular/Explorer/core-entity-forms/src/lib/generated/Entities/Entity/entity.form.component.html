<mj-record-form-container [record]="record" [formComponent]="this">

    <!-- ========================================
         FIELD PANELS
         ======================================== -->
    <!-- Identity & Structure Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="identityStructure"
        sectionName="Identity & Structure"
        icon="fa fa-cube"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Name"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="NameSuffix"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="BaseTable"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="BaseView"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="BaseViewGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="SchemaName"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="VirtualEntity"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DisplayName"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CodeName"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ClassName"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="BaseTableCodeName"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentEntity"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentBaseTable"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ParentBaseView"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- User Interface & Customization Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="userInterfaceCustomization"
        sectionName="User Interface & Customization"
        icon="fa fa-paint-brush"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Description"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RelationshipDefaultDisplayType"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="UserFormGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EntityObjectSubclassName"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="EntityObjectSubclassImport"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Auditing & Lifecycle Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="auditingLifecycle"
        sectionName="Auditing & Lifecycle"
        icon="fa fa-history"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AutoUpdateDescription"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="TrackRecordChanges"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AuditRecordAccess"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AuditViewRuns"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PreferredCommunicationField"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Icon"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Status"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- API & Search Settings Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="aPISearchSettings"
        sectionName="API & Search Settings"
        icon="fa fa-search"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="IncludeInAPI"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowAllRowsAPI"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowUpdateAPI"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowCreateAPI"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowDeleteAPI"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CustomResolverAPI"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowUserSearchAPI"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextSearchEnabled"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextCatalog"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextCatalogGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextIndex"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextIndexGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextSearchFunction"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="FullTextSearchFunctionGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="UserViewMaxRows"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ScopeDefault"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackWithSchema"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackSampleMethod"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackSampleCount"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowsToPackSampleOrder"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Procedures & Deletion Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="proceduresDeletion"
        sectionName="Procedures & Deletion"
        icon="fa fa-code"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spCreate"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spUpdate"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spDelete"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spCreateGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spUpdateGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spDeleteGenerated"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CascadeDeletes"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DeleteType"
            Type="dropdownlist"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AllowRecordMerge"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="spMatch"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Row Statistics Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="rowStatistics"
        sectionName="Row Statistics"
        icon="fa fa-chart-bar"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AutoRowCountFrequency"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowCount"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="RowCountRunAt"
            Type="datepicker"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- System Metadata Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="systemMetadata"
        sectionName="System Metadata"
        icon="fa fa-cog"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_CreatedAt"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_UpdatedAt"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>
    <!-- ========================================
         RELATED ENTITY PANELS - AFTER
         ======================================== -->

    <!-- Application Entities Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="applicationEntities"
        sectionName="Application Entities"
        icon="fa fa-cubes"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('applicationEntities')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Application Entities','EntityID')"
                [NewRecordValues]="NewRecordValues('Application Entities')"
                [AllowLoad]="IsSectionExpanded('applicationEntities')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('applicationEntities', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Audit Logs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="auditLogs"
        sectionName="Audit Logs"
        icon="fa-solid fa-fingerprint"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('auditLogs')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Audit Logs','EntityID')"
                [NewRecordValues]="NewRecordValues('Audit Logs')"
                [AllowLoad]="IsSectionExpanded('auditLogs')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('auditLogs', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Company Integration Record Maps Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="companyIntegrationRecordMaps"
        sectionName="Company Integration Record Maps"
        icon="fa fa-sync"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('companyIntegrationRecordMaps')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Company Integration Record Maps','EntityID')"
                [NewRecordValues]="NewRecordValues('Company Integration Record Maps')"
                [AllowLoad]="IsSectionExpanded('companyIntegrationRecordMaps')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('companyIntegrationRecordMaps', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Company Integration Run Details Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="companyIntegrationRunDetails"
        sectionName="Company Integration Run Details"
        icon="fa fa-sync"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('companyIntegrationRunDetails')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Company Integration Run Details','EntityID')"
                [NewRecordValues]="NewRecordValues('Company Integration Run Details')"
                [AllowLoad]="IsSectionExpanded('companyIntegrationRunDetails')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('companyIntegrationRunDetails', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Conversations Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="conversations"
        sectionName="Conversations"
        icon="fa-regular fa-comments"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('conversations')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Conversations','LinkedEntityID')"
                [NewRecordValues]="NewRecordValues('Conversations')"
                [AllowLoad]="IsSectionExpanded('conversations')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('conversations', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Data Context Items Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="dataContextItems"
        sectionName="Data Context Items"
        icon="fa fa-database"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('dataContextItems')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Data Context Items','EntityID')"
                [NewRecordValues]="NewRecordValues('Data Context Items')"
                [AllowLoad]="IsSectionExpanded('dataContextItems')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('dataContextItems', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Dataset Items Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="datasetItems"
        sectionName="Dataset Items"
        icon="fa fa-database"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('datasetItems')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Dataset Items','EntityID')"
                [NewRecordValues]="NewRecordValues('Dataset Items')"
                [AllowLoad]="IsSectionExpanded('datasetItems')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('datasetItems', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Duplicate Runs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="duplicateRuns"
        sectionName="Duplicate Runs"
        icon="fa fa-search"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('duplicateRuns')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Duplicate Runs','EntityID')"
                [NewRecordValues]="NewRecordValues('Duplicate Runs')"
                [AllowLoad]="IsSectionExpanded('duplicateRuns')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('duplicateRuns', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Entities Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entities"
        sectionName="Entities"
        icon="fa-solid fa-database"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entities')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entities','ParentID')"
                [NewRecordValues]="NewRecordValues('Entities')"
                [AllowLoad]="IsSectionExpanded('entities')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('entities', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Entity Actions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entityActions"
        sectionName="Entity Actions"
        icon="fa fa-project-diagram"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entityActions')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Actions','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Actions')"
                [AllowLoad]="IsSectionExpanded('entityActions')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('entityActions', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- AI Actions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIActions"
        sectionName="AI Actions"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIActions')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity AI Actions','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity AI Actions')"
                [AllowLoad]="IsSectionExpanded('aIActions')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIActions', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Entity Communication Message Types Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entityCommunicationMessageTypes"
        sectionName="Entity Communication Message Types"
        icon="fa fa-comment-dots"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entityCommunicationMessageTypes')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Communication Message Types','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Communication Message Types')"
                [AllowLoad]="IsSectionExpanded('entityCommunicationMessageTypes')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('entityCommunicationMessageTypes', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Entity Documents Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entityDocuments"
        sectionName="Entity Documents"
        icon="fa fa-file-alt"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entityDocuments')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Documents','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Documents')"
                [AllowLoad]="IsSectionExpanded('entityDocuments')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('entityDocuments', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Fields Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="fields"
        sectionName="Fields"
        icon="fa fa-table"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('fields')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Fields','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Fields')"
                [AllowLoad]="IsSectionExpanded('fields')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('fields', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Permissions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="permissions"
        sectionName="Permissions"
        icon="fa fa-shield-alt"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('permissions')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Permissions','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Permissions')"
                [AllowLoad]="IsSectionExpanded('permissions')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('permissions', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Entity Record Documents Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entityRecordDocuments"
        sectionName="Entity Record Documents"
        icon="fa fa-file-alt"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entityRecordDocuments')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Record Documents','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Record Documents')"
                [AllowLoad]="IsSectionExpanded('entityRecordDocuments')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('entityRecordDocuments', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Relationships Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="relationships"
        sectionName="Relationships"
        icon="fa fa-project-diagram"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('relationships')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Relationships','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Relationships')"
                [AllowLoad]="IsSectionExpanded('relationships')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('relationships', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Entity Settings Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entitySettings"
        sectionName="Entity Settings"
        icon="fa fa-cog"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entitySettings')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Settings','EntityID')"
                [NewRecordValues]="NewRecordValues('Entity Settings')"
                [AllowLoad]="IsSectionExpanded('entitySettings')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('entitySettings', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- File Entity Record Links Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="fileEntityRecordLinks"
        sectionName="File Entity Record Links"
        icon="fa fa-link"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('fileEntityRecordLinks')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('File Entity Record Links','EntityID')"
                [NewRecordValues]="NewRecordValues('File Entity Record Links')"
                [AllowLoad]="IsSectionExpanded('fileEntityRecordLinks')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('fileEntityRecordLinks', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Integration URL Formats Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="integrationURLFormats"
        sectionName="Integration URL Formats"
        icon="fa fa-link"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('integrationURLFormats')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Integration URL Formats','EntityID')"
                [NewRecordValues]="NewRecordValues('Integration URL Formats')"
                [AllowLoad]="IsSectionExpanded('integrationURLFormats')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('integrationURLFormats', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Lists Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="lists"
        sectionName="Lists"
        icon="fa fa-list-ul"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('lists')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Lists','EntityID')"
                [NewRecordValues]="NewRecordValues('Lists')"
                [AllowLoad]="IsSectionExpanded('lists')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('lists', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Query Fields Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="queryFields"
        sectionName="Query Fields"
        icon="fa fa-table"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('queryFields')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Query Fields','SourceEntityID')"
                [NewRecordValues]="NewRecordValues('Query Fields')"
                [AllowLoad]="IsSectionExpanded('queryFields')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('queryFields', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Recommendation Items Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="recommendationItems"
        sectionName="Recommendation Items"
        icon="fa fa-lightbulb"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('recommendationItems')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Recommendation Items','DestinationEntityID')"
                [NewRecordValues]="NewRecordValues('Recommendation Items')"
                [AllowLoad]="IsSectionExpanded('recommendationItems')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('recommendationItems', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Recommendations Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="recommendations"
        sectionName="Recommendations"
        icon="fa-solid fa-circle-nodes"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('recommendations')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Recommendations','SourceEntityID')"
                [NewRecordValues]="NewRecordValues('Recommendations')"
                [AllowLoad]="IsSectionExpanded('recommendations')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('recommendations', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Record Changes Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="recordChanges"
        sectionName="Record Changes"
        icon="fa fa-history"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('recordChanges')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Record Changes','EntityID')"
                [NewRecordValues]="NewRecordValues('Record Changes')"
                [AllowLoad]="IsSectionExpanded('recordChanges')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('recordChanges', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Record Merge Logs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="recordMergeLogs"
        sectionName="Record Merge Logs"
        icon="fa fa-clone"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('recordMergeLogs')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Record Merge Logs','EntityID')"
                [NewRecordValues]="NewRecordValues('Record Merge Logs')"
                [AllowLoad]="IsSectionExpanded('recordMergeLogs')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('recordMergeLogs', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Resource Types Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="resourceTypes"
        sectionName="Resource Types"
        icon="fa fa-layer-group"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('resourceTypes')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Resource Types','EntityID')"
                [NewRecordValues]="NewRecordValues('Resource Types')"
                [AllowLoad]="IsSectionExpanded('resourceTypes')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('resourceTypes', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Tagged Items Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="taggedItems"
        sectionName="Tagged Items"
        icon="fa fa-tags"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('taggedItems')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Tagged Items','EntityID')"
                [NewRecordValues]="NewRecordValues('Tagged Items')"
                [AllowLoad]="IsSectionExpanded('taggedItems')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('taggedItems', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Template Params Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="templateParams"
        sectionName="Template Params"
        icon="fa fa-cog"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('templateParams')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Template Params','EntityID')"
                [NewRecordValues]="NewRecordValues('Template Params')"
                [AllowLoad]="IsSectionExpanded('templateParams')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('templateParams', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- User Application Entities Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="userApplicationEntities"
        sectionName="User Application Entities"
        icon="fa fa-link"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('userApplicationEntities')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('User Application Entities','EntityID')"
                [NewRecordValues]="NewRecordValues('User Application Entities')"
                [AllowLoad]="IsSectionExpanded('userApplicationEntities')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('userApplicationEntities', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- User Favorites Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="userFavorites"
        sectionName="User Favorites"
        icon="fa fa-star"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('userFavorites')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('User Favorites','EntityID')"
                [NewRecordValues]="NewRecordValues('User Favorites')"
                [AllowLoad]="IsSectionExpanded('userFavorites')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('userFavorites', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- User Record Logs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="userRecordLogs"
        sectionName="User Record Logs"
        icon="fa fa-history"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('userRecordLogs')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('User Record Logs','EntityID')"
                [NewRecordValues]="NewRecordValues('User Record Logs')"
                [AllowLoad]="IsSectionExpanded('userRecordLogs')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('userRecordLogs', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- User View Categories Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="userViewCategories"
        sectionName="User View Categories"
        icon="fa fa-folder-open"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('userViewCategories')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('User View Categories','EntityID')"
                [NewRecordValues]="NewRecordValues('User View Categories')"
                [AllowLoad]="IsSectionExpanded('userViewCategories')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('userViewCategories', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- User Views Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="userViews"
        sectionName="User Views"
        icon="fa-solid fa-table-cells"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('userViews')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('User Views','EntityID')"
                [NewRecordValues]="NewRecordValues('User Views')"
                [AllowLoad]="IsSectionExpanded('userViews')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('userViews', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Users Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="users"
        sectionName="Users"
        icon="fa-solid fa-user"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('users')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Users','LinkedEntityID')"
                [NewRecordValues]="NewRecordValues('Users')"
                [AllowLoad]="IsSectionExpanded('users')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('users', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- AI Agent Notes Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentNotes"
        sectionName="AI Agent Notes"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentNotes')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Notes','PrimaryScopeEntityID')"
                [NewRecordValues]="NewRecordValues('AI Agent Notes')"
                [AllowLoad]="IsSectionExpanded('aIAgentNotes')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('aIAgentNotes', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: Access Control Rules Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAccessControlRules"
        sectionName="MJ: Access Control Rules"
        icon="fa fa-lock"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAccessControlRules')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: Access Control Rules','EntityID')"
                [NewRecordValues]="NewRecordValues('MJ: Access Control Rules')"
                [AllowLoad]="IsSectionExpanded('mJAccessControlRules')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAccessControlRules', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Examples Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentExamples"
        sectionName="MJ: AI Agent Examples"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentExamples')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Examples','PrimaryScopeEntityID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Examples')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentExamples')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentExamples', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: Record Links Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJRecordLinks"
        sectionName="MJ: Record Links"
        icon="fa fa-project-diagram"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJRecordLinks')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: Record Links','SourceEntityID')"
                [NewRecordValues]="NewRecordValues('MJ: Record Links')"
                [AllowLoad]="IsSectionExpanded('mJRecordLinks')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJRecordLinks', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: Version Label Items Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJVersionLabelItems"
        sectionName="MJ: Version Label Items"
        icon="fa fa-history"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJVersionLabelItems')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: Version Label Items','EntityID')"
                [NewRecordValues]="NewRecordValues('MJ: Version Label Items')"
                [AllowLoad]="IsSectionExpanded('mJVersionLabelItems')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJVersionLabelItems', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: Version Labels Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJVersionLabels"
        sectionName="MJ: Version Labels"
        icon="fa fa-tag"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJVersionLabels')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: Version Labels','EntityID')"
                [NewRecordValues]="NewRecordValues('MJ: Version Labels')"
                [AllowLoad]="IsSectionExpanded('mJVersionLabels')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJVersionLabels', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Query Entities Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="queryEntities"
        sectionName="Query Entities"
        icon="fa fa-search"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('queryEntities')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Query Entities','EntityID')"
                [NewRecordValues]="NewRecordValues('Query Entities')"
                [AllowLoad]="IsSectionExpanded('queryEntities')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('queryEntities', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- Generated Codes Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="generatedCodes"
        sectionName="Generated Codes"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('generatedCodes')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Generated Codes','LinkedEntityID')"
                [NewRecordValues]="NewRecordValues('Generated Codes')"
                [AllowLoad]="IsSectionExpanded('generatedCodes')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('generatedCodes', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: Record Links Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJRecordLinks"
        sectionName="MJ: Record Links"
        icon="fa fa-project-diagram"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJRecordLinks')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: Record Links','TargetEntityID')"
                [NewRecordValues]="NewRecordValues('MJ: Record Links')"
                [AllowLoad]="IsSectionExpanded('mJRecordLinks')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJRecordLinks', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Runs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentRuns"
        sectionName="MJ: AI Agent Runs"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentRuns')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Runs','PrimaryScopeEntityID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Runs')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentRuns')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJAIAgentRuns', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>

    <!-- MJ: Test Runs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJTestRuns"
        sectionName="MJ: Test Runs"
        icon="fa fa-flask"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJTestRuns')"
        [defaultExpanded]="false">
        @if (record.IsSaved) {
        <div>
            <mj-explorer-entity-data-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: Test Runs','TargetLogEntityID')"
                [NewRecordValues]="NewRecordValues('MJ: Test Runs')"
                [AllowLoad]="IsSectionExpanded('mJTestRuns')"
                [ShowToolbar]="false"
                (AfterDataLoad)="SetSectionRowCount('mJTestRuns', $event.totalRowCount)"
                >
            </mj-explorer-entity-data-grid>
        </div>
        }
    </mj-collapsible-panel>
</mj-record-form-container>
        