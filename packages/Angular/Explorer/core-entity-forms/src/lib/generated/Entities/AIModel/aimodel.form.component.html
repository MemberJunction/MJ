<mj-record-form-container [record]="record" [formComponent]="this">

    <!-- ========================================
         FIELD PANELS
         ======================================== -->
    <!-- Model Overview Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="modelOverview"
        sectionName="Model Overview"
        icon="fa fa-info-circle"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Name"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Description"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AIModelTypeID"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="IsActive"
            Type="checkbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ModelSelectionInsights"
            Type="textarea"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AIModelType"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Vendor"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Performance Metrics Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="performanceMetrics"
        sectionName="Performance Metrics"
        icon="fa fa-tachometer-alt"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PowerRank"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="SpeedRank"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CostRank"
            Type="numerictextbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- Technical Specifications Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="technicalSpecifications"
        sectionName="Technical Specifications"
        icon="fa fa-cog"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DriverClass"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DriverImportPath"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="APIName"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="InputTokenLimit"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="SupportedResponseFormats"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="SupportsEffortLevel"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>

    <!-- System Metadata Section -->
    <mj-collapsible-panel slot="field-panels"
        sectionKey="systemMetadata"
        sectionName="System Metadata"
        icon="fa fa-database"
        [form]="this"
        [formContext]="formContext">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_CreatedAt"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_UpdatedAt"
            Type="textbox"
            [EditMode]="EditMode"
            [formContext]="formContext"
        ></mj-form-field>

    </mj-collapsible-panel>
    <!-- ========================================
         RELATED ENTITY PANELS - AFTER
         ======================================== -->

    <!-- AI Actions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIActions"
        sectionName="AI Actions"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIActions')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Actions','DefaultModelID')"
                [NewRecordValues]="NewRecordValues('AI Actions')"
                [AllowLoad]="IsSectionExpanded('aIActions')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('aIActions', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AI Model Actions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIModelActions"
        sectionName="AI Model Actions"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIModelActions')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Model Actions','AIModelID')"
                [NewRecordValues]="NewRecordValues('AI Model Actions')"
                [AllowLoad]="IsSectionExpanded('aIModelActions')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('aIModelActions', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- Entity Documents Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entityDocuments"
        sectionName="Entity Documents"
        icon="fa fa-file-alt"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entityDocuments')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity Documents','AIModelID')"
                [NewRecordValues]="NewRecordValues('Entity Documents')"
                [AllowLoad]="IsSectionExpanded('entityDocuments')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('entityDocuments', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- Vector Indexes Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="vectorIndexes"
        sectionName="Vector Indexes"
        icon="fa fa-database"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('vectorIndexes')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Vector Indexes','EmbeddingModelID')"
                [NewRecordValues]="NewRecordValues('Vector Indexes')"
                [AllowLoad]="IsSectionExpanded('vectorIndexes')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('vectorIndexes', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AI Agent Notes Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentNotes"
        sectionName="AI Agent Notes"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentNotes')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Notes','EmbeddingModelID')"
                [NewRecordValues]="NewRecordValues('AI Agent Notes')"
                [AllowLoad]="IsSectionExpanded('aIAgentNotes')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('aIAgentNotes', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AI Result Cache Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIResultCache"
        sectionName="AI Result Cache"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIResultCache')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Result Cache','AIModelID')"
                [NewRecordValues]="NewRecordValues('AI Result Cache')"
                [AllowLoad]="IsSectionExpanded('aIResultCache')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('aIResultCache', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- Content Types Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="contentTypes"
        sectionName="Content Types"
        icon="fa fa-folder"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('contentTypes')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Content Types','AIModelID')"
                [NewRecordValues]="NewRecordValues('Content Types')"
                [AllowLoad]="IsSectionExpanded('contentTypes')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('contentTypes', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- Entity AI Actions Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="entityAIActions"
        sectionName="Entity AI Actions"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('entityAIActions')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Entity AI Actions','AIModelID')"
                [NewRecordValues]="NewRecordValues('Entity AI Actions')"
                [AllowLoad]="IsSectionExpanded('entityAIActions')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('entityAIActions', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Examples Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentExamples"
        sectionName="MJ: AI Agent Examples"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentExamples')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Examples','EmbeddingModelID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Examples')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentExamples')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('mJAIAgentExamples', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- AIAgent Models Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="aIAgentModels"
        sectionName="AIAgent Models"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('aIAgentModels')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Models','ModelID')"
                [NewRecordValues]="NewRecordValues('AI Agent Models')"
                [AllowLoad]="IsSectionExpanded('aIAgentModels')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('aIAgentModels', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Model Vendors Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIModelVendors"
        sectionName="MJ: AI Model Vendors"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIModelVendors')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Model Vendors','ModelID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Model Vendors')"
                [AllowLoad]="IsSectionExpanded('mJAIModelVendors')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('mJAIModelVendors', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- Generated Codes Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="generatedCodes"
        sectionName="Generated Codes"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('generatedCodes')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Generated Codes','GeneratedByModelID')"
                [NewRecordValues]="NewRecordValues('Generated Codes')"
                [AllowLoad]="IsSectionExpanded('generatedCodes')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('generatedCodes', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Model Costs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIModelCosts"
        sectionName="MJ: AI Model Costs"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIModelCosts')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Model Costs','ModelID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Model Costs')"
                [AllowLoad]="IsSectionExpanded('mJAIModelCosts')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('mJAIModelCosts', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Prompt Models Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIPromptModels"
        sectionName="MJ: AI Prompt Models"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIPromptModels')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Prompt Models','ModelID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Prompt Models')"
                [AllowLoad]="IsSectionExpanded('mJAIPromptModels')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('mJAIPromptModels', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Prompt Runs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIPromptRuns"
        sectionName="MJ: AI Prompt Runs"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIPromptRuns')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Prompt Runs','ModelID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Prompt Runs')"
                [AllowLoad]="IsSectionExpanded('mJAIPromptRuns')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('mJAIPromptRuns', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- MJ: AI Agent Runs Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="mJAIAgentRuns"
        sectionName="MJ: AI Agent Runs"
        icon="fa fa-robot"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('mJAIAgentRuns')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Runs','OverrideModelID')"
                [NewRecordValues]="NewRecordValues('MJ: AI Agent Runs')"
                [AllowLoad]="IsSectionExpanded('mJAIAgentRuns')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('mJAIAgentRuns', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>

    <!-- Queries Section -->
    <mj-collapsible-panel slot="after-panels"
        sectionKey="queries"
        sectionName="Queries"
        icon="fa-solid fa-clipboard-question"
        variant="related-entity"
        [form]="this"
        [formContext]="formContext"
        [badgeCount]="GetSectionRowCount('queries')">
        <div *ngIf="record.IsSaved">
            <mj-user-view-grid
                [Params]="BuildRelationshipViewParamsByEntityName('Queries','EmbeddingModelID')"
                [NewRecordValues]="NewRecordValues('Queries')"
                [AllowLoad]="IsSectionExpanded('queries')"
                [EditMode]="GridEditMode()"
                (dataLoaded)="SetSectionRowCount('queries', $event.totalRowCount)"
                >
            </mj-user-view-grid>
        </div>
    </mj-collapsible-panel>
</mj-record-form-container>
        