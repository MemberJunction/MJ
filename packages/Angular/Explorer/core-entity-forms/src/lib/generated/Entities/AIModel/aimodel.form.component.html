<div class="record-form-container">
    <form *ngIf="record" class="record-form" #form="ngForm">
        <mj-form-toolbar [form]="this"></mj-form-toolbar>

        <div class="form-section-controls">
            <div class="control-group">
                <button (click)="expandAllSections()" title="Expand all sections">
                    <i class="fa fa-expand-alt"></i>Expand All
                </button>
                <button (click)="collapseAllSections()" title="Collapse all sections">
                    <i class="fa fa-compress-alt"></i>Collapse All
                </button>
            </div>
            <input type="text"
                   class="section-search"
                   placeholder="Search sections..."
                   (input)="filterSections($event)"
                   #sectionSearch>
            <span class="section-count">
                <span class="section-count-badge">{{getExpandedCount()}}</span> of 18 expanded
            </span>
        </div>
        <div class="form-panels-container">
<!-- Details Section -->
        <div class="form-card collapsible-card" data-section-name="details" data-field-names="name description aimodeltypeid ai model type id powerrank power rank isactive is active __mj_createdat created at __mj_updatedat updated at speedrank speed rank costrank cost rank modelselectioninsights model selection insights aimodeltype aimodel type vendor driverclass driver class driverimportpath driver import path apiname inputtokenlimit input token limit supportedresponseformats supported response formats supportseffortlevel supports effort level">
            <div class="collapsible-header" (click)="toggleSection('details')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-align-left"></i>
                    <h3><span class="section-name">Details</span></h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.details ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.details">
                <div class="form-body">
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Name"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Description"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AIModelTypeID"
            Type="textbox"
            [EditMode]="EditMode"
            LinkType="Record"
            LinkComponentType="Search"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="PowerRank"
            Type="numerictextbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="IsActive"
            Type="checkbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_CreatedAt"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="__mj_UpdatedAt"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="SpeedRank"
            Type="numerictextbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="CostRank"
            Type="numerictextbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="ModelSelectionInsights"
            Type="textarea"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="AIModelType"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="Vendor"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DriverClass"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="DriverImportPath"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="APIName"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="InputTokenLimit"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="SupportedResponseFormats"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>
        <mj-form-field 
            [record]="record"
            [ShowLabel]="true"
            FieldName="SupportsEffortLevel"
            Type="textbox"
            [EditMode]="EditMode"
        ></mj-form-field>

                </div>
            </div>
        </div>
        <div class="related-entity-grid">

        <!-- AI Actions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai actions" data-field-names="ai actions" data-section-key="aIActions">
            <div class="collapsible-header" (click)="toggleSection('aIActions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">AI Actions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIActions']">{{sectionRowCounts['aIActions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIActions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIActions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Actions','DefaultModelID')"
                        [NewRecordValues]="NewRecordValues('AI Actions')"
                        [AllowLoad]="IsCurrentSection('aIActions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIActions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Model Actions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai model actions" data-field-names="ai model actions" data-section-key="aIModelActions">
            <div class="collapsible-header" (click)="toggleSection('aIModelActions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">AI Model Actions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIModelActions']">{{sectionRowCounts['aIModelActions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIModelActions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIModelActions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Model Actions','AIModelID')"
                        [NewRecordValues]="NewRecordValues('AI Model Actions')"
                        [AllowLoad]="IsCurrentSection('aIModelActions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIModelActions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entity Documents Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entity documents" data-field-names="entity documents" data-section-key="entityDocuments">
            <div class="collapsible-header" (click)="toggleSection('entityDocuments')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">Entity Documents</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['entityDocuments']">{{sectionRowCounts['entityDocuments']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entityDocuments ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entityDocuments" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity Documents','AIModelID')"
                        [NewRecordValues]="NewRecordValues('Entity Documents')"
                        [AllowLoad]="IsCurrentSection('entityDocuments')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['entityDocuments'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Vector Indexes Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="vector indexes" data-field-names="vector indexes" data-section-key="vectorIndexes">
            <div class="collapsible-header" (click)="toggleSection('vectorIndexes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">Vector Indexes</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['vectorIndexes']">{{sectionRowCounts['vectorIndexes']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.vectorIndexes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.vectorIndexes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Vector Indexes','EmbeddingModelID')"
                        [NewRecordValues]="NewRecordValues('Vector Indexes')"
                        [AllowLoad]="IsCurrentSection('vectorIndexes')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['vectorIndexes'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Agent Notes Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai agent notes" data-field-names="ai agent notes" data-section-key="aIAgentNotes">
            <div class="collapsible-header" (click)="toggleSection('aIAgentNotes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">AI Agent Notes</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIAgentNotes']">{{sectionRowCounts['aIAgentNotes']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIAgentNotes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIAgentNotes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Notes','EmbeddingModelID')"
                        [NewRecordValues]="NewRecordValues('AI Agent Notes')"
                        [AllowLoad]="IsCurrentSection('aIAgentNotes')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIAgentNotes'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AI Result Cache Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="ai result cache" data-field-names="ai result cache" data-section-key="aIResultCache">
            <div class="collapsible-header" (click)="toggleSection('aIResultCache')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">AI Result Cache</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIResultCache']">{{sectionRowCounts['aIResultCache']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIResultCache ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIResultCache" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Result Cache','AIModelID')"
                        [NewRecordValues]="NewRecordValues('AI Result Cache')"
                        [AllowLoad]="IsCurrentSection('aIResultCache')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIResultCache'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Content Types Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="content types" data-field-names="content types" data-section-key="contentTypes">
            <div class="collapsible-header" (click)="toggleSection('contentTypes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">Content Types</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['contentTypes']">{{sectionRowCounts['contentTypes']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.contentTypes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.contentTypes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Content Types','AIModelID')"
                        [NewRecordValues]="NewRecordValues('Content Types')"
                        [AllowLoad]="IsCurrentSection('contentTypes')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['contentTypes'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Entity AI Actions Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="entity ai actions" data-field-names="entity ai actions" data-section-key="entityAIActions">
            <div class="collapsible-header" (click)="toggleSection('entityAIActions')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">Entity AI Actions</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['entityAIActions']">{{sectionRowCounts['entityAIActions']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.entityAIActions ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.entityAIActions" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Entity AI Actions','AIModelID')"
                        [NewRecordValues]="NewRecordValues('Entity AI Actions')"
                        [AllowLoad]="IsCurrentSection('entityAIActions')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['entityAIActions'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Agent Examples Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai agent examples" data-field-names="mj: ai agent examples" data-section-key="mJAIAgentExamples">
            <div class="collapsible-header" (click)="toggleSection('mJAIAgentExamples')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">MJ: AI Agent Examples</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIAgentExamples']">{{sectionRowCounts['mJAIAgentExamples']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIAgentExamples ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIAgentExamples" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Examples','EmbeddingModelID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Agent Examples')"
                        [AllowLoad]="IsCurrentSection('mJAIAgentExamples')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIAgentExamples'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- AIAgent Models Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="aiagent models" data-field-names="ai agent models" data-section-key="aIAgentModels">
            <div class="collapsible-header" (click)="toggleSection('aIAgentModels')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">AIAgent Models</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['aIAgentModels']">{{sectionRowCounts['aIAgentModels']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.aIAgentModels ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.aIAgentModels" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('AI Agent Models','ModelID')"
                        [NewRecordValues]="NewRecordValues('AI Agent Models')"
                        [AllowLoad]="IsCurrentSection('aIAgentModels')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['aIAgentModels'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Model Vendors Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai model vendors" data-field-names="mj: ai model vendors" data-section-key="mJAIModelVendors">
            <div class="collapsible-header" (click)="toggleSection('mJAIModelVendors')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">MJ: AI Model Vendors</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIModelVendors']">{{sectionRowCounts['mJAIModelVendors']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIModelVendors ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIModelVendors" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Model Vendors','ModelID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Model Vendors')"
                        [AllowLoad]="IsCurrentSection('mJAIModelVendors')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIModelVendors'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Generated Codes Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="generated codes" data-field-names="generated codes" data-section-key="generatedCodes">
            <div class="collapsible-header" (click)="toggleSection('generatedCodes')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">Generated Codes</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['generatedCodes']">{{sectionRowCounts['generatedCodes']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.generatedCodes ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.generatedCodes" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Generated Codes','GeneratedByModelID')"
                        [NewRecordValues]="NewRecordValues('Generated Codes')"
                        [AllowLoad]="IsCurrentSection('generatedCodes')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['generatedCodes'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Model Costs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai model costs" data-field-names="mj: ai model costs" data-section-key="mJAIModelCosts">
            <div class="collapsible-header" (click)="toggleSection('mJAIModelCosts')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">MJ: AI Model Costs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIModelCosts']">{{sectionRowCounts['mJAIModelCosts']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIModelCosts ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIModelCosts" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Model Costs','ModelID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Model Costs')"
                        [AllowLoad]="IsCurrentSection('mJAIModelCosts')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIModelCosts'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Prompt Models Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai prompt models" data-field-names="mj: ai prompt models" data-section-key="mJAIPromptModels">
            <div class="collapsible-header" (click)="toggleSection('mJAIPromptModels')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">MJ: AI Prompt Models</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIPromptModels']">{{sectionRowCounts['mJAIPromptModels']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIPromptModels ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIPromptModels" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Prompt Models','ModelID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Prompt Models')"
                        [AllowLoad]="IsCurrentSection('mJAIPromptModels')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIPromptModels'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Prompt Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai prompt runs" data-field-names="mj: ai prompt runs" data-section-key="mJAIPromptRuns">
            <div class="collapsible-header" (click)="toggleSection('mJAIPromptRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">MJ: AI Prompt Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIPromptRuns']">{{sectionRowCounts['mJAIPromptRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIPromptRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIPromptRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Prompt Runs','ModelID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Prompt Runs')"
                        [AllowLoad]="IsCurrentSection('mJAIPromptRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIPromptRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- MJ: AI Agent Runs Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="mj: ai agent runs" data-field-names="mj: ai agent runs" data-section-key="mJAIAgentRuns">
            <div class="collapsible-header" (click)="toggleSection('mJAIAgentRuns')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa fa-table"></i>
                    <h3>
                        <span class="section-name">MJ: AI Agent Runs</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['mJAIAgentRuns']">{{sectionRowCounts['mJAIAgentRuns']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.mJAIAgentRuns ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.mJAIAgentRuns" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('MJ: AI Agent Runs','OverrideModelID')"
                        [NewRecordValues]="NewRecordValues('MJ: AI Agent Runs')"
                        [AllowLoad]="IsCurrentSection('mJAIAgentRuns')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['mJAIAgentRuns'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>

        <!-- Queries Section -->
        <div class="form-card collapsible-card related-entity" data-section-name="queries" data-field-names="queries" data-section-key="queries">
            <div class="collapsible-header" (click)="toggleSection('queries')" role="button" tabindex="0">
                <div class="collapsible-title">
                    <i class="fa-solid fa-clipboard-question"></i>
                    <h3>
                        <span class="section-name">Queries</span>
                        <span class="row-count-badge" *ngIf="sectionRowCounts?.['queries']">{{sectionRowCounts['queries']}}</span>
                    </h3>
                </div>
                <div class="collapse-icon">
                    <i [class]="sectionsExpanded.queries ? 'fa fa-chevron-up' : 'fa fa-chevron-down'"></i>
                </div>
            </div>
            <div class="collapsible-body" [class.collapsed]="!sectionsExpanded.queries" *ngIf="record.IsSaved">
                <div class="form-body">
                    <mj-user-view-grid
                        [Params]="BuildRelationshipViewParamsByEntityName('Queries','EmbeddingModelID')"
                        [NewRecordValues]="NewRecordValues('Queries')"
                        [AllowLoad]="IsCurrentSection('queries')"
                        [EditMode]="GridEditMode()"
                        (dataLoaded)="sectionRowCounts['queries'] = $event.totalRowCount"
                        >
                    </mj-user-view-grid>
                </div>
            </div>
        </div>
        </div>
        </div>
    </form>
</div>
        