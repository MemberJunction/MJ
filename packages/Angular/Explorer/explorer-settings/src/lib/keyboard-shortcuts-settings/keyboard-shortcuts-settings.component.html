<div class="keyboard-shortcuts-settings">
  <!-- Header -->
  <div class="settings-header">
    <div class="header-content">
      <h2 class="settings-title">
        <i class="fa-solid fa-keyboard" aria-hidden="true"></i>
        Keyboard Shortcuts
      </h2>
      <p class="settings-description">
        View and customize keyboard shortcuts for faster navigation.
        @if (CustomizedCount > 0) {
          <span class="customized-badge">{{ CustomizedCount }} customized</span>
        }
      </p>
    </div>

    <!-- Search Box -->
    <div class="search-container">
      <i class="fa-solid fa-search search-icon" aria-hidden="true"></i>
      <input
        type="text"
        class="search-input"
        placeholder="Search shortcuts..."
        [(ngModel)]="SearchQuery"
        (input)="OnSearchChange()"
        aria-label="Search keyboard shortcuts"
      />
      @if (SearchQuery) {
        <button
          class="search-clear"
          (click)="SearchQuery = ''; OnSearchChange()"
          aria-label="Clear search"
          type="button"
        >
          <i class="fa-solid fa-xmark" aria-hidden="true"></i>
        </button>
      }
    </div>
  </div>

  <!-- Loading State -->
  @if (IsLoading) {
    <div class="loading-container">
      <mj-loading text="Loading keyboard shortcuts..."></mj-loading>
    </div>
  }

  <!-- Content -->
  @if (!IsLoading) {
    <!-- Empty State (No Results) -->
    @if (FilteredShortcuts.length === 0 && SearchQuery) {
      <div class="empty-state">
        <i class="fa-solid fa-magnifying-glass empty-icon" aria-hidden="true"></i>
        <p class="empty-text">No shortcuts match "{{ SearchQuery }}"</p>
        <p class="empty-subtext">Try a different search term</p>
      </div>
    }

    <!-- Empty State (No Shortcuts) -->
    @if (FilteredShortcuts.length === 0 && !SearchQuery) {
      <div class="empty-state">
        <i class="fa-solid fa-keyboard empty-icon" aria-hidden="true"></i>
        <p class="empty-text">No keyboard shortcuts registered</p>
      </div>
    }

    <!-- Shortcuts Table -->
    @if (FilteredShortcuts.length > 0) {
      <div class="shortcuts-container">
        <table class="shortcuts-table" role="table">
          <thead>
            <tr>
              <th class="col-name">Name</th>
              <th class="col-keys">Keys</th>
              <th class="col-actions">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (shortcut of FilteredShortcuts; track TrackByShortcutId($index, shortcut)) {
              <tr class="shortcut-row" [class.customized]="IsCustomized(shortcut)">
                <!-- Name & Description -->
                <td class="cell-name">
                  <div class="name-container">
                    <span class="shortcut-name">
                      {{ shortcut.name }}
                      @if (IsCustomized(shortcut)) {
                        <span class="customized-indicator" title="Customized from default">
                          <i class="fa-solid fa-pen" aria-hidden="true"></i>
                        </span>
                      }
                    </span>
                    @if (shortcut.description) {
                      <span class="shortcut-description">{{ shortcut.description }}</span>
                    }
                  </div>
                </td>

                <!-- Keys -->
                <td class="cell-keys">
                  <div class="key-badges">
                    @for (key of FormatKeyCombination(GetCombination(shortcut)); track $index) {
                      <kbd class="key-badge">{{ key }}</kbd>
                      @if ($index < FormatKeyCombination(GetCombination(shortcut)).length - 1) {
                        <span class="key-separator">+</span>
                      }
                    }
                  </div>
                </td>

                <!-- Actions -->
                <td class="cell-actions">
                  <div class="action-buttons">
                    <span class="coming-soon-text">
                      <i class="fa-solid fa-wrench" aria-hidden="true"></i>
                      Customization coming soon
                    </span>
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      <!-- Footer Actions -->
      @if (HasChanges) {
        <div class="footer-actions">
          <button
            class="reset-all-button"
            (click)="ResetAll()"
            [disabled]="IsResetting"
            type="button"
          >
            <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
            @if (IsResetting) {
              Resetting...
            } @else {
              Reset All to Defaults
            }
          </button>
        </div>
      }
    }
  }
</div>
