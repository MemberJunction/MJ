<div class="header-wrap">
  <div class="header header-bg">
    <div class="nav-container">
      <div class="menu-button">
        <span class="k-icon" (click)="onButtonClick()">
          <span class="fa-solid fa-bars fa-xl"></span>
        </span>
      </div>

      <div class="title">
        <div class="app-logo"></div>
      </div>

      <div class="user-info-wrapper">
        <!-- Search toggle icon -->
        <div class="search-toggle-icon" (click)="toggleSearch()">
          <span class="k-icon">
            <span class="fa-solid fa-magnifying-glass fa-xl"></span>
          </span>
        </div>
        
        <div class="icon-inbox" (click)="showNotifications($event)">
          <kendo-badge-container>
            <i class="fa-solid fa-inbox fa-xl"></i>
            <kendo-badge class="notification" *ngIf="UnreadNotificationCount > 0">{{UnreadNotificationCount}}</kendo-badge>
          </kendo-badge-container>
        </div>
        
        <div class="user-info">
          <div class="user-dropdown-wrapper">
            @if (userIconClass) {
              <div class="user-avatar-icon" (click)="toggleUserMenu()">
                <i [class]="userIconClass"></i>
              </div>
            } @else {
              <kendo-avatar class="k-m-0 user-avatar" style="margin: 0;" [imageSrc]="userImageURL" shape="circle" (click)="toggleUserMenu()"> </kendo-avatar>
            }

            <!-- Custom dropdown menu -->
            <div class="user-dropdown-menu" [class.dropdown-open]="isUserMenuOpen">
              <div class="user-dropdown-header">
                <span class="user-name">{{ userName }}</span>
              </div>
              <div class="user-dropdown-divider"></div>
              <div class="user-dropdown-item" (click)="logout()">
                <i class="fa-solid fa-sign-out-alt"></i>
                <span>Logout</span>
              </div>
            </div>
          </div>
        </div>

      </div>

        <!-- Search popup wrapper -->
        <div class="search-wrapper-toggle" [class.search-open]="isSearchOpen">
          <div class="search-wrapper">
            <kendo-dropdownlist
              [data]="searchableEntities"
              textField="Name"
              valueField="ID"
              class="search-entity-list"
              [(ngModel)]="selectedEntity"
            >
            </kendo-dropdownlist>
            <input 
              type="text"
              id="txtSearch"
              placeholder="Search"
              kendoTextBox
              (keydown.enter)="onSearch($event)"
              #searchInput
            />
            <span class="k-icon search-submit-icon" (click)="onSearch($event)">
              <span class="fa-solid fa-magnifying-glass"></span>
            </span>
          </div>
        </div>

    </div>
  </div>
</div>