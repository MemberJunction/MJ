<div class="app-switcher-container">
  <div class="app-switcher-button" (click)="toggleDropdown()">
    <i class="app-icon" [class]="activeApp?.Icon || 'fa-solid fa-cube'"
       [style.color]="activeApp?.GetColor()"></i>
    <span class="app-name">{{ activeApp?.Name || 'Select App' }}</span>
    <i class="dropdown-arrow fa-solid fa-chevron-down"></i>
  </div>

  <div class="app-switcher-dropdown" *ngIf="showDropdown">
    <div
      *ngFor="let app of apps"
      class="app-switcher-item"
      [class.active]="app.ID === activeApp?.ID"
      [style.--item-color]="app.GetColor()"
      (click)="selectApp(app)">
      <i [class]="app.Icon || 'fa-solid fa-cube'"></i>
      <span>{{ app.Name }}</span>
    </div>

    <!-- Divider -->
    <div class="app-switcher-divider"></div>

    <!-- Configure Apps option -->
    <div class="app-switcher-item configure-item" (click)="openConfigDialog()">
      <i class="fa-solid fa-gear"></i>
      <span>Configure Apps...</span>
    </div>
  </div>
</div>

<!-- App Configuration Dialog -->
<mj-user-app-config
  #appConfigDialog
  [(showDialog)]="showConfigDialog"
  (configSaved)="onConfigSaved()">
</mj-user-app-config>
