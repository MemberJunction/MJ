:host {
  display: block;
  height: 100vh;
  width: 100%;
  overflow: hidden;
}

/* MJ Logo - inline SVG as data URI from MJ-Mark-Only-Transparent.svg */
.mj-logo {
  width: 32px;
  height: 18px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='230' height='128' viewBox='0 0 230 128'%3E%3Cpath d='M0 0 C1.197 0.668 2.394 1.336 3.592 2.004 C12.234 6.837 20.792 11.805 29.327 16.824 C37.26 21.476 45.269 25.98 53.312 30.438 C53.91 30.769 54.507 31.1 55.122 31.441 C61.234 34.87 61.234 34.87 67.438 38.125 C69.709 37.16 69.709 37.16 72.258 35.652 C73.255 35.09 74.253 34.527 75.281 33.948 C76.364 33.325 77.447 32.703 78.562 32.062 C79.685 31.426 80.808 30.789 81.965 30.133 C90.435 25.322 98.84 20.401 107.239 15.469 C118.242 9.027 129.394 2.857 140.566 -3.286 C142.41 -4.306 144.248 -5.338 146.079 -6.382 C146.869 -6.832 147.659 -7.282 148.473 -7.746 C149.148 -8.136 149.824 -8.526 150.52 -8.927 C156.448 -11.856 163.036 -11.676 169.188 -9.625 C175.638 -6.152 178.915 -2.712 181.438 4.125 C181.951 7.259 181.946 10.308 181.892 13.479 C181.892 14.377 181.893 15.276 181.893 16.201 C181.891 19.145 181.86 22.088 181.828 25.031 C181.821 27.082 181.815 29.134 181.811 31.185 C181.796 36.564 181.757 41.943 181.712 47.322 C181.671 52.819 181.653 58.316 181.633 63.812 C181.59 74.584 181.522 85.354 181.438 96.125 C178.573 94.739 175.729 93.326 172.901 91.867 C170.644 90.732 168.349 89.671 166.018 88.7 C162.628 87.127 160.12 85.736 157.438 83.125 C155.741 78.082 155.893 73.244 156.047 68.004 C156.047 66.534 156.041 65.064 156.031 63.595 C156.018 59.745 156.076 55.899 156.15 52.049 C156.213 48.114 156.207 44.18 156.207 40.244 C156.217 32.536 156.303 24.832 156.438 17.125 C152.485 19.335 148.534 21.546 144.582 23.758 C143.476 24.376 142.37 24.995 141.231 25.632 C131.895 30.857 122.601 36.151 113.321 41.472 C107.737 44.673 102.15 47.868 96.562 51.062 C95.965 51.404 95.367 51.746 94.751 52.098 C86.826 56.629 78.889 61.14 70.938 65.625 C62.527 70.37 54.133 75.144 45.75 79.938 C45.166 80.271 44.581 80.605 43.979 80.95 C37.987 84.375 31.996 87.803 26.011 91.241 C14.366 97.93 2.707 104.594 -9.062 111.062 C-9.97 111.565 -10.878 112.067 -11.814 112.585 C-12.649 113.04 -13.484 113.496 -14.344 113.965 C-15.066 114.36 -15.789 114.756 -16.533 115.164 C-22.269 117.881 -28.602 117.949 -34.625 116.125 C-39.398 114.15 -42.881 110.491 -45.562 106.125 C-45.562 104.805 -45.562 103.485 -45.562 102.125 C-45.022 101.835 -44.481 101.545 -43.924 101.246 C-32.122 94.897 -20.456 88.363 -8.907 81.566 C-0.017 76.35 8.975 71.333 18.003 66.362 C24.427 62.82 30.777 59.186 37.065 55.408 C39.438 54.125 39.438 54.125 41.438 54.125 C41.438 53.465 41.438 52.805 41.438 52.125 C40.704 51.843 39.971 51.561 39.216 51.271 C36.702 50.234 34.368 49.093 31.98 47.797 C30.7 47.102 30.7 47.102 29.395 46.394 C28.481 45.892 27.567 45.391 26.625 44.875 C25.666 44.351 24.707 43.826 23.719 43.286 C14.477 38.202 5.37 32.897 -3.719 27.547 C-8.103 24.968 -12.509 22.431 -16.928 19.911 C-17.89 19.362 -17.89 19.362 -18.871 18.802 C-20.435 17.909 -21.999 17.017 -23.562 16.125 C-23.525 16.942 -23.487 17.759 -23.448 18.601 C-23.106 26.338 -22.848 34.071 -22.682 41.814 C-22.593 45.794 -22.474 49.768 -22.28 53.745 C-21.06 79.461 -21.06 79.461 -25.205 85.53 C-29.148 89.11 -33.517 90.996 -38.581 92.49 C-41.159 93.316 -43.282 94.688 -45.562 96.125 C-46.222 96.125 -46.882 96.125 -47.562 96.125 C-47.655 84.546 -47.726 72.967 -47.77 61.388 C-47.791 56.01 -47.819 50.633 -47.864 45.256 C-47.908 40.062 -47.932 34.869 -47.942 29.675 C-47.949 27.698 -47.964 25.721 -47.985 23.744 C-48.015 20.965 -48.018 18.187 -48.017 15.408 C-48.031 14.599 -48.045 13.79 -48.06 12.956 C-48.013 6.348 -46.391 0.196 -41.823 -4.764 C-27.895 -17.466 -13.817 -7.747 0 0 Z' fill='%23264FAF' transform='translate(47.5625,10.875)'/%3E%3Cpath d='M0 0 C2.051 0.961 2.051 0.961 4.098 2.16 C5.278 2.843 5.278 2.843 6.481 3.541 C7.333 4.043 8.185 4.545 9.062 5.062 C10.954 6.16 12.846 7.258 14.738 8.355 C16.255 9.24 16.255 9.24 17.803 10.142 C22.848 13.074 27.913 15.969 32.979 18.863 C34.753 19.877 36.525 20.892 38.297 21.907 C44.243 25.311 50.205 28.681 56.203 31.992 C57.347 32.625 58.491 33.258 59.669 33.911 C61.837 35.108 64.008 36.299 66.183 37.484 C67.154 38.02 68.125 38.557 69.125 39.109 C69.973 39.573 70.821 40.037 71.695 40.515 C74.149 42.096 76.015 43.87 78 46 C74.984 51.808 72.395 55.457 66.25 58.25 C54.159 61.04 44.857 55.778 34.625 49.75 C32.781 48.681 30.938 47.612 29.094 46.543 C28.114 45.972 27.134 45.402 26.125 44.814 C21.068 41.878 15.989 38.98 10.91 36.082 C9.13 35.065 7.35 34.048 5.57 33.03 C-5.598 26.648 -16.794 20.315 -28 14 C-28 13.34 -28 12.68 -28 12 C-24.284 9.789 -20.551 7.61 -16.812 5.438 C-15.757 4.809 -14.702 4.181 -13.615 3.533 C-12.083 2.649 -12.083 2.649 -10.52 1.746 C-9.582 1.196 -8.645 0.646 -7.679 0.08 C-4.518 -1.194 -3.196 -1.069 0 0 Z' fill='%23264FAF' transform='translate(150,69)'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  flex-shrink: 0;
}

.shell-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100%;
  overflow: hidden;
}

/* Hide shell container while loading - allows tab container to render and load
   first resource in background while shell loading indicator is visible */
.shell-container.hidden {
  visibility: hidden;
  position: absolute;
  pointer-events: none;
}

mj-tab-container {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: all 0.2s ease-in-out;
}

/* Hide Golden Layout tab headers when only one tab */
mj-tab-container.hide-tab-bar ::ng-deep .lm_header {
  display: none;
}

/* Show tab headers when multiple tabs */
mj-tab-container:not(.hide-tab-bar) ::ng-deep .lm_header {
  opacity: 1;
  max-height: 40px;
  transition: opacity 0.2s ease-in-out, max-height 0.2s ease-in-out;
}

/* Adjust content area height when tabs hidden */
mj-tab-container.hide-tab-bar ::ng-deep .lm_content {
  height: 100% !important;
}

/* Ensure smooth transitions */
mj-tab-container ::ng-deep .lm_stack {
  transition: all 0.2s ease-in-out;
}

.shell-header {
  height: 60px;
  background: white;
  border-bottom: 1px solid #e0e0e0;
  display: flex;
  align-items: center;
  padding: 0 16px;
  gap: 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  flex-shrink: 0;
}

/* Nav Bar Apps - permanent app icons in the header */
.nav-bar-apps {
  display: flex;
  align-items: center;
  gap: 4px;
}

.nav-bar-apps.left-of-switcher {
  /* No extra margin - header gap handles spacing */
  /* This prevents the app switcher from shifting when icons are hidden */
}

.nav-bar-apps.left-of-user-menu {
  margin-right: 8px;
}

.nav-bar-app-btn {
  --app-color: #757575;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #616161;
  font-size: 18px;
  transition: all 0.15s ease;
  position: relative;
}

.nav-bar-app-btn:hover {
  background: color-mix(in srgb, var(--app-color) 15%, transparent);
  color: var(--app-color);
}

.nav-bar-app-btn.active {
  background: color-mix(in srgb, var(--app-color) 20%, transparent);
  color: var(--app-color);
}

.nav-bar-app-btn.active::after {
  content: '';
  position: absolute;
  bottom: 6px;
  left: 50%;
  transform: translateX(-50%);
  width: 16px;
  height: 3px;
  background: var(--app-color);
  border-radius: 2px;
}

.nav-bar-app-btn i {
  transition: transform 0.15s ease;
  margin-top: 2px; /* Align with app switcher icon */
}

.nav-bar-app-btn:hover i {
  transform: scale(1.1);
}

.spacer {
  flex: 1;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.icon-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #757575;
  font-size: 18px;
  transition: background 0.15s;
}

.icon-btn:hover {
  background: #f5f5f5;
}

/* Notification button with badge */
.notification-btn {
  position: relative;
}

.notification-badge {
  position: absolute;
  top: 4px;
  right: 4px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  background: #e53935;
  color: white;
  font-size: 10px;
  font-weight: 600;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.user-menu {
  position: relative;
}

.user-menu .avatar-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: box-shadow 0.15s, transform 0.15s;
  padding: 0;
  overflow: hidden;
}

.user-menu .avatar-btn:hover {
  transform: scale(1.05);
}

/* Icon fallback styling - shows gray circle with icon */
.user-menu .avatar-btn .icon-fallback {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 2px solid #e0e0e0;
  background: #f5f5f5;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: border-color 0.15s;
}

.user-menu .avatar-btn:hover .icon-fallback {
  border-color: #1976d2;
}

.user-menu .avatar-btn .icon-fallback i {
  color: #757575;
  font-size: 16px;
}

/* Avatar image - replaces the gray circle entirely */
.user-menu .avatar-btn .avatar-img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

.user-menu .avatar-btn:hover .avatar-img {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

/* User Menu Header */
.user-menu-header {
  padding: 12px 16px;
  background: #fafafa;
}

.user-menu-header .user-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.user-menu-header .user-name {
  font-weight: 600;
  font-size: 14px;
  color: #424242;
}

.user-menu-header .user-email {
  font-size: 12px;
  color: #757575;
}

/* User Context Menu */
.user-context-menu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 8px;
  background: white;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  min-width: 180px;
  z-index: 10000;
  overflow: hidden;
}

.user-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  cursor: pointer;
  font-size: 14px;
  color: #424242;
  transition: background 0.15s;
}

.user-menu-item i {
  width: 18px;
  text-align: center;
  color: #757575;
  font-size: 14px;
}

.user-menu-item:hover {
  background: #f5f5f5;
}

.user-menu-item.danger {
  color: #c62828;
}

.user-menu-item.danger i {
  color: #c62828;
}

.user-menu-item.danger:hover {
  background: #ffebee;
}

.user-menu-divider {
  height: 1px;
  background: #e0e0e0;
  margin: 4px 0;
}

/* Menu item disabled state */
.user-menu-item.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.user-menu-item.disabled:hover {
  background: transparent;
}

/* Menu shortcut hint */
.user-menu-item .menu-shortcut {
  margin-left: auto;
  font-size: 11px;
  color: #9e9e9e;
  font-family: monospace;
}

/* Menu animations */
.user-context-menu.menu-fade {
  animation: menuFadeIn 0.15s ease-out;
}

.user-context-menu.menu-slide {
  animation: menuSlideIn 0.2s ease-out;
}

@keyframes menuFadeIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes menuSlideIn {
  from {
    opacity: 0;
    transform: translateY(-16px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.shell-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background: #fafafa;
}

/* Hamburger button - hidden on desktop */
.hamburger-btn {
  display: none;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: none;
  background: none;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  color: #616161;
  font-size: 20px;
  transition: background 0.15s;
}
.hamburger-btn:hover {
  background: #f5f5f5;
}

/* Mobile Navigation Overlay */
.mobile-nav-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 9998;
}

/* Mobile Navigation Drawer */
.mobile-nav-drawer {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: 280px;
  max-width: 85vw;
  background: white;
  box-shadow: 2px 0 12px rgba(0, 0, 0, 0.15);
  z-index: 9999;
  flex-direction: column;
  transform: translateX(-100%);
  transition: transform 0.3s ease;
}
.mobile-nav-drawer.open {
  transform: translateX(0);
}

.mobile-nav-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e0e0e0;
  background: #fafafa;
}
.mobile-nav-header span {
  font-weight: 600;
  font-size: 16px;
  color: #424242;
}
.mobile-nav-header .close-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #757575;
  font-size: 18px;
  transition: background 0.15s;
}
.mobile-nav-header .close-btn:hover {
  background: #e0e0e0;
}

.mobile-nav-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px 0;
}

.mobile-nav-section-title {
  padding: 8px 20px;
  font-size: 12px;
  font-weight: 600;
  color: #9e9e9e;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.mobile-nav-footer {
  border-top: 1px solid #e0e0e0;
  padding: 12px 16px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mobile-nav-action {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border: none;
  background: none;
  cursor: pointer;
  border-radius: 8px;
  color: #616161;
  font-size: 14px;
  font-weight: 500;
  transition: background 0.15s;
  width: 100%;
  text-align: left;
}
.mobile-nav-action:hover {
  background: #f5f5f5;
}
.mobile-nav-action i {
  font-size: 16px;
  width: 20px;
  text-align: center;
}

/* Mobile Responsive Styles */
@media (max-width: 768px) {
  .hamburger-btn {
    display: flex;
  }

  .desktop-nav {
    display: none !important;
  }

  .desktop-only {
    display: none !important;
  }

  .mobile-nav-overlay {
    display: block;
  }

  .mobile-nav-drawer {
    display: flex;
  }

  .shell-header {
    padding: 0 12px;
    gap: 8px;
  }
}

/* Settings Full-Screen Window Styles */
::ng-deep .settings-fullscreen-window {
  /* Remove window chrome for full-screen feel */
  box-shadow: none !important;
  border: none !important;
}

::ng-deep .settings-fullscreen-window .k-window-titlebar {
  background: #ffffff;
  border-bottom: 1px solid #e0e0e0;
  padding: 12px 16px;
}

::ng-deep .settings-fullscreen-window .k-window-title {
  font-size: 18px;
  font-weight: 600;
  color: #212121;
}

::ng-deep .settings-fullscreen-window .k-window-titlebar-actions {
  gap: 4px;
}

::ng-deep .settings-fullscreen-window .k-window-titlebar-action {
  width: 32px;
  height: 32px;
  border-radius: 6px;
}

::ng-deep .settings-fullscreen-window .k-window-titlebar-action:hover {
  background: #f5f5f5;
}

::ng-deep .settings-fullscreen-window .k-window-content {
  padding: 0;
  overflow: auto;
  background: #fafafa;
}

/* Hide minimize/maximize buttons - only show close */
::ng-deep .settings-fullscreen-window .k-window-titlebar-action[title="Minimize"],
::ng-deep .settings-fullscreen-window .k-window-titlebar-action[title="Maximize"],
::ng-deep .settings-fullscreen-window .k-window-titlebar-action .k-i-window-minimize,
::ng-deep .settings-fullscreen-window .k-window-titlebar-action .k-i-window-maximize,
::ng-deep .settings-fullscreen-window .k-window-titlebar-action .k-i-window {
  display: none !important;
}

/* ========================================
   SEARCH POPUP
   ======================================== */

.search-popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 9999;
  animation: fadeIn 0.15s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.search-popup {
  position: fixed;
  top: 60px; /* Below header */
  right: 16px;
  width: 480px;
  max-width: calc(100vw - 32px);
  background: white;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  z-index: 10000;
  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.search-popup.open {
  opacity: 1;
  transform: translateY(0);
  pointer-events: all;
}

.search-popup-content {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
}

.search-entity-dropdown {
  min-width: 140px;
  max-width: 180px;
  flex-shrink: 0;
}

.search-input {
  flex: 1;
  min-width: 0;
  height: 40px;
  padding: 8px 12px;
  font-size: 14px;
  border: 1px solid #d4d4d4;
  border-radius: 4px;
  outline: none;
  display: block !important;
  box-sizing: border-box;
}

.search-input:focus {
  border-color: #1976d2;
  box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
}

.search-submit-btn {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: none;
  background: #1976d2;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  transition: background 0.15s;
  flex-shrink: 0;
}

.search-submit-btn:hover {
  background: #1565c0;
}

.search-submit-btn:active {
  background: #0d47a1;
}

/* Mobile notification badge */
.notification-badge-mobile {
  position: absolute;
  top: 8px;
  right: 8px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  background: #e53935;
  color: white;
  font-size: 11px;
  font-weight: 600;
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* Mobile-specific search popup adjustments */
@media (max-width: 768px) {
  .search-popup {
    top: 60px;
    left: 16px;
    right: 16px;
    width: auto;
    max-width: none;
  }

  .search-popup-content {
    flex-wrap: wrap;
  }

  .search-entity-dropdown {
    width: 100%;
  }

  .search-input {
    flex: 1;
    min-width: 0;
  }
}