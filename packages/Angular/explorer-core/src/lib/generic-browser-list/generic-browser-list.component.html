
<div class="generic-browser-list-container">
  <div class="main-fav-wrapper">
    <div class="title-wrapper">
      <div class="title-flex-display">
        <span *ngIf="selectedFolderID" title="Folder" class="title-folder fa-regular fa-folder fa-2xl"></span>
        <h4>{{title}}</h4>
      </div>
      <kendo-dropdownbutton class="custom-dropdwn" (itemClick)="onDropdownItemClick($event)" [data]="createButtonDropdownData" themeColor="info">
        <span class="fa-solid fa-plus"></span>
        Create New
      </kendo-dropdownbutton>
    </div>
    <div class="title-wrapper">
      <div class="search">
        <kendo-textbox 
        type="text" 
        #searchInput 
        placeholder="Search" 
        (keyup)="onKeyup(searchInput.value)"
        [clearButton]="true"
        size="large"
        rounded="large"
        fillMode="solid"
        >
          <ng-template kendoTextBoxPrefixTemplate [showSeparator]="true">
            <span class="fa-solid fa-magnifying-glass margin-left-small"></span>
          </ng-template>
        </kendo-textbox>
      </div>
      <div class="filter-wrapper">
        <!--
        <kendo-dropdownbutton [data]="data" themeColor="primary">
          Sort By Recents
        </kendo-dropdownbutton>
        -->
        <button kendobutton (click)="changeViewMode('grid')" class="cursor-pointer grid-btn btn-cmn">
          <span class="fa-solid fa-bars"></span>
        </button>
        <button kendobutton (click)="changeViewMode('list')" class="cursor-pointer active btn-cmn">
          <span class="fa-solid fa-table-cells-large"></span>
        </button>
      </div>
    </div>

    <div class="main-area">
      <kendo-loader *ngIf="showLoader" type="converging-spinner"></kendo-loader>
      <div *ngIf="!showLoader">
        <kendo-grid *ngIf="displayAsGrid" (cellClick)="onCellItemClicked($event)" [kendoGridBinding]="items">
          <kendo-grid-column field="Name" title="Name"></kendo-grid-column>
          <kendo-grid-column field="Size" title="Size"></kendo-grid-column>
          <kendo-grid-column field="LastOpened" title="Last Opened"></kendo-grid-column>
          <kendo-grid-column field="ModifiedBy" title="Modified By"></kendo-grid-column>
          <kendo-grid-column title="">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div class="grid-wrapper">
                <button *ngIf="!disableEditButton" class="list-btn" (click)="editItem(dataItem)">
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <button class="list-btn" (click)="deleteItem(dataItem)">
                  <i class="fa-regular fa-trash-can"></i>
                </button>
              </div>
            </ng-template>
          </kendo-grid-column>
        </kendo-grid>
        <div *ngIf="!displayAsGrid" class="card-list k-d-flex k-flex-row k-h-full k-flex-wrap">
          <div *ngFor="let d of items">
            <kendo-card class="card-wrapper cursor-pointer">
              <div class="list-item-icon">
                <button *ngIf="!disableEditButton" (click)="editItem(d)" class="list-btn">
                  <span class="fa-regular fa-pen-to-square"></span>
                </button>
                <button (click)="deleteItem(d)" class="list-btn">
                  <span class="fa-regular fa-trash-can"></span>
                </button>
              </div>
              <kendo-card-body (click)="itemClick(d)">
                  <span *ngIf="d.Type === 'Folder'" title="Folder" class="fa-3x fa-regular fa-folder"></span>
                  <span *ngIf="d.Type !== 'Folder'" [title]="resourceName" class="fa-3x fa-solid fa-table-cells"></span>
                  <div class="padding-top-small">
                    <h5 kendoCardTitle>{{ d.Name }}</h5>
                    <p kendoCardSubtitle>{{ d.Description }}</p>
                  </div>
              </kendo-card-body>
            </kendo-card>
          </div>
        </div>
      </div>
    </div>
  </div>

  <kendo-dialog 
  [minWidth]="450"
  [width]="650"
  class="dialog-wrapper" 
  title="Confirm" 
  *ngIf="deleteDialogOpened" 
  (close)="onConfirmDeleteItem(false)">
    <p class="k-m-7.5 k-text-center">
      Are you sure you want to delete <b>{{selectedItem?.Name}}?</b>
    </p>
    <kendo-dialog-actions class="popup-actions-btn">
      <button class="cancel-btn" (click)="onConfirmDeleteItem(true)" kendoButton themeColor="info">
        Yes, Delete
      </button>
      <button class="yes-btn" (click)="onConfirmDeleteItem(false)" kendoButton fillMode="outline" themeColor="info">
        No, Cancel
      </button>
    </kendo-dialog-actions>
  </kendo-dialog>
  <kendo-dialog 
    title="Create new Folder" 
    *ngIf="createFolderDialogOpened" 
    (close)="toggleCreateFolderView()"
    [minWidth]="250"
    [width]="450"
    class="dialog-wrapper"
  >
  <div class="search">
    <kendo-textbox placeholder="Enter a folder name" (valueChange)="onCreateFolderKeyup($event)"/>
  </div>
    <kendo-dialog-actions class="popup-actions-btn">
      <button class="cancel-btn" (click)="createFolder()" kendoButton themeColor="info">
        Create
      </button>
      <button  class="yes-btn" (click)="toggleCreateFolderView()" kendoButton fillMode="outline" themeColor="info">
        Cancel
      </button>
    </kendo-dialog-actions>
  </kendo-dialog>
</div>
