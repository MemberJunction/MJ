
<div class="generic-browser-list-container">
  <div class="main-fav-wrapper">
    <div class="title-wrapper">
      <h4>{{title}}</h4>
      <kendo-dropdownbutton class="custom-dropdwn" (itemClick)="onDropdownItemClick($event)" [data]="data" themeColor="info">
        <span class="fa-solid fa-plus"></span>
        Create New
      </kendo-dropdownbutton>
    </div>
    <div class="title-wrapper">
      <div class="search">
        <kendo-textbox 
        type="text" 
        #searchInput 
        placeholder="Search" 
        (keyup)="onKeyup(searchInput.value)"
        [clearButton]="true"
        size="large"
        rounded="large"
        fillMode="solid"
        >
          <ng-template kendoTextBoxPrefixTemplate [showSeparator]="true">
            <span class="fa-solid fa-magnifying-glass margin-left-small"></span>
          </ng-template>
        </kendo-textbox>
      </div>
      <div class="filter-wrapper">
        <!--
        <kendo-dropdownbutton [data]="data" themeColor="primary">
          Sort By Recents
        </kendo-dropdownbutton>
        -->
        <button kendobutton (click)="changeViewMode('grid')" class="cursor-pointer grid-btn btn-cmn">
          <span class="fa-solid fa-bars"></span>
        </button>
        <button kendobutton (click)="changeViewMode('list')" class="cursor-pointer active btn-cmn">
          <span class="fa-solid fa-table-cells-large"></span>
        </button>
      </div>
    </div>

    <div class="main-area">
      <kendo-loader *ngIf="showLoader" type="converging-spinner"></kendo-loader>
      <div *ngIf="!showLoader">
        <kendo-grid *ngIf="displayAsGrid" (cellClick)="onCellItemClicked($event)" [kendoGridBinding]="items">
          <kendo-grid-column field="Name" title="Name"></kendo-grid-column>
          <kendo-grid-column field="Size" title="Size"></kendo-grid-column>
          <kendo-grid-column field="LastOpened" title="Last Opened"></kendo-grid-column>
          <kendo-grid-column field="ModifiedBy" title="Modified By"></kendo-grid-column>
          <kendo-grid-column title="">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div class="grid-wrapper">
                <button class="list-btn" (click)="editItem(dataItem)">
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <button class="list-btn" (click)="deleteItem(dataItem)">
                  <i class="fa-regular fa-trash-can"></i>
                </button>
              </div>
            </ng-template>
          </kendo-grid-column>
        </kendo-grid>
        <div *ngIf="!displayAsGrid" class="card-list k-d-flex k-flex-row k-h-full k-flex-wrap">
          <div *ngFor="let d of items">
            <kendo-card class="card-wrapper cursor-pointer">
              <div class="list-item-icon">
                <button (click)="editItem(d)" class="list-btn">
                  <span class="fa-regular fa-pen-to-square"></span>
                </button>
                <button (click)="deleteItem(d)" class="list-btn">
                  <span class="fa-regular fa-trash-can"></span>
                </button>
              </div>
              <kendo-card-body (click)="itemClick(d)">
                  <span *ngIf="d.Type === 'Folder'" class="fa-3x fa-regular fa-folder"></span>
                  <span *ngIf="d.Type !== 'Folder'" class="fa-3x fa-solid fa-table-cells"></span>
                  <div class="padding-top-small">
                    <h5 kendoCardTitle>{{ d.Name }}</h5>
                    <p kendoCardSubtitle>{{ d.Description }}</p>
                  </div>
              </kendo-card-body>
            </kendo-card>
          </div>
        </div>
      </div>
    </div>
  </div>

  <kendo-dialog 
  [minWidth]="450"
  [width]="650"
  class="dialog-wrapper" title="Confirm" *ngIf="deleteDialogOpened" (close)="onConfirmDeleteItem(false)">
    <kendo-loader *ngIf="showLoader" type="converging-spinner"></kendo-loader>
    <div [class]="showLoader ? 'disabled-div' : ''">
      <p class="k-m-7.5 k-text-center">
        Are you sure you want to delete <b>{{selectedItem?.Name}}</b>
      </p>
      <div  class="k-actions k-actions-end popup-actions popup-actions-btn">
        <button class="cancel-btn" kendoButton (click)="onConfirmDeleteItem(false)">
          <span class="fa-solid fa-xmark"></span> No, Cancel
        </button>
        <button class="yes-btn" kendoButton (click)="onConfirmDeleteItem(true)" themeColor="primary">
          <span class="fa-solid fa-check"></span> Yes, Delete
        </button>
      </div>
    </div>
  </kendo-dialog>
  <kendo-dialog 

    [minWidth]="450"
    [width]="600"
    [title]="getCopyFromTitle()" 
    *ngIf="copyFromDialogOpened" 
    (close)="toggleCopyFromView()"
  >
  <div class="search">
    <input type="text" placeholder="Search" (keyup)="onKeyup(searchInput.value)"/>
  </div>
    <kendo-dialog-actions>
      <button kendoButton>
        Cancel
      </button>
      <button kendoButton themeColor="primary">
        Create new {{resourceName}}
      </button>
    </kendo-dialog-actions>
  </kendo-dialog>
  <kendo-dialog 
    title="Create new Folder" 
    *ngIf="createFolderDialogOpened" 
    (close)="toggleCreateFolderView()"
    [minWidth]="250"
    [width]="450"
    class="dialog-wrapper"
  >
  <div class="search">
    <kendo-textbox placeholder="Enter a folder name" (valueChange)="onCreateFolderKeyup($event)"/>
  </div>
    <kendo-dialog-actions class=" popup-actions-btn">
      <button  class="yes-btn" fillMode="outline" themeColor="info" (click)="toggleCreateFolderView()" kendoButton>
        Cancel
      </button>
      <button class="cancel-btn" (click)="createFolder()" kendoButton themeColor="info">
        Create
      </button>
    </kendo-dialog-actions>
  </kendo-dialog>
</div>
