<div class="navigation-wrap" [ngClass]="{'waiting': loader}"  #drawerWrapper>
  <kendo-loader *ngIf="loading" type="converging-spinner" ></kendo-loader>
  <kendo-drawer-container *ngIf="!loading" >
    <kendo-drawer
      #drawer
      [items]="drawerItems"
      [mode]="mode"
      [mini]="mini"
      [animation]="false"
      (select)="onDrawerSelect($event)"
      [autoCollapse]="false"
    >
    </kendo-drawer>
    <!--
    <div *ngIf="showExpansionPanel">
      <expansion-panel-component [items]="panelItems" />
    </div>
    -->
    <kendo-drawer-content mjFillContainer>

      <mj-tabstrip #mjTabstrip mjFillContainer (TabClosed)="handleTabClosed($event)" (TabSelected)="handleTabSelected($event)" (TabContextMenu)="handleTabContextMenu($event)">
        <mj-tab [TabCloseable]="false">
          Home
        </mj-tab>
        <mj-tab-body>
          <router-outlet></router-outlet>
        </mj-tab-body>

        <mj-tab *ngFor="let tab of tabs;let i = index" [TabCloseable]="true">
          <span *ngIf="tab?.contentLoading" class="fa-regular fa-clock"></span>
          <kendo-svgicon *ngIf="!tab?.contentLoading && tab?.icon" [icon]="sharedService.kendoSVGIcon(tab.icon)"></kendo-svgicon>          
          {{ tab.labelLoading ? 'Loading...' : tab.label }}
        </mj-tab>
        <mj-tab-body *ngFor="let tab of tabs;let i = index">
          <mj-resource [Data]="tab.data" [isVisible]="activeTabIndex - 1 === i"
            (ResourceRecordSaved)="SaveSingleWorkspaceItem(tab)"
            (ContentLoadingStarted)="setTabContentLoadingStatus(tab, true)"
            (ContentLoadingComplete)="setTabContentLoadingStatus(tab, false)"
            mjFillContainer
            class="tab-resource"
          ></mj-resource>
        </mj-tab-body>
      </mj-tabstrip>
    </kendo-drawer-content>
  </kendo-drawer-container>

  
  <mj-skip-button
    action="route"
  ></mj-skip-button>
  <!-- Skip Button shows up through the above line of code -->
</div>

<div class="context-menu" [ngStyle]="contextMenuStyle" *ngIf="contextMenuVisible">
  <div class="context-menu-item" (click)="handleContextMenuOption(1)">Close All</div>
  <div class="context-menu-item" (click)="handleContextMenuOption(2)">Close Others</div>
  <div class="context-menu-item" (click)="handleContextMenuOption(3)">Close Tabs to the Right</div>
 </div>
