-- SQL Logging Session
-- Session ID: d95a3d1c-44fc-4464-8306-5fbd4c525d0f
-- Started: 2026-02-18T17:18:45.837Z
-- Description: MetadataSync push operation
-- Format: Migration-ready with Flyway schema placeholders
-- Generated by MemberJunction SQLServerDataProvider

-- Save MJ: Queries (core SP call only)
DECLARE @Name_11a01c1a NVARCHAR(255),
@CategoryID_11a01c1a UNIQUEIDENTIFIER,
@UserQuestion_11a01c1a NVARCHAR(MAX),
@Description_11a01c1a NVARCHAR(MAX),
@SQL_11a01c1a NVARCHAR(MAX),
@TechnicalDescription_11a01c1a NVARCHAR(MAX),
@OriginalSQL_11a01c1a NVARCHAR(MAX),
@Feedback_11a01c1a NVARCHAR(MAX),
@Status_11a01c1a NVARCHAR(15),
@QualityRank_11a01c1a INT,
@ExecutionCostRank_11a01c1a INT,
@UsesTemplate_11a01c1a BIT,
@AuditQueryRuns_11a01c1a BIT,
@CacheEnabled_11a01c1a BIT,
@CacheTTLMinutes_11a01c1a INT,
@CacheMaxSize_11a01c1a INT,
@EmbeddingVector_11a01c1a NVARCHAR(MAX),
@EmbeddingModelID_11a01c1a UNIQUEIDENTIFIER,
@CacheValidationSQL_11a01c1a NVARCHAR(MAX),
@ID_11a01c1a UNIQUEIDENTIFIER
SET
  @Name_11a01c1a = N'GetConversationsForMemoryManager'
SET
  @CategoryID_11a01c1a = '5609FBC7-381C-4F9C-9C74-04B52C1FF3DA'
SET
  @UserQuestion_11a01c1a = N'What conversations have new activity that need to be analyzed for memory extraction?'
SET
  @Description_11a01c1a = N'Returns all conversation data needed for memory extraction in a single query: conversations with new activity, their details with ratings, and linked agent runs for scope inheritance. Optimized to replace 4 separate sequential queries.'
SET
  @SQL_11a01c1a = N'-- Get Conversations for Memory Manager - Single optimized query
-- Returns all data needed for memory extraction: conversations, details, ratings, and agent runs
-- Uses JSON aggregation to include related data without row multiplication
-- This replaces 4 separate queries with 1 query for better performance
--
-- Parameters:
--   @since (optional): ISO date string - only include conversations with new activity after this date
--   @agentIds: Comma-separated list of agent IDs that have memory enabled

SELECT
    c.ID as ConversationID,
    c.UserID,

    -- Most recent agent run ID for this conversation (for scope inheritance)
    (
        SELECT TOP 1 ar.ID
        FROM [${flyway:defaultSchema}].[vwAIAgentRuns] ar
        WHERE ar.ConversationID = c.ID
        AND ar.AgentID IN ({{ agentIds }})
        ORDER BY ar.StartedAt DESC
    ) as AgentRunID,

    -- Conversation details as JSON array with ratings included
    (
        SELECT
            cd.ID as id,
            cd.Role as role,
            cd.Message as message,
            cd.__mj_CreatedAt as createdAt,
            cdr.Rating as rating,
            cdr.Comments as ratingComment
        FROM [${flyway:defaultSchema}].[vwConversationDetails] cd
        LEFT OUTER JOIN [${flyway:defaultSchema}].[vwConversationDetailRatings] cdr
            ON cdr.ConversationDetailID = cd.ID
        WHERE cd.ConversationID = c.ID
        AND cd.Status = ''Complete''
        ORDER BY cd.__mj_CreatedAt ASC
        FOR JSON PATH
    ) as MessagesJSON,

    -- Rating summary flags
    CASE WHEN EXISTS (
        SELECT 1 FROM [${flyway:defaultSchema}].[vwConversationDetails] cd
        INNER JOIN [${flyway:defaultSchema}].[vwConversationDetailRatings] cdr ON cdr.ConversationDetailID = cd.ID
        WHERE cd.ConversationID = c.ID AND cdr.Rating >= 8
    ) THEN 1 ELSE 0
END as HasPositiveRating,

    CASE WHEN EXISTS (
        SELECT 1 FROM [${flyway:defaultSchema}].[vwConversationDetails] cd
        INNER JOIN [${flyway:defaultSchema}].[vwConversationDetailRatings] cdr ON cdr.ConversationDetailID = cd.ID
        WHERE cd.ConversationID = c.ID AND cdr.Rating <= 3
    ) THEN 1 ELSE 0
END as HasNegativeRating,

    CASE WHEN NOT EXISTS (
        SELECT 1 FROM [${flyway:defaultSchema}].[vwConversationDetails] cd
        INNER JOIN [${flyway:defaultSchema}].[vwConversationDetailRatings] cdr ON cdr.ConversationDetailID = cd.ID
        WHERE cd.ConversationID = c.ID
    ) THEN 1 ELSE 0
END as IsUnrated

FROM [${flyway:defaultSchema}].[vwConversations] c

-- Only include conversations with new activity since last run
WHERE EXISTS (
    SELECT 1 FROM [${flyway:defaultSchema}].[vwConversationDetails] cd_new
    WHERE cd_new.ConversationID = c.ID
    {% if since %}
    AND cd_new.__mj_CreatedAt >= ''{{ since }}''
    {% endif %}
)

-- Only include conversations linked to agents that have memory enabled
AND EXISTS (
    SELECT 1 FROM [${flyway:defaultSchema}].[vwAIAgentRuns] ar
    WHERE ar.ConversationID = c.ID
    AND ar.AgentID IN ({{ agentIds }})
)

ORDER BY c.__mj_UpdatedAt DESC
'
SET
  @TechnicalDescription_11a01c1a = N'Single-query optimization that replaces 4 separate RunView calls in Memory Manager (get conversations, get agent runs, get details, get ratings). Uses SQL Server FOR JSON PATH to aggregate conversation details with ratings as JSON arrays. Returns rating summary flags (HasPositiveRating, HasNegativeRating, IsUnrated) and most recent AgentRunID for scope inheritance. Reduces database round trips from 4 to 1.'
SET
  @Status_11a01c1a = N'Approved'
SET
  @QualityRank_11a01c1a = 9
SET
  @ExecutionCostRank_11a01c1a = 3
SET
  @UsesTemplate_11a01c1a = 1
SET
  @AuditQueryRuns_11a01c1a = 0
SET
  @CacheEnabled_11a01c1a = 0
SET
  @EmbeddingVector_11a01c1a = N'[0.05079127848148346,0.09035059064626694,-0.0241005327552557,0.0002047202578978613,0.007942557334899902,-0.004986656829714775,-0.0040833973325788975,-0.013648014515638351,-0.012232557870447636,-0.016947250813245773,-0.028481926769018173,0.007967942394316196,-0.02684820257127285,0.04656028747558594,-0.052749037742614746,-0.0031639356166124344,0.021843701601028442,-0.00868343934416771,0.024816567078232765,0.024035068228840828,-0.00625630933791399,-0.005105008836835623,0.03923854976892471,-0.03631487116217613,-0.011602414771914482,-0.003479759907349944,-0.04228506609797478,0.019970396533608437,0.03680785372853279,-0.05429837480187416,0.0020721578039228916,0.03860961273312569,-0.063536137342453,0.020076200366020203,0.0000018501910972190672,-0.029065575450658798,-0.04729870334267616,0.016312794759869576,0.0121134789660573,0.033217646181583405,0.06390431523323059,0.010297387838363647,0.04633641615509987,0.013665363192558289,-0.058271877467632294,0.04765554890036583,-0.006883734837174416,-0.06572329252958298,0.046769462525844574,0.02473931387066841,-0.009251734241843224,0.032639279961586,-0.027040032669901848,0.005404791794717312,0.03869984298944473,-0.07086299359798431,0.012611155398190022,0.042279329150915146,0.06193437799811363,-0.0017248332733288407,0.036020055413246155,-0.012290241196751595,-0.010795294307172298,-0.023887621238827705,-0.00048658213927410543,0.004781071562319994,-0.027481012046337128,-0.01167088933289051,-0.005306650884449482,0.012155258096754551,0.1098610982298851,0.048767127096652985,0.014109102077782154,-0.005584047641605139,-0.023643946275115013,-0.05883141607046127,-0.0119113028049469,-0.0008175396360456944,-0.01818632148206234,0.011405295692384243,-0.0691610649228096,0.03485322743654251,-0.016906920820474625,-0.020627707242965698,-0.05224714055657387,-0.017756739631295204,-0.00005160645378055051,-0.010144558735191822,-0.012117987498641014,-0.03278453275561333,0.10722796618938446,0.009296494536101818,0.03643833100795746,-0.02586969919502735,-0.02776397578418255,0.002058778889477253,-0.018441760912537575,-0.00994481984525919,0.017424477264285088,-0.08905638009309769,0.026498032733798027,0.03623943775892258,0.03114563226699829,0.02810569480061531,0.049529869109392166,-0.06858674436807632,-0.018866688013076782,-0.037773989140987396,-0.030855953693389893,-0.0016322797164320946,-0.03939410671591759,0.0075011784210801125,-0.023640239611268044,0.0894571989774704,-0.05356133356690407,0.0033090044744312763,-0.055434998124837875,0.08320257812738419,0.0010676984675228596,-0.007338373921811581,0.009556654840707779,0.03627324849367142,-0.028003215789794922,0.024955447763204575,-0.027351753786206245,0.017706898972392082,-0.0022198003716766834,-0.02509322389960289,0.022394653409719467,-0.07395141571760178,-0.01856291852891445,-0.018150687217712402,0.031191453337669373,-0.03474811092019081,-0.005459083244204521,0.04644906520843506,0.025601867586374283,-0.07710008323192596,-0.017003830522298813,-0.0401291623711586,0.06264519691467285,-0.03787681832909584,-0.02545793540775776,-0.017351355403661728,0.03698789328336716,-0.030737601220607758,-0.039643894881010056,0.02032824046909809,-0.00019931506540160626,0.02879779413342476,-0.058180488646030426,0.019686447456479073,0.002907541813328862,0.0023019530344754457,0.003079300280660391,0.010915940627455711,0.10657579451799393,0.08073189109563828,0.006317181047052145,0.06279805302619934,0.04606578126549721,-0.000859603111166507,-0.017565233632922173,-0.0028020672034472227,0.011497484520077705,0.0007478615152649581,0.013867675326764584,0.028941577300429344,-0.027205482125282288,-0.025482267141342163,-0.015496990643441677,0.019426340237259865,-0.026243751868605614,-0.003329381812363863,0.04347588121891022,0.046181272715330124,-0.0378577895462513,-0.002381382044404745,-0.028820278123021126,0.01254812628030777,-0.031145159155130386,-0.05485319346189499,-0.04959753155708313,0.03526325896382332,0.0010121699888259172,-0.03156620264053345,0.07196877151727676,0.021316271275281906,-0.05075361207127571,-0.024181406944990158,0.018523653969168663,-0.062384121119976044,0.025164064019918442,-0.0076613579876720905,0.028020406141877174,-0.004517694003880024,-0.03566809743642807,0.050433333963155746,0.03190324828028679,-0.028339020907878876,-0.056465163826942444,-0.01460159569978714,0.013730207458138466,0.08056039363145828,-0.011897717602550983,-0.022440511733293533,-0.07959193736314774,0.03878672793507576,0.008727208711206913,0.007012821733951569,0.00516737625002861,0.021217189729213715,0.032105930149555206,-0.009648353792726994,-0.023099390789866447,0.028003400191664696,0.039157934486866,0.016207469627261162,0.0008238396840170026,-0.013398611918091774,-0.01404569111764431,0.02496291883289814,-0.029620852321386337,-0.006285957992076874,0.0005397481145337224,0.029324516654014587,0.028163200244307518,0.0014608276542276144,0.03636430948972702,0.05486462637782097,0.006569191347807646,0.0003904184268321842,0.0591057687997818,0.021048828959465027,0.010539560578763485,0.06098775565624237,0.012887216173112392,0.0705694928765297,-0.035670775920152664,-0.003907260950654745,0.04537628963589668,-0.04667634144425392,-0.02407081238925457,0.008037649095058441,0.0061867255717515945,-0.040602907538414,0.05563296750187874,-0.002667628927156329,0.019101625308394432,-0.003512762486934662,0.001137108076363802,0.030229294672608376,0.02169504202902317,-0.05029250681400299,-0.055469121783971786,-0.03266417980194092,-0.018757766112685204,0.005477202124893665,-0.03844166174530983,0.04366390034556389,-0.01916595920920372,0.02346942201256752,0.01841963268816471,-0.013052878901362419,0.04185650125145912,-0.048077140003442764,0.009478059597313404,-0.07091536372900009,0.022565769031643867,-0.004921324085444212,0.04391113668680191,0.011910381726920605,0.08163058012723923,0.0018719411455094814,-0.03828807175159454,0.03158252313733101,0.0425875261425972,0.0010985546978190541,0.040754493325948715,-0.004179877694696188,0.025889461860060692,-0.012415274046361446,-0.015056653879582882,0.004746823105961084,-0.0002814853214658797,0.01745971105992794,0.0441463403403759,-0.08236732333898544,0.014081819914281368,-0.036024268716573715,-0.016545020043849945,-0.003377856919541955,-0.02306751348078251,-0.02636226825416088,-0.01099723856896162,-0.05543310195207596,-0.0648922249674797,0.06529548764228821,0.013662722893059254,0.036326147615909576,-0.007037690375000238,-0.0361054427921772,-0.058202896267175674,-0.004697256721556187,-0.04680855572223663,0.0021172116976231337,-0.01232223305851221,0.02042219787836075,0.05537120997905731,0.03784762695431709,-0.04327843338251114,0.032823529094457626,-0.014867894351482391,-0.008223011158406734,0.03855353593826294,-0.013950797729194164,0.04459561035037041,0.027599478140473366,-0.004590993747115135,0.03264136239886284,-0.010919061489403248,-0.05871909111738205,0.035408467054367065,0.06742919236421585,0.010252798907458782,-0.07799189537763596,-0.016890371218323708,-0.007714482955634594,0.05800987407565117,-0.02045244351029396,0.005857840180397034,-0.02115759439766407,-0.06399159878492355,0.030116943642497063,-0.053240351378917694,0.003706203540787101,-0.04979139193892479,0.06886255741119385,-0.04757111892104149,0.0033437798265367746,0.00736438762396574,-0.022324025630950928,-0.02843300811946392,0.03313082829117775,-0.031460754573345184,-0.019286077469587326,0.0031424034386873245,-0.03315126895904541,-0.06568882614374161,0.014908798970282078,-0.04478200152516365,-0.013060609810054302,-0.017260616645216942,-0.01208257395774126,0.0013886390952393413,-0.024398701265454292,-0.0075802854262292385,0.004130313638597727,-0.06296239048242569,-0.021676722913980484,0.029038386419415474,0.09631688892841339,0.024205869063735008,-0.03380195051431656,0.0354977510869503,-0.040639523416757584,0.028481315821409225,-0.006406386848539114,0.0029548911843448877,0.013059730641543865,0.033372655510902405,-0.02978798747062683,-0.05105017125606537,0.06694665551185608,0.02004576474428177,-0.10536867380142212,-0.01994118094444275,-0.013440405018627644,-0.027942100539803505,-0.020736780017614365,0.03392152115702629,-0.09779267013072968,0.014945067465305328,-0.028502844274044037,0.020530885085463524,0.01761610433459282,-0.0625622346997261,-0.033886488527059555,-0.1131233349442482,0.00009574100113241002,0.012706561014056206,-0.06307659298181534,0.019195737317204475,-0.08009906113147736,0.005383370444178581,-0.017002683132886887,-0.004235582426190376,-0.021217117086052895,0.01647210866212845,-0.0007949425489641726,-0.011339214630424976,0.006899432744830847,0.0444469228386879,0.008899403735995293,-0.06134840101003647,0.03177731856703758,0.015260351821780205,0.06299184262752533,0.0032627482432872057,-0.02273254469037056,-0.03224923461675644,0.005678757559508085,-0.01799294725060463,-0.028770867735147476,0.05657487362623215,-0.013943229801952839,0.03969544544816017,0.02078286185860634,0.046805765479803085,-0.004324295558035374,0.05251304432749748,0.029305709525942802,0.022435922175645828,-0.026093272492289543,0.02631351165473461,-0.00607965188100934,0.04262903332710266,0.01061802078038454,0.02471427246928215,-0.00781203480437398,-0.014936456456780434,-0.025120357051491737,-0.0036682637874037027,-0.018968453630805016,-0.0644301250576973,0.03706567734479904,0.031014690175652504,-0.07060138136148453,-0.02515042945742607,-0.008712846785783768,-0.03514249250292778,0.018190797418355942,0.08127940446138382,-0.017786934971809387,0.018582746386528015,0.024726053699851036,0.00039170298259705305,-0.026734352111816406,-0.021657204255461693,-0.0040737902745604515,-0.00675504794344306,-0.008087733760476112,-0.02449152059853077,-0.005953727290034294,0.007129926234483719,0.013528949581086636,-0.024357624351978302,-0.07492576539516449,-0.047737520188093185,0.014164100401103497,0.05191383510828018,0.035761598497629166,0.035110652446746826,0.008612304925918579,0.013734747655689716,-0.028543705120682716,0.05263384059071541,-0.09211473166942596,0.018031325191259384,0.025148333981633186,0.06415750831365585,0.011009620502591133,0.030593188479542732,-0.023033324629068375,0.025234058499336243,0.02118276059627533,-0.015876511111855507,-0.0508064404129982,-0.012985431589186192,-0.000732322339899838,0.02684761956334114,0.019889231771230698,0.050808217376470566,-0.04824836552143097,0.00004551123856799677,0.04843232035636902,-0.07893157750368118,0.007085248362272978,-0.0434907041490078,-0.012945124879479408,-0.016079507768154144,0.00799733679741621,-0.013625946827232838,0.018292617052793503,0.002236912725493312,0.04320317879319191,-0.011262319050729275,-0.05728518217802048,0.02192917838692665,-0.05100050941109657,-0.0038374271243810654,-0.032028570771217346,-0.004153268411755562,0.014178507961332798,0.018571963533759117,0.06490568816661835,-0.04621608182787895,0.0011113806394860148,0.0038916936609894037,0.011749910190701485,0.02180490642786026,0.03846370801329613,-0.05944552272558212,-0.031017789617180824,0.03457550331950188,-0.031838394701480865,-0.03136684373021126,0.0001624780852580443,0.04812081530690193,-0.004885158967226744,0.015770161524415016,-0.006694483105093241,0.0160669032484293,-0.0043753222562372684,0.025523560121655464,-0.03197191283106804,0.015508252196013927,0.0016496420139446855,0.008066253736615181,0.06393346190452576,-0.052016470581293106,0.041149038821458817,-0.006335366051644087,-0.0408761091530323,-0.022557884454727173,-0.010689076967537403,0.0378512367606163,0.06826858222484589,0.011972835287451744,-0.07253285497426987,-0.006630072370171547,0.029759662225842476,0.013830936513841152,-0.028837310150265694,-0.017657645046710968,0.0028450982645154,0.040727175772190094,0.018832918256521225,0.053141843527555466,0.022112255915999413,-0.032845836132764816,-0.038760773837566376,-0.08138919621706009,-0.0023772651329636574,0.036029040813446045,-6.432864916884136e-33,-0.023917924612760544,-0.014684871770441532,0.006195457652211189,0.03723994642496109,-0.0597340352833271,-0.014452226459980011,-0.014286693185567856,-0.031614288687705994,-0.0014728907262906432,-0.0454246811568737,-0.019309645518660545,0.04720998555421829,0.037140704691410065,0.017804637551307678,0.024539735168218613,0.018375108018517494,0.024064848199486732,-0.015934990718960762,0.003956449218094349,0.06683484464883804,0.05707010626792908,0.07038233429193497,-0.0026173924561589956,-0.04496459290385246,0.017081035301089287,0.016864199191331863,0.04953546077013016,0.0032294809352606535,0.004290263168513775,0.01644625887274742,-0.017755873501300812,0.011755957268178463,0.0029416726902127266,0.02460000291466713,-0.00520614068955183,-0.040576498955488205,-0.053908150643110275,-0.061240725219249725,0.0105019211769104,-0.03919978067278862,-0.006003388203680515,0.005817030090838671,0.012093015015125275,0.010909541510045528,0.019264882430434227,-0.03533279895782471,0.034129075706005096,-0.009940299205482006,-0.04438069090247154,-0.030499612912535667,-0.005030960310250521,0.016664298251271248,0.0006420074496418238,0.07340309023857117,0.0007477820618078113,-0.02241343818604946,-0.00947281252592802,0.0218973346054554,-0.057180631905794144,0.03891448304057121,-0.06643245369195938,0.015900282189249992,-0.02570738084614277,0.05755329877138138,0.03457222878932953,0.015214716084301472,0.04068397358059883,0.060166239738464355,0.00036199623718857765,0.017706768587231636,-0.00989444274455309,0.06864777952432632,-0.05683824419975281,-0.0468280054628849,-0.04011251777410507,-0.007704589981585741,-0.0539516881108284,-0.01912015490233898,0.04430456832051277,0.008914164267480373,0.010646039620041847,0.023217666894197464,-0.056944120675325394,-0.010533517226576805,0.037721216678619385,0.05675901100039482,-0.0004984409315511584,-0.03318960592150688,-0.018096156418323517,-0.002046339213848114,-0.06401760131120682,0.012063666246831417,-0.002988585736602545,-0.02988538332283497,0.01409144140779972,-0.00019880582112818956,0.05567929893732071,-0.04396361485123634,-0.013401719741523266,0.015571626834571362,-0.009291345253586769,-0.020664727315306664,0.005512372124940157,0.03060385398566723,-0.014660770073533058,0.004089468624442816,0.02298607863485813,-0.02113240957260132,-0.046136461198329926,-0.009890127927064896,-0.0017711372347548604,0.02748834528028965,0.005973044782876968,0.03226775303483009,-0.008336141705513,0.04134117066860199,-0.005496539641171694,0.11610472947359085,0.03799837827682495,0.048205774277448654,-0.03318478912115097,-0.032624684274196625,0.060979388654232025,-0.026705428957939148,0.00505594490095973,0.02075597085058689,-0.045613549649715424,-0.038081854581832886,0.0028805441688746214,-0.020954394713044167,-0.005293926224112511,0.01901543326675892,2.7053718554270745e-7,0.019686926156282425,0.017047487199306488,-0.013053808361291885,0.003960337024182081,0.0027668620459735394,0.00214202213101089,0.046231482177972794,0.011082331649959087,0.03369522839784622,-0.002964071463793516,0.04340475797653198,0.017111919820308685,0.011001167818903923,0.03854682296514511,-0.07275687158107758,-0.036689192056655884,-0.0218672938644886,-0.09564562886953354,-0.07321562618017197,-0.03604140505194664,0.03735772892832756,0.0071462951600551605,0.04691056162118912,0.0017742825439199805,-0.005430781748145819,0.0074676088988780975,0.019835757091641426,-0.05317511036992073,-0.08343472331762314,0.015415129251778126,0.05399279296398163,-0.052760958671569824,-0.033376842737197876,0.01886281929910183,-0.021096426993608475,0.009936757385730743,-0.047020334750413895,0.01970226876437664,-0.025672458112239838,-0.047675274312496185,0.008177420124411583,-0.045784033834934235,-0.01186355296522379,0.06341540813446045,0.059236180037260056,-0.049784839153289795,-0.05416940152645111,0.005316439084708691,-0.008641050197184086,-0.031758345663547516,0.022063013166189194,0.03223682940006256,0.011694096028804779,0.001983350608497858,0.011517112143337727,0.03735494241118431,-0.017370957881212234,-0.04038471728563309,0.0416184663772583,-0.0342542827129364,-0.0036211232654750347,-0.09179119765758514,0.01881531998515129,0.030116280540823936,-0.021103352308273315,-0.03853075951337814,0.013337511569261551,2.6788554278417677e-34,0.039873164147138596,0.05002487450838089,0.028683243319392204,0.05554112046957016,0.029719317331910133,0.03558764606714249,0.009646526537835598,0.007612765766680241,0.055310722440481186,-0.1114618182182312,-0.007236486300826073]'
SET
  @EmbeddingModelID_11a01c1a = '1D45AA65-41EC-4572-9ECD-AB2826C9B059'
SET
  @ID_11a01c1a = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
EXEC [${flyway:defaultSchema}].spUpdateQuery @Name = @Name_11a01c1a,
  @CategoryID = @CategoryID_11a01c1a,
  @UserQuestion = @UserQuestion_11a01c1a,
  @Description = @Description_11a01c1a,
  @SQL = @SQL_11a01c1a,
  @TechnicalDescription = @TechnicalDescription_11a01c1a,
  @OriginalSQL = @OriginalSQL_11a01c1a,
  @Feedback = @Feedback_11a01c1a,
  @Status = @Status_11a01c1a,
  @QualityRank = @QualityRank_11a01c1a,
  @ExecutionCostRank = @ExecutionCostRank_11a01c1a,
  @UsesTemplate = @UsesTemplate_11a01c1a,
  @AuditQueryRuns = @AuditQueryRuns_11a01c1a,
  @CacheEnabled = @CacheEnabled_11a01c1a,
  @CacheTTLMinutes = @CacheTTLMinutes_11a01c1a,
  @CacheMaxSize = @CacheMaxSize_11a01c1a,
  @EmbeddingVector = @EmbeddingVector_11a01c1a,
  @EmbeddingModelID = @EmbeddingModelID_11a01c1a,
  @CacheValidationSQL = @CacheValidationSQL_11a01c1a,
  @ID = @ID_11a01c1a;

-- Save MJ: Query Parameters (core SP call only)
DECLARE @QueryID_6574a52d UNIQUEIDENTIFIER,
@Name_6574a52d NVARCHAR(255),
@Type_6574a52d NVARCHAR(50),
@IsRequired_6574a52d BIT,
@DefaultValue_6574a52d NVARCHAR(MAX),
@Description_6574a52d NVARCHAR(MAX),
@SampleValue_6574a52d NVARCHAR(MAX),
@ValidationFilters_6574a52d NVARCHAR(MAX),
@DetectionMethod_6574a52d NVARCHAR(50),
@AutoDetectConfidenceScore_6574a52d DECIMAL(3, 2),
@ID_6574a52d UNIQUEIDENTIFIER
SET
  @QueryID_6574a52d = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_6574a52d = N'since'
SET
  @Type_6574a52d = N'date'
SET
  @IsRequired_6574a52d = 0
SET
  @Description_6574a52d = N'ISO date string - only include conversations with new activity after this date'
SET
  @SampleValue_6574a52d = N'2024-01-15T10:30:00.000Z'
SET
  @DetectionMethod_6574a52d = N'AI'
SET
  @ID_6574a52d = 'DF0E9F24-CD92-4C6C-BA18-13B443160DE5'
EXEC [${flyway:defaultSchema}].spUpdateQueryParameter @QueryID = @QueryID_6574a52d,
  @Name = @Name_6574a52d,
  @Type = @Type_6574a52d,
  @IsRequired = @IsRequired_6574a52d,
  @DefaultValue = @DefaultValue_6574a52d,
  @Description = @Description_6574a52d,
  @SampleValue = @SampleValue_6574a52d,
  @ValidationFilters = @ValidationFilters_6574a52d,
  @DetectionMethod = @DetectionMethod_6574a52d,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_6574a52d,
  @ID = @ID_6574a52d;

-- Save MJ: Query Parameters (core SP call only)
DECLARE @QueryID_94b9a28d UNIQUEIDENTIFIER,
@Name_94b9a28d NVARCHAR(255),
@Type_94b9a28d NVARCHAR(50),
@IsRequired_94b9a28d BIT,
@DefaultValue_94b9a28d NVARCHAR(MAX),
@Description_94b9a28d NVARCHAR(MAX),
@SampleValue_94b9a28d NVARCHAR(MAX),
@ValidationFilters_94b9a28d NVARCHAR(MAX),
@DetectionMethod_94b9a28d NVARCHAR(50),
@AutoDetectConfidenceScore_94b9a28d DECIMAL(3, 2),
@ID_94b9a28d UNIQUEIDENTIFIER
SET
  @QueryID_94b9a28d = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_94b9a28d = N'agentIds'
SET
  @Type_94b9a28d = N'string'
SET
  @IsRequired_94b9a28d = 1
SET
  @Description_94b9a28d = N'Comma-separated list of agent IDs that have memory enabled'
SET
  @SampleValue_94b9a28d = N'123e4567-e89b-12d3-a456-426614174000,223e4567-e89b-12d3-a456-426614174001'
SET
  @DetectionMethod_94b9a28d = N'AI'
SET
  @ID_94b9a28d = 'AF4459A1-BEDA-4200-A739-4292E90EA6A1'
EXEC [${flyway:defaultSchema}].spUpdateQueryParameter @QueryID = @QueryID_94b9a28d,
  @Name = @Name_94b9a28d,
  @Type = @Type_94b9a28d,
  @IsRequired = @IsRequired_94b9a28d,
  @DefaultValue = @DefaultValue_94b9a28d,
  @Description = @Description_94b9a28d,
  @SampleValue = @SampleValue_94b9a28d,
  @ValidationFilters = @ValidationFilters_94b9a28d,
  @DetectionMethod = @DetectionMethod_94b9a28d,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_94b9a28d,
  @ID = @ID_94b9a28d;

-- Save MJ: Query Fields (core SP call only)
DECLARE @QueryID_969c6c28 UNIQUEIDENTIFIER,
@Name_969c6c28 NVARCHAR(255),
@Description_969c6c28 NVARCHAR(MAX),
@Sequence_969c6c28 INT,
@SQLBaseType_969c6c28 NVARCHAR(50),
@SQLFullType_969c6c28 NVARCHAR(100),
@SourceEntityID_969c6c28 UNIQUEIDENTIFIER,
@SourceFieldName_969c6c28 NVARCHAR(255),
@IsComputed_969c6c28 BIT,
@ComputationDescription_969c6c28 NVARCHAR(MAX),
@IsSummary_969c6c28 BIT,
@SummaryDescription_969c6c28 NVARCHAR(MAX),
@DetectionMethod_969c6c28 NVARCHAR(50),
@AutoDetectConfidenceScore_969c6c28 DECIMAL(3, 2),
@ID_969c6c28 UNIQUEIDENTIFIER
SET
  @QueryID_969c6c28 = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_969c6c28 = N'HasPositiveRating'
SET
  @Description_969c6c28 = N'Flag indicating if conversation has any rating >= 8'
SET
  @Sequence_969c6c28 = 5
SET
  @SQLBaseType_969c6c28 = N'bit'
SET
  @SQLFullType_969c6c28 = N'bit'
SET
  @IsComputed_969c6c28 = 1
SET
  @ComputationDescription_969c6c28 = N'CASE expression checking for existence of ratings >= 8'
SET
  @IsSummary_969c6c28 = 0
SET
  @DetectionMethod_969c6c28 = N'Manual'
SET
  @ID_969c6c28 = 'ADC80F10-C778-46A7-AB21-1474FF3051BA'
EXEC [${flyway:defaultSchema}].spUpdateQueryField @QueryID = @QueryID_969c6c28,
  @Name = @Name_969c6c28,
  @Description = @Description_969c6c28,
  @Sequence = @Sequence_969c6c28,
  @SQLBaseType = @SQLBaseType_969c6c28,
  @SQLFullType = @SQLFullType_969c6c28,
  @SourceEntityID = @SourceEntityID_969c6c28,
  @SourceFieldName = @SourceFieldName_969c6c28,
  @IsComputed = @IsComputed_969c6c28,
  @ComputationDescription = @ComputationDescription_969c6c28,
  @IsSummary = @IsSummary_969c6c28,
  @SummaryDescription = @SummaryDescription_969c6c28,
  @DetectionMethod = @DetectionMethod_969c6c28,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_969c6c28,
  @ID = @ID_969c6c28;

-- Save MJ: Query Fields (core SP call only)
DECLARE @QueryID_79e5821c UNIQUEIDENTIFIER,
@Name_79e5821c NVARCHAR(255),
@Description_79e5821c NVARCHAR(MAX),
@Sequence_79e5821c INT,
@SQLBaseType_79e5821c NVARCHAR(50),
@SQLFullType_79e5821c NVARCHAR(100),
@SourceEntityID_79e5821c UNIQUEIDENTIFIER,
@SourceFieldName_79e5821c NVARCHAR(255),
@IsComputed_79e5821c BIT,
@ComputationDescription_79e5821c NVARCHAR(MAX),
@IsSummary_79e5821c BIT,
@SummaryDescription_79e5821c NVARCHAR(MAX),
@DetectionMethod_79e5821c NVARCHAR(50),
@AutoDetectConfidenceScore_79e5821c DECIMAL(3, 2),
@ID_79e5821c UNIQUEIDENTIFIER
SET
  @QueryID_79e5821c = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_79e5821c = N'UserID'
SET
  @Description_79e5821c = N'Unique identifier for the user associated with the conversation'
SET
  @Sequence_79e5821c = 2
SET
  @SQLBaseType_79e5821c = N'nvarchar'
SET
  @SQLFullType_79e5821c = N'nvarchar(MAX)'
SET
  @SourceEntityID_79e5821c = '13248F34-2837-EF11-86D4-6045BDEE16E6'
SET
  @SourceFieldName_79e5821c = N'UserID'
SET
  @IsComputed_79e5821c = 0
SET
  @IsSummary_79e5821c = 0
SET
  @DetectionMethod_79e5821c = N'Manual'
SET
  @ID_79e5821c = 'FC47BF02-BE51-4C7C-9132-1C20ADC4FEBD'
EXEC [${flyway:defaultSchema}].spUpdateQueryField @QueryID = @QueryID_79e5821c,
  @Name = @Name_79e5821c,
  @Description = @Description_79e5821c,
  @Sequence = @Sequence_79e5821c,
  @SQLBaseType = @SQLBaseType_79e5821c,
  @SQLFullType = @SQLFullType_79e5821c,
  @SourceEntityID = @SourceEntityID_79e5821c,
  @SourceFieldName = @SourceFieldName_79e5821c,
  @IsComputed = @IsComputed_79e5821c,
  @ComputationDescription = @ComputationDescription_79e5821c,
  @IsSummary = @IsSummary_79e5821c,
  @SummaryDescription = @SummaryDescription_79e5821c,
  @DetectionMethod = @DetectionMethod_79e5821c,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_79e5821c,
  @ID = @ID_79e5821c;

-- Save MJ: Query Fields (core SP call only)
DECLARE @QueryID_94f9c274 UNIQUEIDENTIFIER,
@Name_94f9c274 NVARCHAR(255),
@Description_94f9c274 NVARCHAR(MAX),
@Sequence_94f9c274 INT,
@SQLBaseType_94f9c274 NVARCHAR(50),
@SQLFullType_94f9c274 NVARCHAR(100),
@SourceEntityID_94f9c274 UNIQUEIDENTIFIER,
@SourceFieldName_94f9c274 NVARCHAR(255),
@IsComputed_94f9c274 BIT,
@ComputationDescription_94f9c274 NVARCHAR(MAX),
@IsSummary_94f9c274 BIT,
@SummaryDescription_94f9c274 NVARCHAR(MAX),
@DetectionMethod_94f9c274 NVARCHAR(50),
@AutoDetectConfidenceScore_94f9c274 DECIMAL(3, 2),
@ID_94f9c274 UNIQUEIDENTIFIER
SET
  @QueryID_94f9c274 = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_94f9c274 = N'MessagesJSON'
SET
  @Description_94f9c274 = N'Conversation details as JSON array with ratings included'
SET
  @Sequence_94f9c274 = 4
SET
  @SQLBaseType_94f9c274 = N'nvarchar'
SET
  @SQLFullType_94f9c274 = N'nvarchar(MAX)'
SET
  @IsComputed_94f9c274 = 1
SET
  @ComputationDescription_94f9c274 = N'FOR JSON PATH subquery aggregating conversation details with ratings'
SET
  @IsSummary_94f9c274 = 0
SET
  @DetectionMethod_94f9c274 = N'Manual'
SET
  @ID_94f9c274 = 'CB76A976-AE46-454B-B837-90A78B74ED50'
EXEC [${flyway:defaultSchema}].spUpdateQueryField @QueryID = @QueryID_94f9c274,
  @Name = @Name_94f9c274,
  @Description = @Description_94f9c274,
  @Sequence = @Sequence_94f9c274,
  @SQLBaseType = @SQLBaseType_94f9c274,
  @SQLFullType = @SQLFullType_94f9c274,
  @SourceEntityID = @SourceEntityID_94f9c274,
  @SourceFieldName = @SourceFieldName_94f9c274,
  @IsComputed = @IsComputed_94f9c274,
  @ComputationDescription = @ComputationDescription_94f9c274,
  @IsSummary = @IsSummary_94f9c274,
  @SummaryDescription = @SummaryDescription_94f9c274,
  @DetectionMethod = @DetectionMethod_94f9c274,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_94f9c274,
  @ID = @ID_94f9c274;

-- Save MJ: Query Fields (core SP call only)
DECLARE @QueryID_3b9abac1 UNIQUEIDENTIFIER,
@Name_3b9abac1 NVARCHAR(255),
@Description_3b9abac1 NVARCHAR(MAX),
@Sequence_3b9abac1 INT,
@SQLBaseType_3b9abac1 NVARCHAR(50),
@SQLFullType_3b9abac1 NVARCHAR(100),
@SourceEntityID_3b9abac1 UNIQUEIDENTIFIER,
@SourceFieldName_3b9abac1 NVARCHAR(255),
@IsComputed_3b9abac1 BIT,
@ComputationDescription_3b9abac1 NVARCHAR(MAX),
@IsSummary_3b9abac1 BIT,
@SummaryDescription_3b9abac1 NVARCHAR(MAX),
@DetectionMethod_3b9abac1 NVARCHAR(50),
@AutoDetectConfidenceScore_3b9abac1 DECIMAL(3, 2),
@ID_3b9abac1 UNIQUEIDENTIFIER
SET
  @QueryID_3b9abac1 = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_3b9abac1 = N'AgentRunID'
SET
  @Description_3b9abac1 = N'Most recent agent run ID for this conversation (for scope inheritance)'
SET
  @Sequence_3b9abac1 = 3
SET
  @SQLBaseType_3b9abac1 = N'nvarchar'
SET
  @SQLFullType_3b9abac1 = N'nvarchar(MAX)'
SET
  @IsComputed_3b9abac1 = 1
SET
  @ComputationDescription_3b9abac1 = N'Scalar subquery selecting TOP 1 ID from AIAgentRuns ordered by StartedAt DESC'
SET
  @IsSummary_3b9abac1 = 0
SET
  @DetectionMethod_3b9abac1 = N'Manual'
SET
  @ID_3b9abac1 = '4CAB47E1-C542-4CDD-9BEF-90BFC2786FF0'
EXEC [${flyway:defaultSchema}].spUpdateQueryField @QueryID = @QueryID_3b9abac1,
  @Name = @Name_3b9abac1,
  @Description = @Description_3b9abac1,
  @Sequence = @Sequence_3b9abac1,
  @SQLBaseType = @SQLBaseType_3b9abac1,
  @SQLFullType = @SQLFullType_3b9abac1,
  @SourceEntityID = @SourceEntityID_3b9abac1,
  @SourceFieldName = @SourceFieldName_3b9abac1,
  @IsComputed = @IsComputed_3b9abac1,
  @ComputationDescription = @ComputationDescription_3b9abac1,
  @IsSummary = @IsSummary_3b9abac1,
  @SummaryDescription = @SummaryDescription_3b9abac1,
  @DetectionMethod = @DetectionMethod_3b9abac1,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_3b9abac1,
  @ID = @ID_3b9abac1;

-- Save MJ: Query Fields (core SP call only)
DECLARE @QueryID_fb90d169 UNIQUEIDENTIFIER,
@Name_fb90d169 NVARCHAR(255),
@Description_fb90d169 NVARCHAR(MAX),
@Sequence_fb90d169 INT,
@SQLBaseType_fb90d169 NVARCHAR(50),
@SQLFullType_fb90d169 NVARCHAR(100),
@SourceEntityID_fb90d169 UNIQUEIDENTIFIER,
@SourceFieldName_fb90d169 NVARCHAR(255),
@IsComputed_fb90d169 BIT,
@ComputationDescription_fb90d169 NVARCHAR(MAX),
@IsSummary_fb90d169 BIT,
@SummaryDescription_fb90d169 NVARCHAR(MAX),
@DetectionMethod_fb90d169 NVARCHAR(50),
@AutoDetectConfidenceScore_fb90d169 DECIMAL(3, 2),
@ID_fb90d169 UNIQUEIDENTIFIER
SET
  @QueryID_fb90d169 = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_fb90d169 = N'HasNegativeRating'
SET
  @Description_fb90d169 = N'Flag indicating if conversation has any rating <= 3'
SET
  @Sequence_fb90d169 = 6
SET
  @SQLBaseType_fb90d169 = N'bit'
SET
  @SQLFullType_fb90d169 = N'bit'
SET
  @IsComputed_fb90d169 = 1
SET
  @ComputationDescription_fb90d169 = N'CASE expression checking for existence of ratings <= 3'
SET
  @IsSummary_fb90d169 = 0
SET
  @DetectionMethod_fb90d169 = N'Manual'
SET
  @ID_fb90d169 = '5A464544-F105-4F17-94F8-A0423F150812'
EXEC [${flyway:defaultSchema}].spUpdateQueryField @QueryID = @QueryID_fb90d169,
  @Name = @Name_fb90d169,
  @Description = @Description_fb90d169,
  @Sequence = @Sequence_fb90d169,
  @SQLBaseType = @SQLBaseType_fb90d169,
  @SQLFullType = @SQLFullType_fb90d169,
  @SourceEntityID = @SourceEntityID_fb90d169,
  @SourceFieldName = @SourceFieldName_fb90d169,
  @IsComputed = @IsComputed_fb90d169,
  @ComputationDescription = @ComputationDescription_fb90d169,
  @IsSummary = @IsSummary_fb90d169,
  @SummaryDescription = @SummaryDescription_fb90d169,
  @DetectionMethod = @DetectionMethod_fb90d169,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_fb90d169,
  @ID = @ID_fb90d169;

-- Save MJ: Query Fields (core SP call only)
DECLARE @QueryID_b17d6415 UNIQUEIDENTIFIER,
@Name_b17d6415 NVARCHAR(255),
@Description_b17d6415 NVARCHAR(MAX),
@Sequence_b17d6415 INT,
@SQLBaseType_b17d6415 NVARCHAR(50),
@SQLFullType_b17d6415 NVARCHAR(100),
@SourceEntityID_b17d6415 UNIQUEIDENTIFIER,
@SourceFieldName_b17d6415 NVARCHAR(255),
@IsComputed_b17d6415 BIT,
@ComputationDescription_b17d6415 NVARCHAR(MAX),
@IsSummary_b17d6415 BIT,
@SummaryDescription_b17d6415 NVARCHAR(MAX),
@DetectionMethod_b17d6415 NVARCHAR(50),
@AutoDetectConfidenceScore_b17d6415 DECIMAL(3, 2),
@ID_b17d6415 UNIQUEIDENTIFIER
SET
  @QueryID_b17d6415 = '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC'
SET
  @Name_b17d6415 = N'IsUnrated'
SET
  @Description_b17d6415 = N'Flag indicating if conversation has no ratings'
SET
  @Sequence_b17d6415 = 7
SET
  @SQLBaseType_b17d6415 = N'bit'
SET
  @SQLFullType_b17d6415 = N'bit'
SET
  @IsComputed_b17d6415 = 1
SET
  @ComputationDescription_b17d6415 = N'CASE expression checking for absence of any ratings'
SET
  @IsSummary_b17d6415 = 0
SET
  @DetectionMethod_b17d6415 = N'Manual'
SET
  @ID_b17d6415 = 'F11B7F22-EF85-418E-855A-AC0EDBEE014A'
EXEC [${flyway:defaultSchema}].spUpdateQueryField @QueryID = @QueryID_b17d6415,
  @Name = @Name_b17d6415,
  @Description = @Description_b17d6415,
  @Sequence = @Sequence_b17d6415,
  @SQLBaseType = @SQLBaseType_b17d6415,
  @SQLFullType = @SQLFullType_b17d6415,
  @SourceEntityID = @SourceEntityID_b17d6415,
  @SourceFieldName = @SourceFieldName_b17d6415,
  @IsComputed = @IsComputed_b17d6415,
  @ComputationDescription = @ComputationDescription_b17d6415,
  @IsSummary = @IsSummary_b17d6415,
  @SummaryDescription = @SummaryDescription_b17d6415,
  @DetectionMethod = @DetectionMethod_b17d6415,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_b17d6415,
  @ID = @ID_b17d6415;

-- Save MJ: Queries (core SP call only)
DECLARE @Name_6a91f840 NVARCHAR(255),
@CategoryID_6a91f840 UNIQUEIDENTIFIER,
@UserQuestion_6a91f840 NVARCHAR(MAX),
@Description_6a91f840 NVARCHAR(MAX),
@SQL_6a91f840 NVARCHAR(MAX),
@TechnicalDescription_6a91f840 NVARCHAR(MAX),
@OriginalSQL_6a91f840 NVARCHAR(MAX),
@Feedback_6a91f840 NVARCHAR(MAX),
@Status_6a91f840 NVARCHAR(15),
@QualityRank_6a91f840 INT,
@ExecutionCostRank_6a91f840 INT,
@UsesTemplate_6a91f840 BIT,
@AuditQueryRuns_6a91f840 BIT,
@CacheEnabled_6a91f840 BIT,
@CacheTTLMinutes_6a91f840 INT,
@CacheMaxSize_6a91f840 INT,
@EmbeddingVector_6a91f840 NVARCHAR(MAX),
@EmbeddingModelID_6a91f840 UNIQUEIDENTIFIER,
@CacheValidationSQL_6a91f840 NVARCHAR(MAX),
@ID_6a91f840 UNIQUEIDENTIFIER
SET
  @Name_6a91f840 = N'Server Installed Version History'
SET
  @CategoryID_6a91f840 = '17AFCCEC-6A37-EF11-86D4-000D3A4E707E'
SET
  @UserQuestion_6a91f840 = N'Show me a list of versions installed on the server in order of most recent version first'
SET
  @SQL_6a91f840 = N'SELECT * FROM [${flyway:defaultSchema}].flyway_schema_history ORDER BY installed_on DESC'
SET
  @Status_6a91f840 = N'Approved'
SET
  @QualityRank_6a91f840 = 9
SET
  @ExecutionCostRank_6a91f840 = 3
SET
  @UsesTemplate_6a91f840 = 1
SET
  @AuditQueryRuns_6a91f840 = 0
SET
  @CacheEnabled_6a91f840 = 0
SET
  @ID_6a91f840 = '23F8423E-F36B-1410-8D9C-00021F8B792E'
EXEC [${flyway:defaultSchema}].spUpdateQuery @Name = @Name_6a91f840,
  @CategoryID = @CategoryID_6a91f840,
  @UserQuestion = @UserQuestion_6a91f840,
  @Description = @Description_6a91f840,
  @SQL = @SQL_6a91f840,
  @TechnicalDescription = @TechnicalDescription_6a91f840,
  @OriginalSQL = @OriginalSQL_6a91f840,
  @Feedback = @Feedback_6a91f840,
  @Status = @Status_6a91f840,
  @QualityRank = @QualityRank_6a91f840,
  @ExecutionCostRank = @ExecutionCostRank_6a91f840,
  @UsesTemplate = @UsesTemplate_6a91f840,
  @AuditQueryRuns = @AuditQueryRuns_6a91f840,
  @CacheEnabled = @CacheEnabled_6a91f840,
  @CacheTTLMinutes = @CacheTTLMinutes_6a91f840,
  @CacheMaxSize = @CacheMaxSize_6a91f840,
  @EmbeddingVector = @EmbeddingVector_6a91f840,
  @EmbeddingModelID = @EmbeddingModelID_6a91f840,
  @CacheValidationSQL = @CacheValidationSQL_6a91f840,
  @ID = @ID_6a91f840;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_109dc3b9 UNIQUEIDENTIFIER,
@QueryID_109dc3b9 UNIQUEIDENTIFIER,
@Name_109dc3b9 NVARCHAR(255),
@Description_109dc3b9 NVARCHAR(MAX),
@Sequence_109dc3b9 INT,
@SQLBaseType_109dc3b9 NVARCHAR(50),
@SQLFullType_109dc3b9 NVARCHAR(100),
@SourceEntityID_109dc3b9 UNIQUEIDENTIFIER,
@SourceFieldName_109dc3b9 NVARCHAR(255),
@IsComputed_109dc3b9 BIT,
@ComputationDescription_109dc3b9 NVARCHAR(MAX),
@IsSummary_109dc3b9 BIT,
@SummaryDescription_109dc3b9 NVARCHAR(MAX),
@DetectionMethod_109dc3b9 NVARCHAR(50),
@AutoDetectConfidenceScore_109dc3b9 DECIMAL(3, 2)
SET
  @ID_109dc3b9 = '31554b62-5505-4d79-acbf-9cc922a7d2cc'
SET
  @QueryID_109dc3b9 = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_109dc3b9 = N'installed_rank'
SET
  @Description_109dc3b9 = N'Installation rank of the schema history entry'
SET
  @Sequence_109dc3b9 = 1
SET
  @SQLBaseType_109dc3b9 = N'decimal'
SET
  @SQLFullType_109dc3b9 = N'decimal(18,2)'
SET
  @IsComputed_109dc3b9 = 0
SET
  @IsSummary_109dc3b9 = 0
SET
  @DetectionMethod_109dc3b9 = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_109dc3b9,
  @QueryID = @QueryID_109dc3b9,
  @Name = @Name_109dc3b9,
  @Description = @Description_109dc3b9,
  @Sequence = @Sequence_109dc3b9,
  @SQLBaseType = @SQLBaseType_109dc3b9,
  @SQLFullType = @SQLFullType_109dc3b9,
  @SourceEntityID = @SourceEntityID_109dc3b9,
  @SourceFieldName = @SourceFieldName_109dc3b9,
  @IsComputed = @IsComputed_109dc3b9,
  @ComputationDescription = @ComputationDescription_109dc3b9,
  @IsSummary = @IsSummary_109dc3b9,
  @SummaryDescription = @SummaryDescription_109dc3b9,
  @DetectionMethod = @DetectionMethod_109dc3b9,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_109dc3b9;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_6afdf9b5 UNIQUEIDENTIFIER,
@QueryID_6afdf9b5 UNIQUEIDENTIFIER,
@Name_6afdf9b5 NVARCHAR(255),
@Description_6afdf9b5 NVARCHAR(MAX),
@Sequence_6afdf9b5 INT,
@SQLBaseType_6afdf9b5 NVARCHAR(50),
@SQLFullType_6afdf9b5 NVARCHAR(100),
@SourceEntityID_6afdf9b5 UNIQUEIDENTIFIER,
@SourceFieldName_6afdf9b5 NVARCHAR(255),
@IsComputed_6afdf9b5 BIT,
@ComputationDescription_6afdf9b5 NVARCHAR(MAX),
@IsSummary_6afdf9b5 BIT,
@SummaryDescription_6afdf9b5 NVARCHAR(MAX),
@DetectionMethod_6afdf9b5 NVARCHAR(50),
@AutoDetectConfidenceScore_6afdf9b5 DECIMAL(3, 2)
SET
  @ID_6afdf9b5 = '010a01a1-1a9e-49ae-a9b2-954ac057bb73'
SET
  @QueryID_6afdf9b5 = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_6afdf9b5 = N'version'
SET
  @Description_6afdf9b5 = N'Version of the schema migration'
SET
  @Sequence_6afdf9b5 = 2
SET
  @SQLBaseType_6afdf9b5 = N'nvarchar'
SET
  @SQLFullType_6afdf9b5 = N'nvarchar(MAX)'
SET
  @IsComputed_6afdf9b5 = 0
SET
  @IsSummary_6afdf9b5 = 0
SET
  @DetectionMethod_6afdf9b5 = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_6afdf9b5,
  @QueryID = @QueryID_6afdf9b5,
  @Name = @Name_6afdf9b5,
  @Description = @Description_6afdf9b5,
  @Sequence = @Sequence_6afdf9b5,
  @SQLBaseType = @SQLBaseType_6afdf9b5,
  @SQLFullType = @SQLFullType_6afdf9b5,
  @SourceEntityID = @SourceEntityID_6afdf9b5,
  @SourceFieldName = @SourceFieldName_6afdf9b5,
  @IsComputed = @IsComputed_6afdf9b5,
  @ComputationDescription = @ComputationDescription_6afdf9b5,
  @IsSummary = @IsSummary_6afdf9b5,
  @SummaryDescription = @SummaryDescription_6afdf9b5,
  @DetectionMethod = @DetectionMethod_6afdf9b5,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_6afdf9b5;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_89ee1cad UNIQUEIDENTIFIER,
@QueryID_89ee1cad UNIQUEIDENTIFIER,
@Name_89ee1cad NVARCHAR(255),
@Description_89ee1cad NVARCHAR(MAX),
@Sequence_89ee1cad INT,
@SQLBaseType_89ee1cad NVARCHAR(50),
@SQLFullType_89ee1cad NVARCHAR(100),
@SourceEntityID_89ee1cad UNIQUEIDENTIFIER,
@SourceFieldName_89ee1cad NVARCHAR(255),
@IsComputed_89ee1cad BIT,
@ComputationDescription_89ee1cad NVARCHAR(MAX),
@IsSummary_89ee1cad BIT,
@SummaryDescription_89ee1cad NVARCHAR(MAX),
@DetectionMethod_89ee1cad NVARCHAR(50),
@AutoDetectConfidenceScore_89ee1cad DECIMAL(3, 2)
SET
  @ID_89ee1cad = '6d2695f4-80a6-4d52-b9e6-495e2dc0f63b'
SET
  @QueryID_89ee1cad = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_89ee1cad = N'description'
SET
  @Description_89ee1cad = N'Description of the schema migration'
SET
  @Sequence_89ee1cad = 3
SET
  @SQLBaseType_89ee1cad = N'nvarchar'
SET
  @SQLFullType_89ee1cad = N'nvarchar(MAX)'
SET
  @IsComputed_89ee1cad = 0
SET
  @IsSummary_89ee1cad = 0
SET
  @DetectionMethod_89ee1cad = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_89ee1cad,
  @QueryID = @QueryID_89ee1cad,
  @Name = @Name_89ee1cad,
  @Description = @Description_89ee1cad,
  @Sequence = @Sequence_89ee1cad,
  @SQLBaseType = @SQLBaseType_89ee1cad,
  @SQLFullType = @SQLFullType_89ee1cad,
  @SourceEntityID = @SourceEntityID_89ee1cad,
  @SourceFieldName = @SourceFieldName_89ee1cad,
  @IsComputed = @IsComputed_89ee1cad,
  @ComputationDescription = @ComputationDescription_89ee1cad,
  @IsSummary = @IsSummary_89ee1cad,
  @SummaryDescription = @SummaryDescription_89ee1cad,
  @DetectionMethod = @DetectionMethod_89ee1cad,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_89ee1cad;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_f014870d UNIQUEIDENTIFIER,
@QueryID_f014870d UNIQUEIDENTIFIER,
@Name_f014870d NVARCHAR(255),
@Description_f014870d NVARCHAR(MAX),
@Sequence_f014870d INT,
@SQLBaseType_f014870d NVARCHAR(50),
@SQLFullType_f014870d NVARCHAR(100),
@SourceEntityID_f014870d UNIQUEIDENTIFIER,
@SourceFieldName_f014870d NVARCHAR(255),
@IsComputed_f014870d BIT,
@ComputationDescription_f014870d NVARCHAR(MAX),
@IsSummary_f014870d BIT,
@SummaryDescription_f014870d NVARCHAR(MAX),
@DetectionMethod_f014870d NVARCHAR(50),
@AutoDetectConfidenceScore_f014870d DECIMAL(3, 2)
SET
  @ID_f014870d = '8c57285f-f2f6-4171-8740-d9b7c5f42401'
SET
  @QueryID_f014870d = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_f014870d = N'type'
SET
  @Description_f014870d = N'Type of the schema migration'
SET
  @Sequence_f014870d = 4
SET
  @SQLBaseType_f014870d = N'nvarchar'
SET
  @SQLFullType_f014870d = N'nvarchar(MAX)'
SET
  @IsComputed_f014870d = 0
SET
  @IsSummary_f014870d = 0
SET
  @DetectionMethod_f014870d = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_f014870d,
  @QueryID = @QueryID_f014870d,
  @Name = @Name_f014870d,
  @Description = @Description_f014870d,
  @Sequence = @Sequence_f014870d,
  @SQLBaseType = @SQLBaseType_f014870d,
  @SQLFullType = @SQLFullType_f014870d,
  @SourceEntityID = @SourceEntityID_f014870d,
  @SourceFieldName = @SourceFieldName_f014870d,
  @IsComputed = @IsComputed_f014870d,
  @ComputationDescription = @ComputationDescription_f014870d,
  @IsSummary = @IsSummary_f014870d,
  @SummaryDescription = @SummaryDescription_f014870d,
  @DetectionMethod = @DetectionMethod_f014870d,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_f014870d;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_bf829708 UNIQUEIDENTIFIER,
@QueryID_bf829708 UNIQUEIDENTIFIER,
@Name_bf829708 NVARCHAR(255),
@Description_bf829708 NVARCHAR(MAX),
@Sequence_bf829708 INT,
@SQLBaseType_bf829708 NVARCHAR(50),
@SQLFullType_bf829708 NVARCHAR(100),
@SourceEntityID_bf829708 UNIQUEIDENTIFIER,
@SourceFieldName_bf829708 NVARCHAR(255),
@IsComputed_bf829708 BIT,
@ComputationDescription_bf829708 NVARCHAR(MAX),
@IsSummary_bf829708 BIT,
@SummaryDescription_bf829708 NVARCHAR(MAX),
@DetectionMethod_bf829708 NVARCHAR(50),
@AutoDetectConfidenceScore_bf829708 DECIMAL(3, 2)
SET
  @ID_bf829708 = '54f49295-7671-4a18-82db-386757f3e941'
SET
  @QueryID_bf829708 = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_bf829708 = N'script'
SET
  @Description_bf829708 = N'Script name for the migration'
SET
  @Sequence_bf829708 = 5
SET
  @SQLBaseType_bf829708 = N'nvarchar'
SET
  @SQLFullType_bf829708 = N'nvarchar(MAX)'
SET
  @IsComputed_bf829708 = 0
SET
  @IsSummary_bf829708 = 0
SET
  @DetectionMethod_bf829708 = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_bf829708,
  @QueryID = @QueryID_bf829708,
  @Name = @Name_bf829708,
  @Description = @Description_bf829708,
  @Sequence = @Sequence_bf829708,
  @SQLBaseType = @SQLBaseType_bf829708,
  @SQLFullType = @SQLFullType_bf829708,
  @SourceEntityID = @SourceEntityID_bf829708,
  @SourceFieldName = @SourceFieldName_bf829708,
  @IsComputed = @IsComputed_bf829708,
  @ComputationDescription = @ComputationDescription_bf829708,
  @IsSummary = @IsSummary_bf829708,
  @SummaryDescription = @SummaryDescription_bf829708,
  @DetectionMethod = @DetectionMethod_bf829708,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_bf829708;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_500632c4 UNIQUEIDENTIFIER,
@QueryID_500632c4 UNIQUEIDENTIFIER,
@Name_500632c4 NVARCHAR(255),
@Description_500632c4 NVARCHAR(MAX),
@Sequence_500632c4 INT,
@SQLBaseType_500632c4 NVARCHAR(50),
@SQLFullType_500632c4 NVARCHAR(100),
@SourceEntityID_500632c4 UNIQUEIDENTIFIER,
@SourceFieldName_500632c4 NVARCHAR(255),
@IsComputed_500632c4 BIT,
@ComputationDescription_500632c4 NVARCHAR(MAX),
@IsSummary_500632c4 BIT,
@SummaryDescription_500632c4 NVARCHAR(MAX),
@DetectionMethod_500632c4 NVARCHAR(50),
@AutoDetectConfidenceScore_500632c4 DECIMAL(3, 2)
SET
  @ID_500632c4 = 'fb54c641-d2ec-4b1c-8c46-8c10683f5581'
SET
  @QueryID_500632c4 = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_500632c4 = N'checksum'
SET
  @Description_500632c4 = N'Checksum of the migration script'
SET
  @Sequence_500632c4 = 6
SET
  @SQLBaseType_500632c4 = N'decimal'
SET
  @SQLFullType_500632c4 = N'decimal(18,2)'
SET
  @IsComputed_500632c4 = 0
SET
  @IsSummary_500632c4 = 0
SET
  @DetectionMethod_500632c4 = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_500632c4,
  @QueryID = @QueryID_500632c4,
  @Name = @Name_500632c4,
  @Description = @Description_500632c4,
  @Sequence = @Sequence_500632c4,
  @SQLBaseType = @SQLBaseType_500632c4,
  @SQLFullType = @SQLFullType_500632c4,
  @SourceEntityID = @SourceEntityID_500632c4,
  @SourceFieldName = @SourceFieldName_500632c4,
  @IsComputed = @IsComputed_500632c4,
  @ComputationDescription = @ComputationDescription_500632c4,
  @IsSummary = @IsSummary_500632c4,
  @SummaryDescription = @SummaryDescription_500632c4,
  @DetectionMethod = @DetectionMethod_500632c4,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_500632c4;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_9cfdde54 UNIQUEIDENTIFIER,
@QueryID_9cfdde54 UNIQUEIDENTIFIER,
@Name_9cfdde54 NVARCHAR(255),
@Description_9cfdde54 NVARCHAR(MAX),
@Sequence_9cfdde54 INT,
@SQLBaseType_9cfdde54 NVARCHAR(50),
@SQLFullType_9cfdde54 NVARCHAR(100),
@SourceEntityID_9cfdde54 UNIQUEIDENTIFIER,
@SourceFieldName_9cfdde54 NVARCHAR(255),
@IsComputed_9cfdde54 BIT,
@ComputationDescription_9cfdde54 NVARCHAR(MAX),
@IsSummary_9cfdde54 BIT,
@SummaryDescription_9cfdde54 NVARCHAR(MAX),
@DetectionMethod_9cfdde54 NVARCHAR(50),
@AutoDetectConfidenceScore_9cfdde54 DECIMAL(3, 2)
SET
  @ID_9cfdde54 = 'e995b5fa-994b-4e21-9434-37140606fd19'
SET
  @QueryID_9cfdde54 = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_9cfdde54 = N'installed_by'
SET
  @Description_9cfdde54 = N'User who installed the migration'
SET
  @Sequence_9cfdde54 = 7
SET
  @SQLBaseType_9cfdde54 = N'nvarchar'
SET
  @SQLFullType_9cfdde54 = N'nvarchar(MAX)'
SET
  @IsComputed_9cfdde54 = 0
SET
  @IsSummary_9cfdde54 = 0
SET
  @DetectionMethod_9cfdde54 = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_9cfdde54,
  @QueryID = @QueryID_9cfdde54,
  @Name = @Name_9cfdde54,
  @Description = @Description_9cfdde54,
  @Sequence = @Sequence_9cfdde54,
  @SQLBaseType = @SQLBaseType_9cfdde54,
  @SQLFullType = @SQLFullType_9cfdde54,
  @SourceEntityID = @SourceEntityID_9cfdde54,
  @SourceFieldName = @SourceFieldName_9cfdde54,
  @IsComputed = @IsComputed_9cfdde54,
  @ComputationDescription = @ComputationDescription_9cfdde54,
  @IsSummary = @IsSummary_9cfdde54,
  @SummaryDescription = @SummaryDescription_9cfdde54,
  @DetectionMethod = @DetectionMethod_9cfdde54,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_9cfdde54;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_ac53fe7c UNIQUEIDENTIFIER,
@QueryID_ac53fe7c UNIQUEIDENTIFIER,
@Name_ac53fe7c NVARCHAR(255),
@Description_ac53fe7c NVARCHAR(MAX),
@Sequence_ac53fe7c INT,
@SQLBaseType_ac53fe7c NVARCHAR(50),
@SQLFullType_ac53fe7c NVARCHAR(100),
@SourceEntityID_ac53fe7c UNIQUEIDENTIFIER,
@SourceFieldName_ac53fe7c NVARCHAR(255),
@IsComputed_ac53fe7c BIT,
@ComputationDescription_ac53fe7c NVARCHAR(MAX),
@IsSummary_ac53fe7c BIT,
@SummaryDescription_ac53fe7c NVARCHAR(MAX),
@DetectionMethod_ac53fe7c NVARCHAR(50),
@AutoDetectConfidenceScore_ac53fe7c DECIMAL(3, 2)
SET
  @ID_ac53fe7c = '25fff33e-f6b3-4bff-ad33-630eb7ca4818'
SET
  @QueryID_ac53fe7c = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_ac53fe7c = N'installed_on'
SET
  @Description_ac53fe7c = N'Timestamp when the migration was installed'
SET
  @Sequence_ac53fe7c = 8
SET
  @SQLBaseType_ac53fe7c = N'datetime'
SET
  @SQLFullType_ac53fe7c = N'datetime'
SET
  @IsComputed_ac53fe7c = 0
SET
  @IsSummary_ac53fe7c = 0
SET
  @DetectionMethod_ac53fe7c = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_ac53fe7c,
  @QueryID = @QueryID_ac53fe7c,
  @Name = @Name_ac53fe7c,
  @Description = @Description_ac53fe7c,
  @Sequence = @Sequence_ac53fe7c,
  @SQLBaseType = @SQLBaseType_ac53fe7c,
  @SQLFullType = @SQLFullType_ac53fe7c,
  @SourceEntityID = @SourceEntityID_ac53fe7c,
  @SourceFieldName = @SourceFieldName_ac53fe7c,
  @IsComputed = @IsComputed_ac53fe7c,
  @ComputationDescription = @ComputationDescription_ac53fe7c,
  @IsSummary = @IsSummary_ac53fe7c,
  @SummaryDescription = @SummaryDescription_ac53fe7c,
  @DetectionMethod = @DetectionMethod_ac53fe7c,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_ac53fe7c;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_a7b01950 UNIQUEIDENTIFIER,
@QueryID_a7b01950 UNIQUEIDENTIFIER,
@Name_a7b01950 NVARCHAR(255),
@Description_a7b01950 NVARCHAR(MAX),
@Sequence_a7b01950 INT,
@SQLBaseType_a7b01950 NVARCHAR(50),
@SQLFullType_a7b01950 NVARCHAR(100),
@SourceEntityID_a7b01950 UNIQUEIDENTIFIER,
@SourceFieldName_a7b01950 NVARCHAR(255),
@IsComputed_a7b01950 BIT,
@ComputationDescription_a7b01950 NVARCHAR(MAX),
@IsSummary_a7b01950 BIT,
@SummaryDescription_a7b01950 NVARCHAR(MAX),
@DetectionMethod_a7b01950 NVARCHAR(50),
@AutoDetectConfidenceScore_a7b01950 DECIMAL(3, 2)
SET
  @ID_a7b01950 = '40d852de-7370-4f9f-ab12-83abca2d08fb'
SET
  @QueryID_a7b01950 = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_a7b01950 = N'execution_time'
SET
  @Description_a7b01950 = N'Execution time of the migration in milliseconds'
SET
  @Sequence_a7b01950 = 9
SET
  @SQLBaseType_a7b01950 = N'decimal'
SET
  @SQLFullType_a7b01950 = N'decimal(18,2)'
SET
  @IsComputed_a7b01950 = 0
SET
  @IsSummary_a7b01950 = 0
SET
  @DetectionMethod_a7b01950 = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_a7b01950,
  @QueryID = @QueryID_a7b01950,
  @Name = @Name_a7b01950,
  @Description = @Description_a7b01950,
  @Sequence = @Sequence_a7b01950,
  @SQLBaseType = @SQLBaseType_a7b01950,
  @SQLFullType = @SQLFullType_a7b01950,
  @SourceEntityID = @SourceEntityID_a7b01950,
  @SourceFieldName = @SourceFieldName_a7b01950,
  @IsComputed = @IsComputed_a7b01950,
  @ComputationDescription = @ComputationDescription_a7b01950,
  @IsSummary = @IsSummary_a7b01950,
  @SummaryDescription = @SummaryDescription_a7b01950,
  @DetectionMethod = @DetectionMethod_a7b01950,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_a7b01950;

-- Save MJ: Query Fields (core SP call only)
DECLARE @ID_4af1f21e UNIQUEIDENTIFIER,
@QueryID_4af1f21e UNIQUEIDENTIFIER,
@Name_4af1f21e NVARCHAR(255),
@Description_4af1f21e NVARCHAR(MAX),
@Sequence_4af1f21e INT,
@SQLBaseType_4af1f21e NVARCHAR(50),
@SQLFullType_4af1f21e NVARCHAR(100),
@SourceEntityID_4af1f21e UNIQUEIDENTIFIER,
@SourceFieldName_4af1f21e NVARCHAR(255),
@IsComputed_4af1f21e BIT,
@ComputationDescription_4af1f21e NVARCHAR(MAX),
@IsSummary_4af1f21e BIT,
@SummaryDescription_4af1f21e NVARCHAR(MAX),
@DetectionMethod_4af1f21e NVARCHAR(50),
@AutoDetectConfidenceScore_4af1f21e DECIMAL(3, 2)
SET
  @ID_4af1f21e = '61b03a6b-e72a-413f-8145-22ab9d843911'
SET
  @QueryID_4af1f21e = '23F8423E-F36B-1410-8D9C-00021F8B792E'
SET
  @Name_4af1f21e = N'success'
SET
  @Description_4af1f21e = N'Whether the migration was successful'
SET
  @Sequence_4af1f21e = 10
SET
  @SQLBaseType_4af1f21e = N'bit'
SET
  @SQLFullType_4af1f21e = N'bit'
SET
  @IsComputed_4af1f21e = 0
SET
  @IsSummary_4af1f21e = 0
SET
  @DetectionMethod_4af1f21e = N'Manual'
EXEC [${flyway:defaultSchema}].spCreateQueryField @ID = @ID_4af1f21e,
  @QueryID = @QueryID_4af1f21e,
  @Name = @Name_4af1f21e,
  @Description = @Description_4af1f21e,
  @Sequence = @Sequence_4af1f21e,
  @SQLBaseType = @SQLBaseType_4af1f21e,
  @SQLFullType = @SQLFullType_4af1f21e,
  @SourceEntityID = @SourceEntityID_4af1f21e,
  @SourceFieldName = @SourceFieldName_4af1f21e,
  @IsComputed = @IsComputed_4af1f21e,
  @ComputationDescription = @ComputationDescription_4af1f21e,
  @IsSummary = @IsSummary_4af1f21e,
  @SummaryDescription = @SummaryDescription_4af1f21e,
  @DetectionMethod = @DetectionMethod_4af1f21e,
  @AutoDetectConfidenceScore = @AutoDetectConfidenceScore_4af1f21e;

-- Save MJ: Queries (core SP call only)
DECLARE @Name_df9042ed NVARCHAR(255),
@CategoryID_df9042ed UNIQUEIDENTIFIER,
@UserQuestion_df9042ed NVARCHAR(MAX),
@Description_df9042ed NVARCHAR(MAX),
@SQL_df9042ed NVARCHAR(MAX),
@TechnicalDescription_df9042ed NVARCHAR(MAX),
@OriginalSQL_df9042ed NVARCHAR(MAX),
@Feedback_df9042ed NVARCHAR(MAX),
@Status_df9042ed NVARCHAR(15),
@QualityRank_df9042ed INT,
@ExecutionCostRank_df9042ed INT,
@UsesTemplate_df9042ed BIT,
@AuditQueryRuns_df9042ed BIT,
@CacheEnabled_df9042ed BIT,
@CacheTTLMinutes_df9042ed INT,
@CacheMaxSize_df9042ed INT,
@EmbeddingVector_df9042ed NVARCHAR(MAX),
@EmbeddingModelID_df9042ed UNIQUEIDENTIFIER,
@CacheValidationSQL_df9042ed NVARCHAR(MAX),
@ID_df9042ed UNIQUEIDENTIFIER
SET
  @Name_df9042ed = N'Server Installed Version History'
SET
  @CategoryID_df9042ed = '17AFCCEC-6A37-EF11-86D4-000D3A4E707E'
SET
  @UserQuestion_df9042ed = N'Show me a list of versions installed on the server in order of most recent version first'
SET
  @SQL_df9042ed = N'SELECT * FROM [${flyway:defaultSchema}].flyway_schema_history ORDER BY installed_on DESC'
SET
  @Status_df9042ed = N'Approved'
SET
  @QualityRank_df9042ed = 9
SET
  @ExecutionCostRank_df9042ed = 3
SET
  @UsesTemplate_df9042ed = 0
SET
  @AuditQueryRuns_df9042ed = 0
SET
  @CacheEnabled_df9042ed = 0
SET
  @ID_df9042ed = '23F8423E-F36B-1410-8D9C-00021F8B792E'
EXEC [${flyway:defaultSchema}].spUpdateQuery @Name = @Name_df9042ed,
  @CategoryID = @CategoryID_df9042ed,
  @UserQuestion = @UserQuestion_df9042ed,
  @Description = @Description_df9042ed,
  @SQL = @SQL_df9042ed,
  @TechnicalDescription = @TechnicalDescription_df9042ed,
  @OriginalSQL = @OriginalSQL_df9042ed,
  @Feedback = @Feedback_df9042ed,
  @Status = @Status_df9042ed,
  @QualityRank = @QualityRank_df9042ed,
  @ExecutionCostRank = @ExecutionCostRank_df9042ed,
  @UsesTemplate = @UsesTemplate_df9042ed,
  @AuditQueryRuns = @AuditQueryRuns_df9042ed,
  @CacheEnabled = @CacheEnabled_df9042ed,
  @CacheTTLMinutes = @CacheTTLMinutes_df9042ed,
  @CacheMaxSize = @CacheMaxSize_df9042ed,
  @EmbeddingVector = @EmbeddingVector_df9042ed,
  @EmbeddingModelID = @EmbeddingModelID_df9042ed,
  @CacheValidationSQL = @CacheValidationSQL_df9042ed,
  @ID = @ID_df9042ed;


-- End of SQL Logging Session
-- Session ID: d95a3d1c-44fc-4464-8306-5fbd4c525d0f
-- Completed: 2026-02-18T17:19:55.667Z
-- Duration: 69830ms
-- Total Statements: 21
