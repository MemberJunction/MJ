-- ============================================================================
-- MemberJunction PostgreSQL Migration
-- Converted from SQL Server using TypeScript conversion pipeline
-- ============================================================================

-- Extensions
CREATE EXTENSION IF NOT EXISTS "pgcrypto";
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- Schema
CREATE SCHEMA IF NOT EXISTS __mj;
SET search_path TO __mj, public;

-- Ensure backslashes in string literals are treated literally (not as escape sequences)
SET standard_conforming_strings = on;

-- Implicit INTEGER -> BOOLEAN cast (SQL Server BIT columns accept 0/1 in INSERTs)
-- PostgreSQL has a built-in explicit-only INTEGER->bool cast. We upgrade it to implicit
-- so INSERT VALUES with 0/1 for BOOLEAN columns work like SQL Server BIT.
UPDATE pg_cast SET castcontext = 'i'
WHERE castsource = 'integer'::regtype AND casttarget = 'boolean'::regtype;


-- ===================== DDL: Tables, PKs, Indexes =====================


-- ===================== Helper Functions (fn*) =====================


-- ===================== Views =====================


-- ===================== Stored Procedures (sp*) =====================


-- ===================== Triggers =====================


-- ===================== Data (INSERT/UPDATE/DELETE) =====================

-- SQL Logging Session
-- Session ID: d95a3d1c-44fc-4464-8306-5fbd4c525d0f
-- Started: 2026-02-18T17:18:45.837Z
-- Description: MetadataSync push operation
-- Format: Migration-ready with Flyway schema placeholders
-- Generated by MemberJunction SQLServerDataProvider

-- Save MJ: Queries (core SP call only)
DO $$
DECLARE
  p_Name_11a01c1a VARCHAR(255);
  p_CategoryID_11a01c1a UUID;
  p_UserQuestion_11a01c1a TEXT;
  p_Description_11a01c1a TEXT;
  p_SQL_11a01c1a TEXT;
  p_TechnicalDescription_11a01c1a TEXT;
  p_OriginalSQL_11a01c1a TEXT;
  p_Feedback_11a01c1a TEXT;
  p_Status_11a01c1a VARCHAR(15);
  p_QualityRank_11a01c1a INTEGER;
  p_ExecutionCostRank_11a01c1a INTEGER;
  p_UsesTemplate_11a01c1a BOOLEAN;
  p_AuditQueryRuns_11a01c1a BOOLEAN;
  p_CacheEnabled_11a01c1a BOOLEAN;
  p_CacheTTLMinutes_11a01c1a INTEGER;
  p_CacheMaxSize_11a01c1a INTEGER;
  p_EmbeddingVector_11a01c1a TEXT;
  p_EmbeddingModelID_11a01c1a UUID;
  p_CacheValidationSQL_11a01c1a TEXT;
  p_ID_11a01c1a UUID;
BEGIN
  p_Name_11a01c1a := 'GetConversationsForMemoryManager';
  p_CategoryID_11a01c1a := '5609FBC7-381C-4F9C-9C74-04B52C1FF3DA';
  p_UserQuestion_11a01c1a := 'What conversations have new activity that need to be analyzed for memory extraction?';
  p_Description_11a01c1a := 'Returns all conversation data needed for memory extraction in a single query: conversations with new activity, their details with ratings, and linked agent runs for scope inheritance. Optimized to replace 4 separate sequential queries.';
  p_SQL_11a01c1a := '-- Get Conversations for Memory Manager - Single optimized query
-- Returns all data needed for memory extraction: conversations, details, ratings, and agent runs
-- Uses JSON aggregation to include related data without row multiplication
-- This replaces 4 separate queries with 1 query for better performance
--
-- Parameters:
--   @since (optional): ISO date string - only include conversations with new activity after this date
--   @agentIds: Comma-separated list of agent IDs that have memory enabled

SELECT
    c."ID" as ConversationID,
    c."UserID",

    -- Most recent agent run ID for this conversation (for scope inheritance)
    (
        SELECT TOP 1 ar."ID"
        FROM [__mj].[vwAIAgentRuns] ar
        WHERE ar."ConversationID" = c."ID"
        AND ar."AgentID" IN ({{ agentIds }})
        ORDER BY ar."StartedAt" DESC
    ) as AgentRunID,

    -- Conversation details as JSON array with ratings included
    (
        SELECT
            cd."ID" as id,
            cd."Role" as role,
            cd."Message" as message,
            cd.__mj_CreatedAt as createdAt,
            cdr."Rating" as rating,
            cdr."Comments" as ratingComment
        FROM [__mj].[vwConversationDetails] cd
        LEFT OUTER JOIN [__mj].[vwConversationDetailRatings] cdr
            ON cdr."ConversationDetailID" = cd."ID"
        WHERE cd."ConversationID" = c."ID"
        AND cd."Status" = ''Complete''
        ORDER BY cd.__mj_CreatedAt ASC
        FOR JSON PATH
    ) as MessagesJSON,

    -- Rating summary flags
    CASE WHEN EXISTS (
        SELECT 1 FROM [__mj].[vwConversationDetails] cd
        INNER JOIN [__mj].[vwConversationDetailRatings] cdr ON cdr."ConversationDetailID" = cd."ID"
        WHERE cd."ConversationID" = c."ID" AND cdr."Rating" >= 8
    ) THEN 1 ELSE 0
END as HasPositiveRating,

    CASE WHEN EXISTS (
        SELECT 1 FROM [__mj].[vwConversationDetails] cd
        INNER JOIN [__mj].[vwConversationDetailRatings] cdr ON cdr."ConversationDetailID" = cd."ID"
        WHERE cd."ConversationID" = c."ID" AND cdr."Rating" <= 3
    ) THEN 1 ELSE 0
END as HasNegativeRating,

    CASE WHEN NOT EXISTS (
        SELECT 1 FROM [__mj].[vwConversationDetails] cd
        INNER JOIN [__mj].[vwConversationDetailRatings] cdr ON cdr."ConversationDetailID" = cd."ID"
        WHERE cd."ConversationID" = c."ID"
    ) THEN 1 ELSE 0
END as IsUnrated

FROM [__mj].[vwConversations] c

-- Only include conversations with new activity since last run
WHERE EXISTS (
    SELECT 1 FROM [__mj].[vwConversationDetails] cd_new
    WHERE cd_new."ConversationID" = c."ID"
    {% if since %}
    AND cd_new.__mj_CreatedAt >= ''{{ since }}''
    {% endif %}
)

-- Only include conversations linked to agents that have memory enabled
AND EXISTS (
    SELECT 1 FROM [__mj].[vwAIAgentRuns] ar
    WHERE ar."ConversationID" = c."ID"
    AND ar."AgentID" IN ({{ agentIds }})
)

ORDER BY c.__mj_UpdatedAt DESC
';
  p_TechnicalDescription_11a01c1a := 'Single-query optimization that replaces 4 separate RunView calls in Memory Manager (get conversations, get agent runs, get details, get ratings). Uses SQL Server FOR JSON PATH to aggregate conversation details with ratings as JSON arrays. Returns rating summary flags (HasPositiveRating, HasNegativeRating, IsUnrated) and most recent AgentRunID for scope inheritance. Reduces database round trips from 4 to 1.';
  p_Status_11a01c1a := 'Approved';
  p_QualityRank_11a01c1a := 9;
  p_ExecutionCostRank_11a01c1a := 3;
  p_UsesTemplate_11a01c1a := 1;
  p_AuditQueryRuns_11a01c1a := 0;
  p_CacheEnabled_11a01c1a := 0;
  p_EmbeddingVector_11a01c1a := '[0.05079127848148346,0.09035059064626694,-0.0241005327552557,0.0002047202578978613,0.007942557334899902,-0.004986656829714775,-0.0040833973325788975,-0.013648014515638351,-0.012232557870447636,-0.016947250813245773,-0.028481926769018173,0.007967942394316196,-0.02684820257127285,0.04656028747558594,-0.052749037742614746,-0.0031639356166124344,0.021843701601028442,-0.00868343934416771,0.024816567078232765,0.024035068228840828,-0.00625630933791399,-0.005105008836835623,0.03923854976892471,-0.03631487116217613,-0.011602414771914482,-0.003479759907349944,-0.04228506609797478,0.019970396533608437,0.03680785372853279,-0.05429837480187416,0.0020721578039228916,0.03860961273312569,-0.063536137342453,0.020076200366020203,0.0000018501910972190672,-0.029065575450658798,-0.04729870334267616,0.016312794759869576,0.0121134789660573,0.033217646181583405,0.06390431523323059,0.010297387838363647,0.04633641615509987,0.013665363192558289,-0.058271877467632294,0.04765554890036583,-0.006883734837174416,-0.06572329252958298,0.046769462525844574,0.02473931387066841,-0.009251734241843224,0.032639279961586,-0.027040032669901848,0.005404791794717312,0.03869984298944473,-0.07086299359798431,0.012611155398190022,0.042279329150915146,0.06193437799811363,-0.0017248332733288407,0.036020055413246155,-0.012290241196751595,-0.010795294307172298,-0.023887621238827705,-0.00048658213927410543,0.004781071562319994,-0.027481012046337128,-0.01167088933289051,-0.005306650884449482,0.012155258096754551,0.1098610982298851,0.048767127096652985,0.014109102077782154,-0.005584047641605139,-0.023643946275115013,-0.05883141607046127,-0.0119113028049469,-0.0008175396360456944,-0.01818632148206234,0.011405295692384243,-0.0691610649228096,0.03485322743654251,-0.016906920820474625,-0.020627707242965698,-0.05224714055657387,-0.017756739631295204,-0.00005160645378055051,-0.010144558735191822,-0.012117987498641014,-0.03278453275561333,0.10722796618938446,0.009296494536101818,0.03643833100795746,-0.02586969919502735,-0.02776397578418255,0.002058778889477253,-0.018441760912537575,-0.00994481984525919,0.017424477264285088,-0.08905638009309769,0.026498032733798027,0.03623943775892258,0.03114563226699829,0.02810569480061531,0.049529869109392166,-0.06858674436807632,-0.018866688013076782,-0.037773989140987396,-0.030855953693389893,-0.0016322797164320946,-0.03939410671591759,0.0075011784210801125,-0.023640239611268044,0.0894571989774704,-0.05356133356690407,0.0033090044744312763,-0.055434998124837875,0.08320257812738419,0.0010676984675228596,-0.007338373921811581,0.009556654840707779,0.03627324849367142,-0.028003215789794922,0.024955447763204575,-0.027351753786206245,0.017706898972392082,-0.0022198003716766834,-0.02509322389960289,0.022394653409719467,-0.07395141571760178,-0.01856291852891445,-0.018150687217712402,0.031191453337669373,-0.03474811092019081,-0.005459083244204521,0.04644906520843506,0.025601867586374283,-0.07710008323192596,-0.017003830522298813,-0.0401291623711586,0.06264519691467285,-0.03787681832909584,-0.02545793540775776,-0.017351355403661728,0.03698789328336716,-0.030737601220607758,-0.039643894881010056,0.02032824046909809,-0.00019931506540160626,0.02879779413342476,-0.058180488646030426,0.019686447456479073,0.002907541813328862,0.0023019530344754457,0.003079300280660391,0.010915940627455711,0.10657579451799393,0.08073189109563828,0.006317181047052145,0.06279805302619934,0.04606578126549721,-0.000859603111166507,-0.017565233632922173,-0.0028020672034472227,0.011497484520077705,0.0007478615152649581,0.013867675326764584,0.028941577300429344,-0.027205482125282288,-0.025482267141342163,-0.015496990643441677,0.019426340237259865,-0.026243751868605614,-0.003329381812363863,0.04347588121891022,0.046181272715330124,-0.0378577895462513,-0.002381382044404745,-0.028820278123021126,0.01254812628030777,-0.031145159155130386,-0.05485319346189499,-0.04959753155708313,0.03526325896382332,0.0010121699888259172,-0.03156620264053345,0.07196877151727676,0.021316271275281906,-0.05075361207127571,-0.024181406944990158,0.018523653969168663,-0.062384121119976044,0.025164064019918442,-0.0076613579876720905,0.028020406141877174,-0.004517694003880024,-0.03566809743642807,0.050433333963155746,0.03190324828028679,-0.028339020907878876,-0.056465163826942444,-0.01460159569978714,0.013730207458138466,0.08056039363145828,-0.011897717602550983,-0.022440511733293533,-0.07959193736314774,0.03878672793507576,0.008727208711206913,0.007012821733951569,0.00516737625002861,0.021217189729213715,0.032105930149555206,-0.009648353792726994,-0.023099390789866447,0.028003400191664696,0.039157934486866,0.016207469627261162,0.0008238396840170026,-0.013398611918091774,-0.01404569111764431,0.02496291883289814,-0.029620852321386337,-0.006285957992076874,0.0005397481145337224,0.029324516654014587,0.028163200244307518,0.0014608276542276144,0.03636430948972702,0.05486462637782097,0.006569191347807646,0.0003904184268321842,0.0591057687997818,0.021048828959465027,0.010539560578763485,0.06098775565624237,0.012887216173112392,0.0705694928765297,-0.035670775920152664,-0.003907260950654745,0.04537628963589668,-0.04667634144425392,-0.02407081238925457,0.008037649095058441,0.0061867255717515945,-0.040602907538414,0.05563296750187874,-0.002667628927156329,0.019101625308394432,-0.003512762486934662,0.001137108076363802,0.030229294672608376,0.02169504202902317,-0.05029250681400299,-0.055469121783971786,-0.03266417980194092,-0.018757766112685204,0.005477202124893665,-0.03844166174530983,0.04366390034556389,-0.01916595920920372,0.02346942201256752,0.01841963268816471,-0.013052878901362419,0.04185650125145912,-0.048077140003442764,0.009478059597313404,-0.07091536372900009,0.022565769031643867,-0.004921324085444212,0.04391113668680191,0.011910381726920605,0.08163058012723923,0.0018719411455094814,-0.03828807175159454,0.03158252313733101,0.0425875261425972,0.0010985546978190541,0.040754493325948715,-0.004179877694696188,0.025889461860060692,-0.012415274046361446,-0.015056653879582882,0.004746823105961084,-0.0002814853214658797,0.01745971105992794,0.0441463403403759,-0.08236732333898544,0.014081819914281368,-0.036024268716573715,-0.016545020043849945,-0.003377856919541955,-0.02306751348078251,-0.02636226825416088,-0.01099723856896162,-0.05543310195207596,-0.0648922249674797,0.06529548764228821,0.013662722893059254,0.036326147615909576,-0.007037690375000238,-0.0361054427921772,-0.058202896267175674,-0.004697256721556187,-0.04680855572223663,0.0021172116976231337,-0.01232223305851221,0.02042219787836075,0.05537120997905731,0.03784762695431709,-0.04327843338251114,0.032823529094457626,-0.014867894351482391,-0.008223011158406734,0.03855353593826294,-0.013950797729194164,0.04459561035037041,0.027599478140473366,-0.004590993747115135,0.03264136239886284,-0.010919061489403248,-0.05871909111738205,0.035408467054367065,0.06742919236421585,0.010252798907458782,-0.07799189537763596,-0.016890371218323708,-0.007714482955634594,0.05800987407565117,-0.02045244351029396,0.005857840180397034,-0.02115759439766407,-0.06399159878492355,0.030116943642497063,-0.053240351378917694,0.003706203540787101,-0.04979139193892479,0.06886255741119385,-0.04757111892104149,0.0033437798265367746,0.00736438762396574,-0.022324025630950928,-0.02843300811946392,0.03313082829117775,-0.031460754573345184,-0.019286077469587326,0.0031424034386873245,-0.03315126895904541,-0.06568882614374161,0.014908798970282078,-0.04478200152516365,-0.013060609810054302,-0.017260616645216942,-0.01208257395774126,0.0013886390952393413,-0.024398701265454292,-0.0075802854262292385,0.004130313638597727,-0.06296239048242569,-0.021676722913980484,0.029038386419415474,0.09631688892841339,0.024205869063735008,-0.03380195051431656,0.0354977510869503,-0.040639523416757584,0.028481315821409225,-0.006406386848539114,0.0029548911843448877,0.013059730641543865,0.033372655510902405,-0.02978798747062683,-0.05105017125606537,0.06694665551185608,0.02004576474428177,-0.10536867380142212,-0.01994118094444275,-0.013440405018627644,-0.027942100539803505,-0.020736780017614365,0.03392152115702629,-0.09779267013072968,0.014945067465305328,-0.028502844274044037,0.020530885085463524,0.01761610433459282,-0.0625622346997261,-0.033886488527059555,-0.1131233349442482,0.00009574100113241002,0.012706561014056206,-0.06307659298181534,0.019195737317204475,-0.08009906113147736,0.005383370444178581,-0.017002683132886887,-0.004235582426190376,-0.021217117086052895,0.01647210866212845,-0.0007949425489641726,-0.011339214630424976,0.006899432744830847,0.0444469228386879,0.008899403735995293,-0.06134840101003647,0.03177731856703758,0.015260351821780205,0.06299184262752533,0.0032627482432872057,-0.02273254469037056,-0.03224923461675644,0.005678757559508085,-0.01799294725060463,-0.028770867735147476,0.05657487362623215,-0.013943229801952839,0.03969544544816017,0.02078286185860634,0.046805765479803085,-0.004324295558035374,0.05251304432749748,0.029305709525942802,0.022435922175645828,-0.026093272492289543,0.02631351165473461,-0.00607965188100934,0.04262903332710266,0.01061802078038454,0.02471427246928215,-0.00781203480437398,-0.014936456456780434,-0.025120357051491737,-0.0036682637874037027,-0.018968453630805016,-0.0644301250576973,0.03706567734479904,0.031014690175652504,-0.07060138136148453,-0.02515042945742607,-0.008712846785783768,-0.03514249250292778,0.018190797418355942,0.08127940446138382,-0.017786934971809387,0.018582746386528015,0.024726053699851036,0.00039170298259705305,-0.026734352111816406,-0.021657204255461693,-0.0040737902745604515,-0.00675504794344306,-0.008087733760476112,-0.02449152059853077,-0.005953727290034294,0.007129926234483719,0.013528949581086636,-0.024357624351978302,-0.07492576539516449,-0.047737520188093185,0.014164100401103497,0.05191383510828018,0.035761598497629166,0.035110652446746826,0.008612304925918579,0.013734747655689716,-0.028543705120682716,0.05263384059071541,-0.09211473166942596,0.018031325191259384,0.025148333981633186,0.06415750831365585,0.011009620502591133,0.030593188479542732,-0.023033324629068375,0.025234058499336243,0.02118276059627533,-0.015876511111855507,-0.0508064404129982,-0.012985431589186192,-0.000732322339899838,0.02684761956334114,0.019889231771230698,0.050808217376470566,-0.04824836552143097,0.00004551123856799677,0.04843232035636902,-0.07893157750368118,0.007085248362272978,-0.0434907041490078,-0.012945124879479408,-0.016079507768154144,0.00799733679741621,-0.013625946827232838,0.018292617052793503,0.002236912725493312,0.04320317879319191,-0.011262319050729275,-0.05728518217802048,0.02192917838692665,-0.05100050941109657,-0.0038374271243810654,-0.032028570771217346,-0.004153268411755562,0.014178507961332798,0.018571963533759117,0.06490568816661835,-0.04621608182787895,0.0011113806394860148,0.0038916936609894037,0.011749910190701485,0.02180490642786026,0.03846370801329613,-0.05944552272558212,-0.031017789617180824,0.03457550331950188,-0.031838394701480865,-0.03136684373021126,0.0001624780852580443,0.04812081530690193,-0.004885158967226744,0.015770161524415016,-0.006694483105093241,0.0160669032484293,-0.0043753222562372684,0.025523560121655464,-0.03197191283106804,0.015508252196013927,0.0016496420139446855,0.008066253736615181,0.06393346190452576,-0.052016470581293106,0.041149038821458817,-0.006335366051644087,-0.0408761091530323,-0.022557884454727173,-0.010689076967537403,0.0378512367606163,0.06826858222484589,0.011972835287451744,-0.07253285497426987,-0.006630072370171547,0.029759662225842476,0.013830936513841152,-0.028837310150265694,-0.017657645046710968,0.0028450982645154,0.040727175772190094,0.018832918256521225,0.053141843527555466,0.022112255915999413,-0.032845836132764816,-0.038760773837566376,-0.08138919621706009,-0.0023772651329636574,0.036029040813446045,-6.432864916884136e-33,-0.023917924612760544,-0.014684871770441532,0.006195457652211189,0.03723994642496109,-0.0597340352833271,-0.014452226459980011,-0.014286693185567856,-0.031614288687705994,-0.0014728907262906432,-0.0454246811568737,-0.019309645518660545,0.04720998555421829,0.037140704691410065,0.017804637551307678,0.024539735168218613,0.018375108018517494,0.024064848199486732,-0.015934990718960762,0.003956449218094349,0.06683484464883804,0.05707010626792908,0.07038233429193497,-0.0026173924561589956,-0.04496459290385246,0.017081035301089287,0.016864199191331863,0.04953546077013016,0.0032294809352606535,0.004290263168513775,0.01644625887274742,-0.017755873501300812,0.011755957268178463,0.0029416726902127266,0.02460000291466713,-0.00520614068955183,-0.040576498955488205,-0.053908150643110275,-0.061240725219249725,0.0105019211769104,-0.03919978067278862,-0.006003388203680515,0.005817030090838671,0.012093015015125275,0.010909541510045528,0.019264882430434227,-0.03533279895782471,0.034129075706005096,-0.009940299205482006,-0.04438069090247154,-0.030499612912535667,-0.005030960310250521,0.016664298251271248,0.0006420074496418238,0.07340309023857117,0.0007477820618078113,-0.02241343818604946,-0.00947281252592802,0.0218973346054554,-0.057180631905794144,0.03891448304057121,-0.06643245369195938,0.015900282189249992,-0.02570738084614277,0.05755329877138138,0.03457222878932953,0.015214716084301472,0.04068397358059883,0.060166239738464355,0.00036199623718857765,0.017706768587231636,-0.00989444274455309,0.06864777952432632,-0.05683824419975281,-0.0468280054628849,-0.04011251777410507,-0.007704589981585741,-0.0539516881108284,-0.01912015490233898,0.04430456832051277,0.008914164267480373,0.010646039620041847,0.023217666894197464,-0.056944120675325394,-0.010533517226576805,0.037721216678619385,0.05675901100039482,-0.0004984409315511584,-0.03318960592150688,-0.018096156418323517,-0.002046339213848114,-0.06401760131120682,0.012063666246831417,-0.002988585736602545,-0.02988538332283497,0.01409144140779972,-0.00019880582112818956,0.05567929893732071,-0.04396361485123634,-0.013401719741523266,0.015571626834571362,-0.009291345253586769,-0.020664727315306664,0.005512372124940157,0.03060385398566723,-0.014660770073533058,0.004089468624442816,0.02298607863485813,-0.02113240957260132,-0.046136461198329926,-0.009890127927064896,-0.0017711372347548604,0.02748834528028965,0.005973044782876968,0.03226775303483009,-0.008336141705513,0.04134117066860199,-0.005496539641171694,0.11610472947359085,0.03799837827682495,0.048205774277448654,-0.03318478912115097,-0.032624684274196625,0.060979388654232025,-0.026705428957939148,0.00505594490095973,0.02075597085058689,-0.045613549649715424,-0.038081854581832886,0.0028805441688746214,-0.020954394713044167,-0.005293926224112511,0.01901543326675892,2.7053718554270745e-7,0.019686926156282425,0.017047487199306488,-0.013053808361291885,0.003960337024182081,0.0027668620459735394,0.00214202213101089,0.046231482177972794,0.011082331649959087,0.03369522839784622,-0.002964071463793516,0.04340475797653198,0.017111919820308685,0.011001167818903923,0.03854682296514511,-0.07275687158107758,-0.036689192056655884,-0.0218672938644886,-0.09564562886953354,-0.07321562618017197,-0.03604140505194664,0.03735772892832756,0.0071462951600551605,0.04691056162118912,0.0017742825439199805,-0.005430781748145819,0.0074676088988780975,0.019835757091641426,-0.05317511036992073,-0.08343472331762314,0.015415129251778126,0.05399279296398163,-0.052760958671569824,-0.033376842737197876,0.01886281929910183,-0.021096426993608475,0.009936757385730743,-0.047020334750413895,0.01970226876437664,-0.025672458112239838,-0.047675274312496185,0.008177420124411583,-0.045784033834934235,-0.01186355296522379,0.06341540813446045,0.059236180037260056,-0.049784839153289795,-0.05416940152645111,0.005316439084708691,-0.008641050197184086,-0.031758345663547516,0.022063013166189194,0.03223682940006256,0.011694096028804779,0.001983350608497858,0.011517112143337727,0.03735494241118431,-0.017370957881212234,-0.04038471728563309,0.0416184663772583,-0.0342542827129364,-0.0036211232654750347,-0.09179119765758514,0.01881531998515129,0.030116280540823936,-0.021103352308273315,-0.03853075951337814,0.013337511569261551,2.6788554278417677e-34,0.039873164147138596,0.05002487450838089,0.028683243319392204,0.05554112046957016,0.029719317331910133,0.03558764606714249,0.009646526537835598,0.007612765766680241,0.055310722440481186,-0.1114618182182312,-0.007236486300826073]';
  p_EmbeddingModelID_11a01c1a := '1D45AA65-41EC-4572-9ECD-AB2826C9B059';
  p_ID_11a01c1a := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  PERFORM __mj."spUpdateQuery"(p_Name := p_Name_11a01c1a, p_CategoryID := p_CategoryID_11a01c1a, p_UserQuestion := p_UserQuestion_11a01c1a, p_Description := p_Description_11a01c1a, p_SQL := p_SQL_11a01c1a, p_TechnicalDescription := p_TechnicalDescription_11a01c1a, p_OriginalSQL := p_OriginalSQL_11a01c1a, p_Feedback := p_Feedback_11a01c1a, p_Status := p_Status_11a01c1a, p_QualityRank := p_QualityRank_11a01c1a, p_ExecutionCostRank := p_ExecutionCostRank_11a01c1a, p_UsesTemplate := p_UsesTemplate_11a01c1a, p_AuditQueryRuns := p_AuditQueryRuns_11a01c1a, p_CacheEnabled := p_CacheEnabled_11a01c1a, p_CacheTTLMinutes := p_CacheTTLMinutes_11a01c1a, p_CacheMaxSize := p_CacheMaxSize_11a01c1a, p_EmbeddingVector := p_EmbeddingVector_11a01c1a, p_EmbeddingModelID := p_EmbeddingModelID_11a01c1a, p_CacheValidationSQL := p_CacheValidationSQL_11a01c1a, p_ID := p_ID_11a01c1a);
END $$;

-- Save MJ: Query Parameters (core SP call only)
DO $$
DECLARE
  p_QueryID_6574a52d UUID;
  p_Name_6574a52d VARCHAR(255);
  p_Type_6574a52d VARCHAR(50);
  p_IsRequired_6574a52d BOOLEAN;
  p_DefaultValue_6574a52d TEXT;
  p_Description_6574a52d TEXT;
  p_SampleValue_6574a52d TEXT;
  p_ValidationFilters_6574a52d TEXT;
  p_DetectionMethod_6574a52d VARCHAR(50);
  p_AutoDetectConfidenceScore_6574a52d NUMERIC(3,2);
  p_ID_6574a52d UUID;
BEGIN
  p_QueryID_6574a52d := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_6574a52d := 'since';
  p_Type_6574a52d := 'date';
  p_IsRequired_6574a52d := 0;
  p_Description_6574a52d := 'ISO date string - only include conversations with new activity after this date';
  p_SampleValue_6574a52d := '2024-01-15T10:30:00.000Z';
  p_DetectionMethod_6574a52d := 'AI';
  p_ID_6574a52d := 'DF0E9F24-CD92-4C6C-BA18-13B443160DE5';
  PERFORM __mj."spUpdateQueryParameter"(p_QueryID := p_QueryID_6574a52d, p_Name := p_Name_6574a52d, p_Type := p_Type_6574a52d, p_IsRequired := p_IsRequired_6574a52d, p_DefaultValue := p_DefaultValue_6574a52d, p_Description := p_Description_6574a52d, p_SampleValue := p_SampleValue_6574a52d, p_ValidationFilters := p_ValidationFilters_6574a52d, p_DetectionMethod := p_DetectionMethod_6574a52d, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_6574a52d, p_ID := p_ID_6574a52d);
END $$;

-- Save MJ: Query Parameters (core SP call only)
DO $$
DECLARE
  p_QueryID_94b9a28d UUID;
  p_Name_94b9a28d VARCHAR(255);
  p_Type_94b9a28d VARCHAR(50);
  p_IsRequired_94b9a28d BOOLEAN;
  p_DefaultValue_94b9a28d TEXT;
  p_Description_94b9a28d TEXT;
  p_SampleValue_94b9a28d TEXT;
  p_ValidationFilters_94b9a28d TEXT;
  p_DetectionMethod_94b9a28d VARCHAR(50);
  p_AutoDetectConfidenceScore_94b9a28d NUMERIC(3,2);
  p_ID_94b9a28d UUID;
BEGIN
  p_QueryID_94b9a28d := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_94b9a28d := 'agentIds';
  p_Type_94b9a28d := 'string';
  p_IsRequired_94b9a28d := 1;
  p_Description_94b9a28d := 'Comma-separated list of agent IDs that have memory enabled';
  p_SampleValue_94b9a28d := '123e4567-e89b-12d3-a456-426614174000,223e4567-e89b-12d3-a456-426614174001';
  p_DetectionMethod_94b9a28d := 'AI';
  p_ID_94b9a28d := 'AF4459A1-BEDA-4200-A739-4292E90EA6A1';
  PERFORM __mj."spUpdateQueryParameter"(p_QueryID := p_QueryID_94b9a28d, p_Name := p_Name_94b9a28d, p_Type := p_Type_94b9a28d, p_IsRequired := p_IsRequired_94b9a28d, p_DefaultValue := p_DefaultValue_94b9a28d, p_Description := p_Description_94b9a28d, p_SampleValue := p_SampleValue_94b9a28d, p_ValidationFilters := p_ValidationFilters_94b9a28d, p_DetectionMethod := p_DetectionMethod_94b9a28d, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_94b9a28d, p_ID := p_ID_94b9a28d);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_QueryID_969c6c28 UUID;
  p_Name_969c6c28 VARCHAR(255);
  p_Description_969c6c28 TEXT;
  p_Sequence_969c6c28 INTEGER;
  p_SQLBaseType_969c6c28 VARCHAR(50);
  p_SQLFullType_969c6c28 VARCHAR(100);
  p_SourceEntityID_969c6c28 UUID;
  p_SourceFieldName_969c6c28 VARCHAR(255);
  p_IsComputed_969c6c28 BOOLEAN;
  p_ComputationDescription_969c6c28 TEXT;
  p_IsSummary_969c6c28 BOOLEAN;
  p_SummaryDescription_969c6c28 TEXT;
  p_DetectionMethod_969c6c28 VARCHAR(50);
  p_AutoDetectConfidenceScore_969c6c28 NUMERIC(3,2);
  p_ID_969c6c28 UUID;
BEGIN
  p_QueryID_969c6c28 := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_969c6c28 := 'HasPositiveRating';
  p_Description_969c6c28 := 'Flag indicating if conversation has any rating >= 8';
  p_Sequence_969c6c28 := 5;
  p_SQLBaseType_969c6c28 := 'bit';
  p_SQLFullType_969c6c28 := 'bit';
  p_IsComputed_969c6c28 := 1;
  p_ComputationDescription_969c6c28 := 'CASE expression checking for existence of ratings >= 8';
  p_IsSummary_969c6c28 := 0;
  p_DetectionMethod_969c6c28 := 'Manual';
  p_ID_969c6c28 := 'ADC80F10-C778-46A7-AB21-1474FF3051BA';
  PERFORM __mj."spUpdateQueryField"(p_QueryID := p_QueryID_969c6c28, p_Name := p_Name_969c6c28, p_Description := p_Description_969c6c28, p_Sequence := p_Sequence_969c6c28, p_SQLBaseType := p_SQLBaseType_969c6c28, p_SQLFullType := p_SQLFullType_969c6c28, p_SourceEntityID := p_SourceEntityID_969c6c28, p_SourceFieldName := p_SourceFieldName_969c6c28, p_IsComputed := p_IsComputed_969c6c28, p_ComputationDescription := p_ComputationDescription_969c6c28, p_IsSummary := p_IsSummary_969c6c28, p_SummaryDescription := p_SummaryDescription_969c6c28, p_DetectionMethod := p_DetectionMethod_969c6c28, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_969c6c28, p_ID := p_ID_969c6c28);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_QueryID_79e5821c UUID;
  p_Name_79e5821c VARCHAR(255);
  p_Description_79e5821c TEXT;
  p_Sequence_79e5821c INTEGER;
  p_SQLBaseType_79e5821c VARCHAR(50);
  p_SQLFullType_79e5821c VARCHAR(100);
  p_SourceEntityID_79e5821c UUID;
  p_SourceFieldName_79e5821c VARCHAR(255);
  p_IsComputed_79e5821c BOOLEAN;
  p_ComputationDescription_79e5821c TEXT;
  p_IsSummary_79e5821c BOOLEAN;
  p_SummaryDescription_79e5821c TEXT;
  p_DetectionMethod_79e5821c VARCHAR(50);
  p_AutoDetectConfidenceScore_79e5821c NUMERIC(3,2);
  p_ID_79e5821c UUID;
BEGIN
  p_QueryID_79e5821c := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_79e5821c := 'UserID';
  p_Description_79e5821c := 'Unique identifier for the user associated with the conversation';
  p_Sequence_79e5821c := 2;
  p_SQLBaseType_79e5821c := 'TEXT';
  p_SQLFullType_79e5821c := 'TEXT';
  p_SourceEntityID_79e5821c := '13248F34-2837-EF11-86D4-6045BDEE16E6';
  p_SourceFieldName_79e5821c := 'UserID';
  p_IsComputed_79e5821c := 0;
  p_IsSummary_79e5821c := 0;
  p_DetectionMethod_79e5821c := 'Manual';
  p_ID_79e5821c := 'FC47BF02-BE51-4C7C-9132-1C20ADC4FEBD';
  PERFORM __mj."spUpdateQueryField"(p_QueryID := p_QueryID_79e5821c, p_Name := p_Name_79e5821c, p_Description := p_Description_79e5821c, p_Sequence := p_Sequence_79e5821c, p_SQLBaseType := p_SQLBaseType_79e5821c, p_SQLFullType := p_SQLFullType_79e5821c, p_SourceEntityID := p_SourceEntityID_79e5821c, p_SourceFieldName := p_SourceFieldName_79e5821c, p_IsComputed := p_IsComputed_79e5821c, p_ComputationDescription := p_ComputationDescription_79e5821c, p_IsSummary := p_IsSummary_79e5821c, p_SummaryDescription := p_SummaryDescription_79e5821c, p_DetectionMethod := p_DetectionMethod_79e5821c, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_79e5821c, p_ID := p_ID_79e5821c);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_QueryID_94f9c274 UUID;
  p_Name_94f9c274 VARCHAR(255);
  p_Description_94f9c274 TEXT;
  p_Sequence_94f9c274 INTEGER;
  p_SQLBaseType_94f9c274 VARCHAR(50);
  p_SQLFullType_94f9c274 VARCHAR(100);
  p_SourceEntityID_94f9c274 UUID;
  p_SourceFieldName_94f9c274 VARCHAR(255);
  p_IsComputed_94f9c274 BOOLEAN;
  p_ComputationDescription_94f9c274 TEXT;
  p_IsSummary_94f9c274 BOOLEAN;
  p_SummaryDescription_94f9c274 TEXT;
  p_DetectionMethod_94f9c274 VARCHAR(50);
  p_AutoDetectConfidenceScore_94f9c274 NUMERIC(3,2);
  p_ID_94f9c274 UUID;
BEGIN
  p_QueryID_94f9c274 := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_94f9c274 := 'MessagesJSON';
  p_Description_94f9c274 := 'Conversation details as JSON array with ratings included';
  p_Sequence_94f9c274 := 4;
  p_SQLBaseType_94f9c274 := 'TEXT';
  p_SQLFullType_94f9c274 := 'TEXT';
  p_IsComputed_94f9c274 := 1;
  p_ComputationDescription_94f9c274 := 'FOR JSON PATH subquery aggregating conversation details with ratings';
  p_IsSummary_94f9c274 := 0;
  p_DetectionMethod_94f9c274 := 'Manual';
  p_ID_94f9c274 := 'CB76A976-AE46-454B-B837-90A78B74ED50';
  PERFORM __mj."spUpdateQueryField"(p_QueryID := p_QueryID_94f9c274, p_Name := p_Name_94f9c274, p_Description := p_Description_94f9c274, p_Sequence := p_Sequence_94f9c274, p_SQLBaseType := p_SQLBaseType_94f9c274, p_SQLFullType := p_SQLFullType_94f9c274, p_SourceEntityID := p_SourceEntityID_94f9c274, p_SourceFieldName := p_SourceFieldName_94f9c274, p_IsComputed := p_IsComputed_94f9c274, p_ComputationDescription := p_ComputationDescription_94f9c274, p_IsSummary := p_IsSummary_94f9c274, p_SummaryDescription := p_SummaryDescription_94f9c274, p_DetectionMethod := p_DetectionMethod_94f9c274, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_94f9c274, p_ID := p_ID_94f9c274);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_QueryID_3b9abac1 UUID;
  p_Name_3b9abac1 VARCHAR(255);
  p_Description_3b9abac1 TEXT;
  p_Sequence_3b9abac1 INTEGER;
  p_SQLBaseType_3b9abac1 VARCHAR(50);
  p_SQLFullType_3b9abac1 VARCHAR(100);
  p_SourceEntityID_3b9abac1 UUID;
  p_SourceFieldName_3b9abac1 VARCHAR(255);
  p_IsComputed_3b9abac1 BOOLEAN;
  p_ComputationDescription_3b9abac1 TEXT;
  p_IsSummary_3b9abac1 BOOLEAN;
  p_SummaryDescription_3b9abac1 TEXT;
  p_DetectionMethod_3b9abac1 VARCHAR(50);
  p_AutoDetectConfidenceScore_3b9abac1 NUMERIC(3,2);
  p_ID_3b9abac1 UUID;
BEGIN
  p_QueryID_3b9abac1 := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_3b9abac1 := 'AgentRunID';
  p_Description_3b9abac1 := 'Most recent agent run ID for this conversation (for scope inheritance)';
  p_Sequence_3b9abac1 := 3;
  p_SQLBaseType_3b9abac1 := 'TEXT';
  p_SQLFullType_3b9abac1 := 'TEXT';
  p_IsComputed_3b9abac1 := 1;
  p_ComputationDescription_3b9abac1 := 'Scalar subquery selecting TOP 1 ID from AIAgentRuns ordered by StartedAt DESC';
  p_IsSummary_3b9abac1 := 0;
  p_DetectionMethod_3b9abac1 := 'Manual';
  p_ID_3b9abac1 := '4CAB47E1-C542-4CDD-9BEF-90BFC2786FF0';
  PERFORM __mj."spUpdateQueryField"(p_QueryID := p_QueryID_3b9abac1, p_Name := p_Name_3b9abac1, p_Description := p_Description_3b9abac1, p_Sequence := p_Sequence_3b9abac1, p_SQLBaseType := p_SQLBaseType_3b9abac1, p_SQLFullType := p_SQLFullType_3b9abac1, p_SourceEntityID := p_SourceEntityID_3b9abac1, p_SourceFieldName := p_SourceFieldName_3b9abac1, p_IsComputed := p_IsComputed_3b9abac1, p_ComputationDescription := p_ComputationDescription_3b9abac1, p_IsSummary := p_IsSummary_3b9abac1, p_SummaryDescription := p_SummaryDescription_3b9abac1, p_DetectionMethod := p_DetectionMethod_3b9abac1, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_3b9abac1, p_ID := p_ID_3b9abac1);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_QueryID_fb90d169 UUID;
  p_Name_fb90d169 VARCHAR(255);
  p_Description_fb90d169 TEXT;
  p_Sequence_fb90d169 INTEGER;
  p_SQLBaseType_fb90d169 VARCHAR(50);
  p_SQLFullType_fb90d169 VARCHAR(100);
  p_SourceEntityID_fb90d169 UUID;
  p_SourceFieldName_fb90d169 VARCHAR(255);
  p_IsComputed_fb90d169 BOOLEAN;
  p_ComputationDescription_fb90d169 TEXT;
  p_IsSummary_fb90d169 BOOLEAN;
  p_SummaryDescription_fb90d169 TEXT;
  p_DetectionMethod_fb90d169 VARCHAR(50);
  p_AutoDetectConfidenceScore_fb90d169 NUMERIC(3,2);
  p_ID_fb90d169 UUID;
BEGIN
  p_QueryID_fb90d169 := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_fb90d169 := 'HasNegativeRating';
  p_Description_fb90d169 := 'Flag indicating if conversation has any rating <= 3';
  p_Sequence_fb90d169 := 6;
  p_SQLBaseType_fb90d169 := 'bit';
  p_SQLFullType_fb90d169 := 'bit';
  p_IsComputed_fb90d169 := 1;
  p_ComputationDescription_fb90d169 := 'CASE expression checking for existence of ratings <= 3';
  p_IsSummary_fb90d169 := 0;
  p_DetectionMethod_fb90d169 := 'Manual';
  p_ID_fb90d169 := '5A464544-F105-4F17-94F8-A0423F150812';
  PERFORM __mj."spUpdateQueryField"(p_QueryID := p_QueryID_fb90d169, p_Name := p_Name_fb90d169, p_Description := p_Description_fb90d169, p_Sequence := p_Sequence_fb90d169, p_SQLBaseType := p_SQLBaseType_fb90d169, p_SQLFullType := p_SQLFullType_fb90d169, p_SourceEntityID := p_SourceEntityID_fb90d169, p_SourceFieldName := p_SourceFieldName_fb90d169, p_IsComputed := p_IsComputed_fb90d169, p_ComputationDescription := p_ComputationDescription_fb90d169, p_IsSummary := p_IsSummary_fb90d169, p_SummaryDescription := p_SummaryDescription_fb90d169, p_DetectionMethod := p_DetectionMethod_fb90d169, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_fb90d169, p_ID := p_ID_fb90d169);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_QueryID_b17d6415 UUID;
  p_Name_b17d6415 VARCHAR(255);
  p_Description_b17d6415 TEXT;
  p_Sequence_b17d6415 INTEGER;
  p_SQLBaseType_b17d6415 VARCHAR(50);
  p_SQLFullType_b17d6415 VARCHAR(100);
  p_SourceEntityID_b17d6415 UUID;
  p_SourceFieldName_b17d6415 VARCHAR(255);
  p_IsComputed_b17d6415 BOOLEAN;
  p_ComputationDescription_b17d6415 TEXT;
  p_IsSummary_b17d6415 BOOLEAN;
  p_SummaryDescription_b17d6415 TEXT;
  p_DetectionMethod_b17d6415 VARCHAR(50);
  p_AutoDetectConfidenceScore_b17d6415 NUMERIC(3,2);
  p_ID_b17d6415 UUID;
BEGIN
  p_QueryID_b17d6415 := '574FD9D5-AB9E-4FA5-A36C-C25E7D3F63FC';
  p_Name_b17d6415 := 'IsUnrated';
  p_Description_b17d6415 := 'Flag indicating if conversation has no ratings';
  p_Sequence_b17d6415 := 7;
  p_SQLBaseType_b17d6415 := 'bit';
  p_SQLFullType_b17d6415 := 'bit';
  p_IsComputed_b17d6415 := 1;
  p_ComputationDescription_b17d6415 := 'CASE expression checking for absence of any ratings';
  p_IsSummary_b17d6415 := 0;
  p_DetectionMethod_b17d6415 := 'Manual';
  p_ID_b17d6415 := 'F11B7F22-EF85-418E-855A-AC0EDBEE014A';
  PERFORM __mj."spUpdateQueryField"(p_QueryID := p_QueryID_b17d6415, p_Name := p_Name_b17d6415, p_Description := p_Description_b17d6415, p_Sequence := p_Sequence_b17d6415, p_SQLBaseType := p_SQLBaseType_b17d6415, p_SQLFullType := p_SQLFullType_b17d6415, p_SourceEntityID := p_SourceEntityID_b17d6415, p_SourceFieldName := p_SourceFieldName_b17d6415, p_IsComputed := p_IsComputed_b17d6415, p_ComputationDescription := p_ComputationDescription_b17d6415, p_IsSummary := p_IsSummary_b17d6415, p_SummaryDescription := p_SummaryDescription_b17d6415, p_DetectionMethod := p_DetectionMethod_b17d6415, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_b17d6415, p_ID := p_ID_b17d6415);
END $$;

-- Save MJ: Queries (core SP call only)
DO $$
DECLARE
  p_Name_6a91f840 VARCHAR(255);
  p_CategoryID_6a91f840 UUID;
  p_UserQuestion_6a91f840 TEXT;
  p_Description_6a91f840 TEXT;
  p_SQL_6a91f840 TEXT;
  p_TechnicalDescription_6a91f840 TEXT;
  p_OriginalSQL_6a91f840 TEXT;
  p_Feedback_6a91f840 TEXT;
  p_Status_6a91f840 VARCHAR(15);
  p_QualityRank_6a91f840 INTEGER;
  p_ExecutionCostRank_6a91f840 INTEGER;
  p_UsesTemplate_6a91f840 BOOLEAN;
  p_AuditQueryRuns_6a91f840 BOOLEAN;
  p_CacheEnabled_6a91f840 BOOLEAN;
  p_CacheTTLMinutes_6a91f840 INTEGER;
  p_CacheMaxSize_6a91f840 INTEGER;
  p_EmbeddingVector_6a91f840 TEXT;
  p_EmbeddingModelID_6a91f840 UUID;
  p_CacheValidationSQL_6a91f840 TEXT;
  p_ID_6a91f840 UUID;
BEGIN
  p_Name_6a91f840 := 'Server Installed Version History';
  p_CategoryID_6a91f840 := '17AFCCEC-6A37-EF11-86D4-000D3A4E707E';
  p_UserQuestion_6a91f840 := 'Show me a list of versions installed on the server in order of most recent version first';
  p_Status_6a91f840 := 'Approved';
  p_QualityRank_6a91f840 := 9;
  p_ExecutionCostRank_6a91f840 := 3;
  p_UsesTemplate_6a91f840 := 1;
  p_AuditQueryRuns_6a91f840 := 0;
  p_CacheEnabled_6a91f840 := 0;
  p_ID_6a91f840 := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  PERFORM __mj."spUpdateQuery"(p_Name := p_Name_6a91f840, p_CategoryID := p_CategoryID_6a91f840, p_UserQuestion := p_UserQuestion_6a91f840, p_Description := p_Description_6a91f840, p_SQL := p_SQL_6a91f840, p_TechnicalDescription := p_TechnicalDescription_6a91f840, p_OriginalSQL := p_OriginalSQL_6a91f840, p_Feedback := p_Feedback_6a91f840, p_Status := p_Status_6a91f840, p_QualityRank := p_QualityRank_6a91f840, p_ExecutionCostRank := p_ExecutionCostRank_6a91f840, p_UsesTemplate := p_UsesTemplate_6a91f840, p_AuditQueryRuns := p_AuditQueryRuns_6a91f840, p_CacheEnabled := p_CacheEnabled_6a91f840, p_CacheTTLMinutes := p_CacheTTLMinutes_6a91f840, p_CacheMaxSize := p_CacheMaxSize_6a91f840, p_EmbeddingVector := p_EmbeddingVector_6a91f840, p_EmbeddingModelID := p_EmbeddingModelID_6a91f840, p_CacheValidationSQL := p_CacheValidationSQL_6a91f840, p_ID := p_ID_6a91f840);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_109dc3b9 UUID;
  p_QueryID_109dc3b9 UUID;
  p_Name_109dc3b9 VARCHAR(255);
  p_Description_109dc3b9 TEXT;
  p_Sequence_109dc3b9 INTEGER;
  p_SQLBaseType_109dc3b9 VARCHAR(50);
  p_SQLFullType_109dc3b9 VARCHAR(100);
  p_SourceEntityID_109dc3b9 UUID;
  p_SourceFieldName_109dc3b9 VARCHAR(255);
  p_IsComputed_109dc3b9 BOOLEAN;
  p_ComputationDescription_109dc3b9 TEXT;
  p_IsSummary_109dc3b9 BOOLEAN;
  p_SummaryDescription_109dc3b9 TEXT;
  p_DetectionMethod_109dc3b9 VARCHAR(50);
  p_AutoDetectConfidenceScore_109dc3b9 NUMERIC(3,2);
BEGIN
  p_ID_109dc3b9 := '31554b62-5505-4d79-acbf-9cc922a7d2cc';
  p_QueryID_109dc3b9 := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_109dc3b9 := 'installed_rank';
  p_Description_109dc3b9 := 'Installation rank of the schema history entry';
  p_Sequence_109dc3b9 := 1;
  p_SQLBaseType_109dc3b9 := 'decimal';
  p_SQLFullType_109dc3b9 := 'decimal(18,2)';
  p_IsComputed_109dc3b9 := 0;
  p_IsSummary_109dc3b9 := 0;
  p_DetectionMethod_109dc3b9 := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_109dc3b9, p_QueryID := p_QueryID_109dc3b9, p_Name := p_Name_109dc3b9, p_Description := p_Description_109dc3b9, p_Sequence := p_Sequence_109dc3b9, p_SQLBaseType := p_SQLBaseType_109dc3b9, p_SQLFullType := p_SQLFullType_109dc3b9, p_SourceEntityID := p_SourceEntityID_109dc3b9, p_SourceFieldName := p_SourceFieldName_109dc3b9, p_IsComputed := p_IsComputed_109dc3b9, p_ComputationDescription := p_ComputationDescription_109dc3b9, p_IsSummary := p_IsSummary_109dc3b9, p_SummaryDescription := p_SummaryDescription_109dc3b9, p_DetectionMethod := p_DetectionMethod_109dc3b9, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_109dc3b9);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_6afdf9b5 UUID;
  p_QueryID_6afdf9b5 UUID;
  p_Name_6afdf9b5 VARCHAR(255);
  p_Description_6afdf9b5 TEXT;
  p_Sequence_6afdf9b5 INTEGER;
  p_SQLBaseType_6afdf9b5 VARCHAR(50);
  p_SQLFullType_6afdf9b5 VARCHAR(100);
  p_SourceEntityID_6afdf9b5 UUID;
  p_SourceFieldName_6afdf9b5 VARCHAR(255);
  p_IsComputed_6afdf9b5 BOOLEAN;
  p_ComputationDescription_6afdf9b5 TEXT;
  p_IsSummary_6afdf9b5 BOOLEAN;
  p_SummaryDescription_6afdf9b5 TEXT;
  p_DetectionMethod_6afdf9b5 VARCHAR(50);
  p_AutoDetectConfidenceScore_6afdf9b5 NUMERIC(3,2);
BEGIN
  p_ID_6afdf9b5 := '010a01a1-1a9e-49ae-a9b2-954ac057bb73';
  p_QueryID_6afdf9b5 := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_6afdf9b5 := 'version';
  p_Description_6afdf9b5 := 'Version of the schema migration';
  p_Sequence_6afdf9b5 := 2;
  p_SQLBaseType_6afdf9b5 := 'TEXT';
  p_SQLFullType_6afdf9b5 := 'TEXT';
  p_IsComputed_6afdf9b5 := 0;
  p_IsSummary_6afdf9b5 := 0;
  p_DetectionMethod_6afdf9b5 := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_6afdf9b5, p_QueryID := p_QueryID_6afdf9b5, p_Name := p_Name_6afdf9b5, p_Description := p_Description_6afdf9b5, p_Sequence := p_Sequence_6afdf9b5, p_SQLBaseType := p_SQLBaseType_6afdf9b5, p_SQLFullType := p_SQLFullType_6afdf9b5, p_SourceEntityID := p_SourceEntityID_6afdf9b5, p_SourceFieldName := p_SourceFieldName_6afdf9b5, p_IsComputed := p_IsComputed_6afdf9b5, p_ComputationDescription := p_ComputationDescription_6afdf9b5, p_IsSummary := p_IsSummary_6afdf9b5, p_SummaryDescription := p_SummaryDescription_6afdf9b5, p_DetectionMethod := p_DetectionMethod_6afdf9b5, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_6afdf9b5);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_89ee1cad UUID;
  p_QueryID_89ee1cad UUID;
  p_Name_89ee1cad VARCHAR(255);
  p_Description_89ee1cad TEXT;
  p_Sequence_89ee1cad INTEGER;
  p_SQLBaseType_89ee1cad VARCHAR(50);
  p_SQLFullType_89ee1cad VARCHAR(100);
  p_SourceEntityID_89ee1cad UUID;
  p_SourceFieldName_89ee1cad VARCHAR(255);
  p_IsComputed_89ee1cad BOOLEAN;
  p_ComputationDescription_89ee1cad TEXT;
  p_IsSummary_89ee1cad BOOLEAN;
  p_SummaryDescription_89ee1cad TEXT;
  p_DetectionMethod_89ee1cad VARCHAR(50);
  p_AutoDetectConfidenceScore_89ee1cad NUMERIC(3,2);
BEGIN
  p_ID_89ee1cad := '6d2695f4-80a6-4d52-b9e6-495e2dc0f63b';
  p_QueryID_89ee1cad := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_89ee1cad := 'description';
  p_Description_89ee1cad := 'Description of the schema migration';
  p_Sequence_89ee1cad := 3;
  p_SQLBaseType_89ee1cad := 'TEXT';
  p_SQLFullType_89ee1cad := 'TEXT';
  p_IsComputed_89ee1cad := 0;
  p_IsSummary_89ee1cad := 0;
  p_DetectionMethod_89ee1cad := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_89ee1cad, p_QueryID := p_QueryID_89ee1cad, p_Name := p_Name_89ee1cad, p_Description := p_Description_89ee1cad, p_Sequence := p_Sequence_89ee1cad, p_SQLBaseType := p_SQLBaseType_89ee1cad, p_SQLFullType := p_SQLFullType_89ee1cad, p_SourceEntityID := p_SourceEntityID_89ee1cad, p_SourceFieldName := p_SourceFieldName_89ee1cad, p_IsComputed := p_IsComputed_89ee1cad, p_ComputationDescription := p_ComputationDescription_89ee1cad, p_IsSummary := p_IsSummary_89ee1cad, p_SummaryDescription := p_SummaryDescription_89ee1cad, p_DetectionMethod := p_DetectionMethod_89ee1cad, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_89ee1cad);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_f014870d UUID;
  p_QueryID_f014870d UUID;
  p_Name_f014870d VARCHAR(255);
  p_Description_f014870d TEXT;
  p_Sequence_f014870d INTEGER;
  p_SQLBaseType_f014870d VARCHAR(50);
  p_SQLFullType_f014870d VARCHAR(100);
  p_SourceEntityID_f014870d UUID;
  p_SourceFieldName_f014870d VARCHAR(255);
  p_IsComputed_f014870d BOOLEAN;
  p_ComputationDescription_f014870d TEXT;
  p_IsSummary_f014870d BOOLEAN;
  p_SummaryDescription_f014870d TEXT;
  p_DetectionMethod_f014870d VARCHAR(50);
  p_AutoDetectConfidenceScore_f014870d NUMERIC(3,2);
BEGIN
  p_ID_f014870d := '8c57285f-f2f6-4171-8740-d9b7c5f42401';
  p_QueryID_f014870d := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_f014870d := 'type';
  p_Description_f014870d := 'Type of the schema migration';
  p_Sequence_f014870d := 4;
  p_SQLBaseType_f014870d := 'TEXT';
  p_SQLFullType_f014870d := 'TEXT';
  p_IsComputed_f014870d := 0;
  p_IsSummary_f014870d := 0;
  p_DetectionMethod_f014870d := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_f014870d, p_QueryID := p_QueryID_f014870d, p_Name := p_Name_f014870d, p_Description := p_Description_f014870d, p_Sequence := p_Sequence_f014870d, p_SQLBaseType := p_SQLBaseType_f014870d, p_SQLFullType := p_SQLFullType_f014870d, p_SourceEntityID := p_SourceEntityID_f014870d, p_SourceFieldName := p_SourceFieldName_f014870d, p_IsComputed := p_IsComputed_f014870d, p_ComputationDescription := p_ComputationDescription_f014870d, p_IsSummary := p_IsSummary_f014870d, p_SummaryDescription := p_SummaryDescription_f014870d, p_DetectionMethod := p_DetectionMethod_f014870d, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_f014870d);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_bf829708 UUID;
  p_QueryID_bf829708 UUID;
  p_Name_bf829708 VARCHAR(255);
  p_Description_bf829708 TEXT;
  p_Sequence_bf829708 INTEGER;
  p_SQLBaseType_bf829708 VARCHAR(50);
  p_SQLFullType_bf829708 VARCHAR(100);
  p_SourceEntityID_bf829708 UUID;
  p_SourceFieldName_bf829708 VARCHAR(255);
  p_IsComputed_bf829708 BOOLEAN;
  p_ComputationDescription_bf829708 TEXT;
  p_IsSummary_bf829708 BOOLEAN;
  p_SummaryDescription_bf829708 TEXT;
  p_DetectionMethod_bf829708 VARCHAR(50);
  p_AutoDetectConfidenceScore_bf829708 NUMERIC(3,2);
BEGIN
  p_ID_bf829708 := '54f49295-7671-4a18-82db-386757f3e941';
  p_QueryID_bf829708 := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_bf829708 := 'script';
  p_Description_bf829708 := 'Script name for the migration';
  p_Sequence_bf829708 := 5;
  p_SQLBaseType_bf829708 := 'TEXT';
  p_SQLFullType_bf829708 := 'TEXT';
  p_IsComputed_bf829708 := 0;
  p_IsSummary_bf829708 := 0;
  p_DetectionMethod_bf829708 := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_bf829708, p_QueryID := p_QueryID_bf829708, p_Name := p_Name_bf829708, p_Description := p_Description_bf829708, p_Sequence := p_Sequence_bf829708, p_SQLBaseType := p_SQLBaseType_bf829708, p_SQLFullType := p_SQLFullType_bf829708, p_SourceEntityID := p_SourceEntityID_bf829708, p_SourceFieldName := p_SourceFieldName_bf829708, p_IsComputed := p_IsComputed_bf829708, p_ComputationDescription := p_ComputationDescription_bf829708, p_IsSummary := p_IsSummary_bf829708, p_SummaryDescription := p_SummaryDescription_bf829708, p_DetectionMethod := p_DetectionMethod_bf829708, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_bf829708);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_500632c4 UUID;
  p_QueryID_500632c4 UUID;
  p_Name_500632c4 VARCHAR(255);
  p_Description_500632c4 TEXT;
  p_Sequence_500632c4 INTEGER;
  p_SQLBaseType_500632c4 VARCHAR(50);
  p_SQLFullType_500632c4 VARCHAR(100);
  p_SourceEntityID_500632c4 UUID;
  p_SourceFieldName_500632c4 VARCHAR(255);
  p_IsComputed_500632c4 BOOLEAN;
  p_ComputationDescription_500632c4 TEXT;
  p_IsSummary_500632c4 BOOLEAN;
  p_SummaryDescription_500632c4 TEXT;
  p_DetectionMethod_500632c4 VARCHAR(50);
  p_AutoDetectConfidenceScore_500632c4 NUMERIC(3,2);
BEGIN
  p_ID_500632c4 := 'fb54c641-d2ec-4b1c-8c46-8c10683f5581';
  p_QueryID_500632c4 := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_500632c4 := 'checksum';
  p_Description_500632c4 := 'Checksum of the migration script';
  p_Sequence_500632c4 := 6;
  p_SQLBaseType_500632c4 := 'decimal';
  p_SQLFullType_500632c4 := 'decimal(18,2)';
  p_IsComputed_500632c4 := 0;
  p_IsSummary_500632c4 := 0;
  p_DetectionMethod_500632c4 := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_500632c4, p_QueryID := p_QueryID_500632c4, p_Name := p_Name_500632c4, p_Description := p_Description_500632c4, p_Sequence := p_Sequence_500632c4, p_SQLBaseType := p_SQLBaseType_500632c4, p_SQLFullType := p_SQLFullType_500632c4, p_SourceEntityID := p_SourceEntityID_500632c4, p_SourceFieldName := p_SourceFieldName_500632c4, p_IsComputed := p_IsComputed_500632c4, p_ComputationDescription := p_ComputationDescription_500632c4, p_IsSummary := p_IsSummary_500632c4, p_SummaryDescription := p_SummaryDescription_500632c4, p_DetectionMethod := p_DetectionMethod_500632c4, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_500632c4);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_9cfdde54 UUID;
  p_QueryID_9cfdde54 UUID;
  p_Name_9cfdde54 VARCHAR(255);
  p_Description_9cfdde54 TEXT;
  p_Sequence_9cfdde54 INTEGER;
  p_SQLBaseType_9cfdde54 VARCHAR(50);
  p_SQLFullType_9cfdde54 VARCHAR(100);
  p_SourceEntityID_9cfdde54 UUID;
  p_SourceFieldName_9cfdde54 VARCHAR(255);
  p_IsComputed_9cfdde54 BOOLEAN;
  p_ComputationDescription_9cfdde54 TEXT;
  p_IsSummary_9cfdde54 BOOLEAN;
  p_SummaryDescription_9cfdde54 TEXT;
  p_DetectionMethod_9cfdde54 VARCHAR(50);
  p_AutoDetectConfidenceScore_9cfdde54 NUMERIC(3,2);
BEGIN
  p_ID_9cfdde54 := 'e995b5fa-994b-4e21-9434-37140606fd19';
  p_QueryID_9cfdde54 := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_9cfdde54 := 'installed_by';
  p_Description_9cfdde54 := 'User who installed the migration';
  p_Sequence_9cfdde54 := 7;
  p_SQLBaseType_9cfdde54 := 'TEXT';
  p_SQLFullType_9cfdde54 := 'TEXT';
  p_IsComputed_9cfdde54 := 0;
  p_IsSummary_9cfdde54 := 0;
  p_DetectionMethod_9cfdde54 := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_9cfdde54, p_QueryID := p_QueryID_9cfdde54, p_Name := p_Name_9cfdde54, p_Description := p_Description_9cfdde54, p_Sequence := p_Sequence_9cfdde54, p_SQLBaseType := p_SQLBaseType_9cfdde54, p_SQLFullType := p_SQLFullType_9cfdde54, p_SourceEntityID := p_SourceEntityID_9cfdde54, p_SourceFieldName := p_SourceFieldName_9cfdde54, p_IsComputed := p_IsComputed_9cfdde54, p_ComputationDescription := p_ComputationDescription_9cfdde54, p_IsSummary := p_IsSummary_9cfdde54, p_SummaryDescription := p_SummaryDescription_9cfdde54, p_DetectionMethod := p_DetectionMethod_9cfdde54, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_9cfdde54);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_ac53fe7c UUID;
  p_QueryID_ac53fe7c UUID;
  p_Name_ac53fe7c VARCHAR(255);
  p_Description_ac53fe7c TEXT;
  p_Sequence_ac53fe7c INTEGER;
  p_SQLBaseType_ac53fe7c VARCHAR(50);
  p_SQLFullType_ac53fe7c VARCHAR(100);
  p_SourceEntityID_ac53fe7c UUID;
  p_SourceFieldName_ac53fe7c VARCHAR(255);
  p_IsComputed_ac53fe7c BOOLEAN;
  p_ComputationDescription_ac53fe7c TEXT;
  p_IsSummary_ac53fe7c BOOLEAN;
  p_SummaryDescription_ac53fe7c TEXT;
  p_DetectionMethod_ac53fe7c VARCHAR(50);
  p_AutoDetectConfidenceScore_ac53fe7c NUMERIC(3,2);
BEGIN
  p_ID_ac53fe7c := '25fff33e-f6b3-4bff-ad33-630eb7ca4818';
  p_QueryID_ac53fe7c := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_ac53fe7c := 'installed_on';
  p_Description_ac53fe7c := 'Timestamp when the migration was installed';
  p_Sequence_ac53fe7c := 8;
  p_SQLBaseType_ac53fe7c := 'datetime';
  p_SQLFullType_ac53fe7c := 'datetime';
  p_IsComputed_ac53fe7c := 0;
  p_IsSummary_ac53fe7c := 0;
  p_DetectionMethod_ac53fe7c := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_ac53fe7c, p_QueryID := p_QueryID_ac53fe7c, p_Name := p_Name_ac53fe7c, p_Description := p_Description_ac53fe7c, p_Sequence := p_Sequence_ac53fe7c, p_SQLBaseType := p_SQLBaseType_ac53fe7c, p_SQLFullType := p_SQLFullType_ac53fe7c, p_SourceEntityID := p_SourceEntityID_ac53fe7c, p_SourceFieldName := p_SourceFieldName_ac53fe7c, p_IsComputed := p_IsComputed_ac53fe7c, p_ComputationDescription := p_ComputationDescription_ac53fe7c, p_IsSummary := p_IsSummary_ac53fe7c, p_SummaryDescription := p_SummaryDescription_ac53fe7c, p_DetectionMethod := p_DetectionMethod_ac53fe7c, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_ac53fe7c);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_a7b01950 UUID;
  p_QueryID_a7b01950 UUID;
  p_Name_a7b01950 VARCHAR(255);
  p_Description_a7b01950 TEXT;
  p_Sequence_a7b01950 INTEGER;
  p_SQLBaseType_a7b01950 VARCHAR(50);
  p_SQLFullType_a7b01950 VARCHAR(100);
  p_SourceEntityID_a7b01950 UUID;
  p_SourceFieldName_a7b01950 VARCHAR(255);
  p_IsComputed_a7b01950 BOOLEAN;
  p_ComputationDescription_a7b01950 TEXT;
  p_IsSummary_a7b01950 BOOLEAN;
  p_SummaryDescription_a7b01950 TEXT;
  p_DetectionMethod_a7b01950 VARCHAR(50);
  p_AutoDetectConfidenceScore_a7b01950 NUMERIC(3,2);
BEGIN
  p_ID_a7b01950 := '40d852de-7370-4f9f-ab12-83abca2d08fb';
  p_QueryID_a7b01950 := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_a7b01950 := 'execution_time';
  p_Description_a7b01950 := 'Execution time of the migration in milliseconds';
  p_Sequence_a7b01950 := 9;
  p_SQLBaseType_a7b01950 := 'decimal';
  p_SQLFullType_a7b01950 := 'decimal(18,2)';
  p_IsComputed_a7b01950 := 0;
  p_IsSummary_a7b01950 := 0;
  p_DetectionMethod_a7b01950 := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_a7b01950, p_QueryID := p_QueryID_a7b01950, p_Name := p_Name_a7b01950, p_Description := p_Description_a7b01950, p_Sequence := p_Sequence_a7b01950, p_SQLBaseType := p_SQLBaseType_a7b01950, p_SQLFullType := p_SQLFullType_a7b01950, p_SourceEntityID := p_SourceEntityID_a7b01950, p_SourceFieldName := p_SourceFieldName_a7b01950, p_IsComputed := p_IsComputed_a7b01950, p_ComputationDescription := p_ComputationDescription_a7b01950, p_IsSummary := p_IsSummary_a7b01950, p_SummaryDescription := p_SummaryDescription_a7b01950, p_DetectionMethod := p_DetectionMethod_a7b01950, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_a7b01950);
END $$;

-- Save MJ: Query Fields (core SP call only)
DO $$
DECLARE
  p_ID_4af1f21e UUID;
  p_QueryID_4af1f21e UUID;
  p_Name_4af1f21e VARCHAR(255);
  p_Description_4af1f21e TEXT;
  p_Sequence_4af1f21e INTEGER;
  p_SQLBaseType_4af1f21e VARCHAR(50);
  p_SQLFullType_4af1f21e VARCHAR(100);
  p_SourceEntityID_4af1f21e UUID;
  p_SourceFieldName_4af1f21e VARCHAR(255);
  p_IsComputed_4af1f21e BOOLEAN;
  p_ComputationDescription_4af1f21e TEXT;
  p_IsSummary_4af1f21e BOOLEAN;
  p_SummaryDescription_4af1f21e TEXT;
  p_DetectionMethod_4af1f21e VARCHAR(50);
  p_AutoDetectConfidenceScore_4af1f21e NUMERIC(3,2);
BEGIN
  p_ID_4af1f21e := '61b03a6b-e72a-413f-8145-22ab9d843911';
  p_QueryID_4af1f21e := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  p_Name_4af1f21e := 'success';
  p_Description_4af1f21e := 'Whether the migration was successful';
  p_Sequence_4af1f21e := 10;
  p_SQLBaseType_4af1f21e := 'bit';
  p_SQLFullType_4af1f21e := 'bit';
  p_IsComputed_4af1f21e := 0;
  p_IsSummary_4af1f21e := 0;
  p_DetectionMethod_4af1f21e := 'Manual';
  PERFORM __mj."spCreateQueryField"(p_ID := p_ID_4af1f21e, p_QueryID := p_QueryID_4af1f21e, p_Name := p_Name_4af1f21e, p_Description := p_Description_4af1f21e, p_Sequence := p_Sequence_4af1f21e, p_SQLBaseType := p_SQLBaseType_4af1f21e, p_SQLFullType := p_SQLFullType_4af1f21e, p_SourceEntityID := p_SourceEntityID_4af1f21e, p_SourceFieldName := p_SourceFieldName_4af1f21e, p_IsComputed := p_IsComputed_4af1f21e, p_ComputationDescription := p_ComputationDescription_4af1f21e, p_IsSummary := p_IsSummary_4af1f21e, p_SummaryDescription := p_SummaryDescription_4af1f21e, p_DetectionMethod := p_DetectionMethod_4af1f21e, p_AutoDetectConfidenceScore := p_AutoDetectConfidenceScore_4af1f21e);
END $$;

-- Save MJ: Queries (core SP call only)
DO $$
DECLARE
  p_Name_df9042ed VARCHAR(255);
  p_CategoryID_df9042ed UUID;
  p_UserQuestion_df9042ed TEXT;
  p_Description_df9042ed TEXT;
  p_SQL_df9042ed TEXT;
  p_TechnicalDescription_df9042ed TEXT;
  p_OriginalSQL_df9042ed TEXT;
  p_Feedback_df9042ed TEXT;
  p_Status_df9042ed VARCHAR(15);
  p_QualityRank_df9042ed INTEGER;
  p_ExecutionCostRank_df9042ed INTEGER;
  p_UsesTemplate_df9042ed BOOLEAN;
  p_AuditQueryRuns_df9042ed BOOLEAN;
  p_CacheEnabled_df9042ed BOOLEAN;
  p_CacheTTLMinutes_df9042ed INTEGER;
  p_CacheMaxSize_df9042ed INTEGER;
  p_EmbeddingVector_df9042ed TEXT;
  p_EmbeddingModelID_df9042ed UUID;
  p_CacheValidationSQL_df9042ed TEXT;
  p_ID_df9042ed UUID;
BEGIN
  p_Name_df9042ed := 'Server Installed Version History';
  p_CategoryID_df9042ed := '17AFCCEC-6A37-EF11-86D4-000D3A4E707E';
  p_UserQuestion_df9042ed := 'Show me a list of versions installed on the server in order of most recent version first';
  p_Status_df9042ed := 'Approved';
  p_QualityRank_df9042ed := 9;
  p_ExecutionCostRank_df9042ed := 3;
  p_UsesTemplate_df9042ed := 0;
  p_AuditQueryRuns_df9042ed := 0;
  p_CacheEnabled_df9042ed := 0;
  p_ID_df9042ed := '23F8423E-F36B-1410-8D9C-00021F8B792E';
  PERFORM __mj."spUpdateQuery"(p_Name := p_Name_df9042ed, p_CategoryID := p_CategoryID_df9042ed, p_UserQuestion := p_UserQuestion_df9042ed, p_Description := p_Description_df9042ed, p_SQL := p_SQL_df9042ed, p_TechnicalDescription := p_TechnicalDescription_df9042ed, p_OriginalSQL := p_OriginalSQL_df9042ed, p_Feedback := p_Feedback_df9042ed, p_Status := p_Status_df9042ed, p_QualityRank := p_QualityRank_df9042ed, p_ExecutionCostRank := p_ExecutionCostRank_df9042ed, p_UsesTemplate := p_UsesTemplate_df9042ed, p_AuditQueryRuns := p_AuditQueryRuns_df9042ed, p_CacheEnabled := p_CacheEnabled_df9042ed, p_CacheTTLMinutes := p_CacheTTLMinutes_df9042ed, p_CacheMaxSize := p_CacheMaxSize_df9042ed, p_EmbeddingVector := p_EmbeddingVector_df9042ed, p_EmbeddingModelID := p_EmbeddingModelID_df9042ed, p_CacheValidationSQL := p_CacheValidationSQL_df9042ed, p_ID := p_ID_df9042ed);
END $$;


-- ===================== FK & CHECK Constraints =====================


-- ===================== Grants =====================


-- ===================== Comments =====================
