-- SQL Logging Session
-- Session ID: 049d8071-1280-4415-bf4b-70622d8a4498
-- Started: 2025-07-27T19:05:12.071Z
-- Description: MetadataSync push operation
-- Format: Migration-ready with Flyway schema placeholders
-- Generated by MemberJunction SQLServerDataProvider

-- Save AI Agents (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgent @ID = '9b89a9e8-2bbb-46de-a51a-a548fa9796c3',
@Name = N'Demo Flow Agent',
@Description = N'Simple Agent Demo! This agent demonstrates the basic functionality of a flow agent, which follows a deterministic pathway',
@LogoURL = NULL,
@ParentID = NULL,
@ExposeAsAction = 1,
@ExecutionOrder = 0,
@ExecutionMode = N'Sequential',
@EnableContextCompression = 0,
@ContextCompressionMessageThreshold = NULL,
@ContextCompressionPromptID = NULL,
@ContextCompressionMessageRetentionCount = NULL,
@TypeID = '4F6A189B-C068-4736-9F23-3FF540B40FDD',
@Status = N'Active',
@DriverClass = NULL,
@IconClass = N'fa-solid fa-arrows-rotate',
@ModelSelectionMode = N'Agent Type',
@PayloadDownstreamPaths = N'["*"]',
@PayloadUpstreamPaths = N'["*"]',
@PayloadSelfReadPaths = NULL,
@PayloadSelfWritePaths = NULL,
@PayloadScope = NULL,
@FinalPayloadValidation = NULL,
@FinalPayloadValidationMode = N'Retry',
@FinalPayloadValidationMaxRetries = 3,
@MaxCostPerRun = NULL,
@MaxTokensPerRun = NULL,
@MaxIterationsPerRun = NULL,
@MaxTimePerRun = NULL,
@MinExecutionsPerRun = NULL,
@MaxExecutionsPerRun = NULL,
@StartingPayloadValidation = NULL,
@StartingPayloadValidationMode = N'Fail';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = '5b5a74f8-33a6-48ed-a0af-0e31ce3c4ad2',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@Name = N'Step 2(a): Get Weather',
@Description = N'Fetch the current weather conditions as the next step in the flow.',
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = '6C88FED2-679A-4FDD-A31A-7F38D0457F22',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{
  "temperature": "weatherTemperature",
  "conditions": "weatherConditions"
}',
@PositionX = 0,
@PositionY = 0,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{
  "location": "San Francisco"
}';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = 'f28499a1-0b28-4ae5-b695-7f4b48c38c20',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@Name = N'Step 2(b): Web Search',
@Description = N'Perform a web search as an alternative step in the flow. See why NVIDIA stock price is lower than $500.',
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = '82169F64-8566-4AE7-9C87-190A885C98A9',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{
  "results": "webSearchResults"
}',
@PositionX = 0,
@PositionY = 0,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{
  "query": "NVIDIA stock decline reasons"
}';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = '54ca1c7e-28d4-4896-a9a2-85538d3ce301',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@Name = N'Step 1: Get NVIDIA Stock Price',
@Description = N'Fetch the current stock price of NVIDIA as the first step in the flow.',
@StepType = N'Action',
@StartingStep = 1,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = '296E03AE-6EDC-4C5E-9506-BC98ACCDA2E1',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{
  "price": "stockPrice"
}',
@PositionX = 0,
@PositionY = 0,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{
  "symbol": "NVDA"
}';

-- Save MJ: AI Agent Step Paths (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStepPath @ID = '519f2d7f-1876-48ab-be0a-8589035c9597',
@OriginStepID = '54CA1C7E-28D4-4896-A9A2-85538D3CE301',
@DestinationStepID = '5B5A74F8-33A6-48ED-A0AF-0E31CE3C4AD2',
@Condition = N'stockPrice > 500',
@Priority = 0,
@Description = N'If NVIDIA stock price is above $500, proceed to get the weather step.',
@PathPoints = NULL;

-- Save MJ: AI Agent Step Paths (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStepPath @ID = '85886739-869d-48c5-bf76-1af9a6f77afa',
@OriginStepID = '54CA1C7E-28D4-4896-A9A2-85538D3CE301',
@DestinationStepID = 'F28499A1-0B28-4AE5-B695-7F4B48C38C20',
@Condition = N'stockPrice <= 500',
@Priority = 0,
@Description = N'If NVIDIA stock price is below $500, proceed to web search step.',
@PathPoints = NULL;

-- Save AI Agent Actions (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentAction @ID = 'ccb4cf46-04de-4d1b-9cab-d61e830ca3a1',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@ActionID = '81F96534-03F5-49E9-81B0-D8902A7645A3',
@Status = N'Active',
@MinExecutionsPerRun = NULL,
@MaxExecutionsPerRun = NULL;

-- Save AI Agent Actions (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentAction @ID = '6bc4e10c-6838-40ed-a153-e82cc3d146b6',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@ActionID = '6C88FED2-679A-4FDD-A31A-7F38D0457F22',
@Status = N'Active',
@MinExecutionsPerRun = NULL,
@MaxExecutionsPerRun = NULL;

-- Save AI Agent Actions (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentAction @ID = 'f9793050-9323-4b4f-a417-6c128ad4054d',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@ActionID = '08E0742A-5DB9-4A5F-BA47-ED39374EE213',
@Status = N'Active',
@MinExecutionsPerRun = NULL,
@MaxExecutionsPerRun = NULL;

-- Save AI Agent Actions (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentAction @ID = '93e67f1f-ee94-475f-927d-93f56d400902',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@ActionID = '296E03AE-6EDC-4C5E-9506-BC98ACCDA2E1',
@Status = N'Active',
@MinExecutionsPerRun = NULL,
@MaxExecutionsPerRun = NULL;

-- Save AI Agent Actions (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentAction @ID = '1065bcf3-54f1-46b8-afa8-4fa2e05d9371',
@AgentID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3',
@ActionID = '82169F64-8566-4AE7-9C87-190A885C98A9',
@Status = N'Active',
@MinExecutionsPerRun = NULL,
@MaxExecutionsPerRun = NULL;


-- End of SQL Logging Session
-- Session ID: 049d8071-1280-4415-bf4b-70622d8a4498
-- Completed: 2025-07-27T19:05:26.703Z
-- Duration: 14632ms
-- Total Statements: 11















-- SQL Logging Session
-- Session ID: 46f5627f-eb69-4e10-8a83-5d11d8aabea2
-- Started: 2025-07-27T19:12:24.722Z
-- Description: MetadataSync push operation
-- Format: Migration-ready with Flyway schema placeholders
-- Generated by MemberJunction SQLServerDataProvider

-- Save AI Agents (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgent @Name = N'Demo Flow Agent',
@Description = N'Simple Agent Demo! This agent demonstrates the basic functionality of a flow agent, which follows a deterministic pathway',
@LogoURL = NULL,
@ParentID = NULL,
@ExposeAsAction = 1,
@ExecutionOrder = 0,
@ExecutionMode = N'Sequential',
@EnableContextCompression = 0,
@ContextCompressionMessageThreshold = NULL,
@ContextCompressionPromptID = NULL,
@ContextCompressionMessageRetentionCount = NULL,
@TypeID = '4F6A189B-C068-4736-9F23-3FF540B40FDD',
@Status = N'Active',
@DriverClass = NULL,
@IconClass = N'fa-solid fa-chart-diagram',
@ModelSelectionMode = N'Agent Type',
@PayloadDownstreamPaths = N'["*"]',
@PayloadUpstreamPaths = N'["*"]',
@PayloadSelfReadPaths = NULL,
@PayloadSelfWritePaths = NULL,
@PayloadScope = NULL,
@FinalPayloadValidation = NULL,
@FinalPayloadValidationMode = N'Retry',
@FinalPayloadValidationMaxRetries = 3,
@MaxCostPerRun = NULL,
@MaxTokensPerRun = NULL,
@MaxIterationsPerRun = NULL,
@MaxTimePerRun = NULL,
@MinExecutionsPerRun = NULL,
@MaxExecutionsPerRun = NULL,
@StartingPayloadValidation = NULL,
@StartingPayloadValidationMode = N'Fail',
@ID = '9B89A9E8-2BBB-46DE-A51A-A548FA9796C3';


-- End of SQL Logging Session
-- Session ID: 46f5627f-eb69-4e10-8a83-5d11d8aabea2
-- Completed: 2025-07-27T19:12:37.032Z
-- Duration: 12310ms
-- Total Statements: 1
