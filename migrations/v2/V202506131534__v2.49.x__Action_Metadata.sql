-- SQL Logging Session
-- Session ID: 8f026f97-6f68-41f1-a1f5-61c1fe61d9ed
-- Started: 2025-06-13T20:33:22.340Z
-- Description: MetadataSync Push Operation
-- Generated by MemberJunction SQLServerDataProvider

-- Save Action Categories
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [ParentID] uniqueidentifier NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Parent] NVARCHAR(255) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionCategory @ID = '2759bf45-f349-4a29-853a-add695ea5d46',
  @Name = 'System',
  @Description = 'MJ System Actions',
  @ParentID = NULL,
  @Status = 'Pending';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Categories',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"2759bf45-f349-4a29-853a-add695ea5d46","Name":"System","Description":"MJ System Actions","ParentID":null,"Status":"Pending","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Parent":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateAction @CategoryID = '2759BF45-F349-4A29-853A-ADD695EA5D46',
  @Name = 'Autotag and Vectorize Content',
  @Description = 'Autotag Content and create vectors of the content items that are created.',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__AutotagAndVectorizeContent',
  @ID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"CategoryID":{"field":"CategoryID","oldValue":null,"newValue":"2759BF45-F349-4A29-853A-ADD695EA5D46"}}',
  @ChangesDescription = 'CategoryID set to 2759BF45-F349-4A29-853A-ADD695EA5D46',
  @FullRecordJSON = '{"ID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","CategoryID":"2759BF45-F349-4A29-853A-ADD695EA5D46","Name":"Autotag and Vectorize Content","Description":"Autotag Content and create vectors of the content items that are created.","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:29:56.376Z","DriverClass":"__AutotagAndVectorizeContent","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateAction @ID = 'de380edb-3301-44d7-9d93-492e3a23d564',
  @CategoryID = '2759BF45-F349-4A29-853A-ADD695EA5D46',
  @Name = 'Vectorize Entity',
  @Description = 'Action that vectorizes entities by creating and storing vector embeddings for entity documents.',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__VectorizeEntity';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"de380edb-3301-44d7-9d93-492e3a23d564","CategoryID":"2759BF45-F349-4A29-853A-ADD695EA5D46","Name":"Vectorize Entity","Description":"Action that vectorizes entities by creating and storing vector embeddings for entity documents.","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__VectorizeEntity","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateAction @ID = '31911893-af11-43e7-8e92-b7ef87753152',
  @CategoryID = '2759BF45-F349-4A29-853A-ADD695EA5D46',
  @Name = 'Run External Change Detection',
  @Description = 'Executes the External Change Detection process to identify changes in data that bypassed MemberJunction.',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__RunExternalChangeDetection';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"31911893-af11-43e7-8e92-b7ef87753152","CategoryID":"2759BF45-F349-4A29-853A-ADD695EA5D46","Name":"Run External Change Detection","Description":"Executes the External Change Detection process to identify changes in data that bypassed MemberJunction.","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__RunExternalChangeDetection","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Categories
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [ParentID] uniqueidentifier NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Parent] NVARCHAR(255) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionCategory @ID = '1d979ed6-fe72-43d2-bbc2-cafc91492d36',
  @Name = 'Communication',
  @Description = 'Communication Actions',
  @ParentID = NULL,
  @Status = 'Pending';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Categories',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1d979ed6-fe72-43d2-bbc2-cafc91492d36","Name":"Communication","Description":"Communication Actions","ParentID":null,"Status":"Pending","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Parent":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateAction @ID = '8aae8da8-ba2b-40e3-b66a-a7e09b3d868d',
  @CategoryID = '1D979ED6-FE72-43D2-BBC2-CAFC91492D36',
  @Name = 'Send Single Message',
  @Description = 'Sends a single message via the MJ Communication Framework',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__SendSingleMessage';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"8aae8da8-ba2b-40e3-b66a-a7e09b3d868d","CategoryID":"1D979ED6-FE72-43D2-BBC2-CAFC91492D36","Name":"Send Single Message","Description":"Sends a single message via the MJ Communication Framework","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__SendSingleMessage","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO


-- End of SQL Logging Session
-- Session ID: 8f026f97-6f68-41f1-a1f5-61c1fe61d9ed
-- Completed: 2025-06-13T20:33:22.526Z
-- Duration: 186ms
-- Total Statements: 6






-- SQL Logging Session
-- Session ID: 34eb7d7d-14ea-442b-8661-ebda4665ea0a
-- Started: 2025-06-13T20:57:47.047Z
-- Description: MetadataSync Push Operation
-- Generated by MemberJunction SQLServerDataProvider

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'Autotag',
  @DefaultValue = '1',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not',
  @IsRequired = 1,
  @ID = 'B2A953B5-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"},"Description":{"field":"Description","oldValue":"A bit, eh, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not","newValue":"A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not"}}',
  @ChangesDescription = 'Type changed from Input      to Input
Description changed from A bit, eh, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not to A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not',
  @FullRecordJSON = '{"ID":"B2A953B5-9C76-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"Autotag","DefaultValue":"1","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:45:20.586Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'Vectorize',
  @DefaultValue = '1',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A bit to indicate if we vectorize the content items or not. 1 indicates we should vectorize, 0 we should not',
  @IsRequired = 1,
  @ID = '0E7EF5C0-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"0E7EF5C0-9C76-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"Vectorize","DefaultValue":"1","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A bit to indicate if we vectorize the content items or not. 1 indicates we should vectorize, 0 we should not","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:45:20.610Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'EntityNames',
  @DefaultValue = 'Content Items',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 1,
  @Description = 'Name of the entity to vectorize',
  @IsRequired = 1,
  @ID = '3A8EC430-A076-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"3A8EC430-A076-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"EntityNames","DefaultValue":"Content Items","Type":"Input","ValueType":"Scalar","IsArray":true,"Description":"Name of the entity to vectorize","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:45:20.633Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'b057906d-fb4a-4026-b18a-cb11ddd86e6e',
  @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Content items successfully autotagged and vectorized';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"b057906d-fb4a-4026-b18a-cb11ddd86e6e","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Content items successfully autotagged and vectorized","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '1bbe2f60-5a02-4a33-9534-72dea51a4c3e',
  @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to autotag or vectorize content items';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1bbe2f60-5a02-4a33-9534-72dea51a4c3e","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to autotag or vectorize content items","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '1ed06a16-e3fe-428c-83ad-983c4870968b',
  @ActionID = 'DE380EDB-3301-44D7-9D93-492E3A23D564',
  @Name = 'EntityNames',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 1,
  @Description = 'Names of entities to vectorize. Can be a single entity name, comma-separated list, or array of entity names',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1ed06a16-e3fe-428c-83ad-983c4870968b","ActionID":"DE380EDB-3301-44D7-9D93-492E3A23D564","Name":"EntityNames","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":true,"Description":"Names of entities to vectorize. Can be a single entity name, comma-separated list, or array of entity names","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '6f0b4460-f45a-40fb-bceb-b3f576ddba32',
  @ActionID = 'DE380EDB-3301-44D7-9D93-492E3A23D564',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'All entities were successfully vectorized';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"6f0b4460-f45a-40fb-bceb-b3f576ddba32","ActionID":"DE380EDB-3301-44D7-9D93-492E3A23D564","ResultCode":"SUCCESS","IsSuccess":true,"Description":"All entities were successfully vectorized","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '91c94678-9ba8-4a96-8178-459b3188c10e',
  @ActionID = 'DE380EDB-3301-44D7-9D93-492E3A23D564',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'One or more entities failed to vectorize';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"91c94678-9ba8-4a96-8178-459b3188c10e","ActionID":"DE380EDB-3301-44D7-9D93-492E3A23D564","ResultCode":"FAILED","IsSuccess":false,"Description":"One or more entities failed to vectorize","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '43e8f8d4-3c6a-4f15-b06e-ada7dc4ac115',
  @ActionID = '31911893-AF11-43E7-8E92-B7EF87753152',
  @Name = 'EntityList',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A comma separated list of entity names to detect changes for. If not provided, all eligible entities will be processed',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"43e8f8d4-3c6a-4f15-b06e-ada7dc4ac115","ActionID":"31911893-AF11-43E7-8E92-B7EF87753152","Name":"EntityList","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A comma separated list of entity names to detect changes for. If not provided, all eligible entities will be processed","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '3bb92f6f-a83a-4b96-8f8b-caff3a1765ac',
  @ActionID = '31911893-AF11-43E7-8E92-B7EF87753152',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Changes detected and replayed successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"3bb92f6f-a83a-4b96-8f8b-caff3a1765ac","ActionID":"31911893-AF11-43E7-8E92-B7EF87753152","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Changes detected and replayed successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '27012c7b-70ec-4c66-af42-77457972beee',
  @ActionID = '31911893-AF11-43E7-8E92-B7EF87753152',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to detect changes or failed to replay changes';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"27012c7b-70ec-4c66-af42-77457972beee","ActionID":"31911893-AF11-43E7-8E92-B7EF87753152","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to detect changes or failed to replay changes","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '9babf7fc-0d77-4c49-a861-0eb2d0401442',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Subject',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The subject of the message',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"9babf7fc-0d77-4c49-a861-0eb2d0401442","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Subject","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The subject of the message","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'd77455ce-caa4-4d09-8d52-790c4e3ae854',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Body',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The body of the message',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"d77455ce-caa4-4d09-8d52-790c4e3ae854","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Body","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The body of the message","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'ceb39fe6-1b53-406a-a64b-694e24081b47',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'To',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The recipient of the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"ceb39fe6-1b53-406a-a64b-694e24081b47","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"To","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The recipient of the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'd2561a04-8e97-41f8-be93-f7b32769d721',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'From',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The sender of the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"d2561a04-8e97-41f8-be93-f7b32769d721","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"From","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The sender of the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'db2f3f00-48cb-46bf-b671-5bb63447df8c',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Provider',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The name of the Communication Provider to use to send the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"db2f3f00-48cb-46bf-b671-5bb63447df8c","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Provider","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The name of the Communication Provider to use to send the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'e552549a-5d18-4547-813e-5e0a5d4631f5',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'MessageType',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The name of the Message Type (within the provider) to use to send the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"e552549a-5d18-4547-813e-5e0a5d4631f5","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"MessageType","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The name of the Message Type (within the provider) to use to send the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '1af46c5f-e256-42b1-8dd3-04e1561cd1e6',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Message sent successfully via the communication provider';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1af46c5f-e256-42b1-8dd3-04e1561cd1e6","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Message sent successfully via the communication provider","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '735535de-2406-46ae-a894-3f991e03c485',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to send message - check provider configuration and message parameters';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"735535de-2406-46ae-a894-3f991e03c485","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to send message - check provider configuration and message parameters","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO


-- End of SQL Logging Session
-- Session ID: 34eb7d7d-14ea-442b-8661-ebda4665ea0a
-- Completed: 2025-06-13T20:57:47.422Z
-- Duration: 375ms
-- Total Statements: 19
