-- SQL Logging Session
-- Session ID: 8f026f97-6f68-41f1-a1f5-61c1fe61d9ed
-- Started: 2025-06-13T20:33:22.340Z
-- Description: MetadataSync Push Operation
-- Generated by MemberJunction SQLServerDataProvider

-- Save Action Categories
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [ParentID] uniqueidentifier NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Parent] NVARCHAR(255) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionCategory @ID = '2759bf45-f349-4a29-853a-add695ea5d46',
  @Name = 'System',
  @Description = 'MJ System Actions',
  @ParentID = NULL,
  @Status = 'Pending';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Categories',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"2759bf45-f349-4a29-853a-add695ea5d46","Name":"System","Description":"MJ System Actions","ParentID":null,"Status":"Pending","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Parent":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateAction @CategoryID = '2759BF45-F349-4A29-853A-ADD695EA5D46',
  @Name = 'Autotag and Vectorize Content',
  @Description = 'Autotag Content and create vectors of the content items that are created.',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__AutotagAndVectorizeContent',
  @ID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"CategoryID":{"field":"CategoryID","oldValue":null,"newValue":"2759BF45-F349-4A29-853A-ADD695EA5D46"}}',
  @ChangesDescription = 'CategoryID set to 2759BF45-F349-4A29-853A-ADD695EA5D46',
  @FullRecordJSON = '{"ID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","CategoryID":"2759BF45-F349-4A29-853A-ADD695EA5D46","Name":"Autotag and Vectorize Content","Description":"Autotag Content and create vectors of the content items that are created.","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:29:56.376Z","DriverClass":"__AutotagAndVectorizeContent","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateAction @ID = 'de380edb-3301-44d7-9d93-492e3a23d564',
  @CategoryID = '2759BF45-F349-4A29-853A-ADD695EA5D46',
  @Name = 'Vectorize Entity',
  @Description = 'Action that vectorizes entities by creating and storing vector embeddings for entity documents.',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__VectorizeEntity';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"de380edb-3301-44d7-9d93-492e3a23d564","CategoryID":"2759BF45-F349-4A29-853A-ADD695EA5D46","Name":"Vectorize Entity","Description":"Action that vectorizes entities by creating and storing vector embeddings for entity documents.","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__VectorizeEntity","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateAction @ID = '31911893-af11-43e7-8e92-b7ef87753152',
  @CategoryID = '2759BF45-F349-4A29-853A-ADD695EA5D46',
  @Name = 'Run External Change Detection',
  @Description = 'Executes the External Change Detection process to identify changes in data that bypassed MemberJunction.',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__RunExternalChangeDetection';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"31911893-af11-43e7-8e92-b7ef87753152","CategoryID":"2759BF45-F349-4A29-853A-ADD695EA5D46","Name":"Run External Change Detection","Description":"Executes the External Change Detection process to identify changes in data that bypassed MemberJunction.","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__RunExternalChangeDetection","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Categories
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [ParentID] uniqueidentifier NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Parent] NVARCHAR(255) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionCategory @ID = '1d979ed6-fe72-43d2-bbc2-cafc91492d36',
  @Name = 'Communication',
  @Description = 'Communication Actions',
  @ParentID = NULL,
  @Status = 'Pending';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Categories',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1d979ed6-fe72-43d2-bbc2-cafc91492d36","Name":"Communication","Description":"Communication Actions","ParentID":null,"Status":"Pending","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Parent":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateAction @ID = '8aae8da8-ba2b-40e3-b66a-a7e09b3d868d',
  @CategoryID = '1D979ED6-FE72-43D2-BBC2-CAFC91492D36',
  @Name = 'Send Single Message',
  @Description = 'Sends a single message via the MJ Communication Framework',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__SendSingleMessage';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"8aae8da8-ba2b-40e3-b66a-a7e09b3d868d","CategoryID":"1D979ED6-FE72-43D2-BBC2-CAFC91492D36","Name":"Send Single Message","Description":"Sends a single message via the MJ Communication Framework","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__SendSingleMessage","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO


-- End of SQL Logging Session
-- Session ID: 8f026f97-6f68-41f1-a1f5-61c1fe61d9ed
-- Completed: 2025-06-13T20:33:22.526Z
-- Duration: 186ms
-- Total Statements: 6






-- SQL Logging Session
-- Session ID: 34eb7d7d-14ea-442b-8661-ebda4665ea0a
-- Started: 2025-06-13T20:57:47.047Z
-- Description: MetadataSync Push Operation
-- Generated by MemberJunction SQLServerDataProvider

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'Autotag',
  @DefaultValue = '1',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not',
  @IsRequired = 1,
  @ID = 'B2A953B5-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"},"Description":{"field":"Description","oldValue":"A bit, eh, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not","newValue":"A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not"}}',
  @ChangesDescription = 'Type changed from Input      to Input
Description changed from A bit, eh, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not to A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not',
  @FullRecordJSON = '{"ID":"B2A953B5-9C76-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"Autotag","DefaultValue":"1","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:45:20.586Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'Vectorize',
  @DefaultValue = '1',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A bit to indicate if we vectorize the content items or not. 1 indicates we should vectorize, 0 we should not',
  @IsRequired = 1,
  @ID = '0E7EF5C0-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"0E7EF5C0-9C76-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"Vectorize","DefaultValue":"1","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A bit to indicate if we vectorize the content items or not. 1 indicates we should vectorize, 0 we should not","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:45:20.610Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'EntityNames',
  @DefaultValue = 'Content Items',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 1,
  @Description = 'Name of the entity to vectorize',
  @IsRequired = 1,
  @ID = '3A8EC430-A076-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"3A8EC430-A076-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"EntityNames","DefaultValue":"Content Items","Type":"Input","ValueType":"Scalar","IsArray":true,"Description":"Name of the entity to vectorize","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:45:20.633Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'b057906d-fb4a-4026-b18a-cb11ddd86e6e',
  @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Content items successfully autotagged and vectorized';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"b057906d-fb4a-4026-b18a-cb11ddd86e6e","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Content items successfully autotagged and vectorized","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '1bbe2f60-5a02-4a33-9534-72dea51a4c3e',
  @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to autotag or vectorize content items';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1bbe2f60-5a02-4a33-9534-72dea51a4c3e","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to autotag or vectorize content items","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '1ed06a16-e3fe-428c-83ad-983c4870968b',
  @ActionID = 'DE380EDB-3301-44D7-9D93-492E3A23D564',
  @Name = 'EntityNames',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 1,
  @Description = 'Names of entities to vectorize. Can be a single entity name, comma-separated list, or array of entity names',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1ed06a16-e3fe-428c-83ad-983c4870968b","ActionID":"DE380EDB-3301-44D7-9D93-492E3A23D564","Name":"EntityNames","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":true,"Description":"Names of entities to vectorize. Can be a single entity name, comma-separated list, or array of entity names","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '6f0b4460-f45a-40fb-bceb-b3f576ddba32',
  @ActionID = 'DE380EDB-3301-44D7-9D93-492E3A23D564',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'All entities were successfully vectorized';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"6f0b4460-f45a-40fb-bceb-b3f576ddba32","ActionID":"DE380EDB-3301-44D7-9D93-492E3A23D564","ResultCode":"SUCCESS","IsSuccess":true,"Description":"All entities were successfully vectorized","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '91c94678-9ba8-4a96-8178-459b3188c10e',
  @ActionID = 'DE380EDB-3301-44D7-9D93-492E3A23D564',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'One or more entities failed to vectorize';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"91c94678-9ba8-4a96-8178-459b3188c10e","ActionID":"DE380EDB-3301-44D7-9D93-492E3A23D564","ResultCode":"FAILED","IsSuccess":false,"Description":"One or more entities failed to vectorize","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '43e8f8d4-3c6a-4f15-b06e-ada7dc4ac115',
  @ActionID = '31911893-AF11-43E7-8E92-B7EF87753152',
  @Name = 'EntityList',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A comma separated list of entity names to detect changes for. If not provided, all eligible entities will be processed',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"43e8f8d4-3c6a-4f15-b06e-ada7dc4ac115","ActionID":"31911893-AF11-43E7-8E92-B7EF87753152","Name":"EntityList","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A comma separated list of entity names to detect changes for. If not provided, all eligible entities will be processed","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '3bb92f6f-a83a-4b96-8f8b-caff3a1765ac',
  @ActionID = '31911893-AF11-43E7-8E92-B7EF87753152',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Changes detected and replayed successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"3bb92f6f-a83a-4b96-8f8b-caff3a1765ac","ActionID":"31911893-AF11-43E7-8E92-B7EF87753152","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Changes detected and replayed successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '27012c7b-70ec-4c66-af42-77457972beee',
  @ActionID = '31911893-AF11-43E7-8E92-B7EF87753152',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to detect changes or failed to replay changes';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"27012c7b-70ec-4c66-af42-77457972beee","ActionID":"31911893-AF11-43E7-8E92-B7EF87753152","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to detect changes or failed to replay changes","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '9babf7fc-0d77-4c49-a861-0eb2d0401442',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Subject',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The subject of the message',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"9babf7fc-0d77-4c49-a861-0eb2d0401442","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Subject","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The subject of the message","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'd77455ce-caa4-4d09-8d52-790c4e3ae854',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Body',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The body of the message',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"d77455ce-caa4-4d09-8d52-790c4e3ae854","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Body","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The body of the message","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'ceb39fe6-1b53-406a-a64b-694e24081b47',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'To',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The recipient of the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"ceb39fe6-1b53-406a-a64b-694e24081b47","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"To","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The recipient of the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'd2561a04-8e97-41f8-be93-f7b32769d721',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'From',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The sender of the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"d2561a04-8e97-41f8-be93-f7b32769d721","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"From","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The sender of the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'db2f3f00-48cb-46bf-b671-5bb63447df8c',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Provider',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The name of the Communication Provider to use to send the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"db2f3f00-48cb-46bf-b671-5bb63447df8c","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Provider","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The name of the Communication Provider to use to send the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'e552549a-5d18-4547-813e-5e0a5d4631f5',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'MessageType',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The name of the Message Type (within the provider) to use to send the message',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"e552549a-5d18-4547-813e-5e0a5d4631f5","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"MessageType","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The name of the Message Type (within the provider) to use to send the message","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '1af46c5f-e256-42b1-8dd3-04e1561cd1e6',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Message sent successfully via the communication provider';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1af46c5f-e256-42b1-8dd3-04e1561cd1e6","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Message sent successfully via the communication provider","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '735535de-2406-46ae-a894-3f991e03c485',
  @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to send message - check provider configuration and message parameters';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [${flyway:defaultSchema}].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"735535de-2406-46ae-a894-3f991e03c485","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to send message - check provider configuration and message parameters","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO


-- End of SQL Logging Session
-- Session ID: 34eb7d7d-14ea-442b-8661-ebda4665ea0a
-- Completed: 2025-06-13T20:57:47.422Z
-- Duration: 375ms
-- Total Statements: 19

























-- SQL Logging Session
-- Session ID: 653cd928-43e5-4c81-911b-a814b32fbd7f
-- Started: 2025-06-13T21:37:11.331Z
-- Description: MetadataSync Push Operation
-- Generated by MemberJunction SQLServerDataProvider

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'Autotag',
  @DefaultValue = '1',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not',
  @IsRequired = 1,
  @ID = 'B2A953B5-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"B2A953B5-9C76-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"Autotag","DefaultValue":"1","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A bit, to indicate if we autotag or not. 1 indicates we should autotag, 0 we should not","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:57:47.120Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'Vectorize',
  @DefaultValue = '1',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A bit to indicate if we vectorize the content items or not. 1 indicates we should vectorize, 0 we should not',
  @IsRequired = 1,
  @ID = '0E7EF5C0-9C76-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"0E7EF5C0-9C76-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"Vectorize","DefaultValue":"1","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A bit to indicate if we vectorize the content items or not. 1 indicates we should vectorize, 0 we should not","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:57:47.140Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = 'D8781B41-9C76-EF11-9C36-000D3A9EBD44',
  @Name = 'EntityNames',
  @DefaultValue = 'Content Items',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 1,
  @Description = 'Name of the entity to vectorize',
  @IsRequired = 1,
  @ID = '3A8EC430-A076-EF11-9C36-000D3A9EBD44';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"3A8EC430-A076-EF11-9C36-000D3A9EBD44","ActionID":"D8781B41-9C76-EF11-9C36-000D3A9EBD44","Name":"EntityNames","DefaultValue":"Content Items","Type":"Input","ValueType":"Scalar","IsArray":true,"Description":"Name of the entity to vectorize","IsRequired":true,"__mj_CreatedAt":"2025-06-12T22:54:44.140Z","__mj_UpdatedAt":"2025-06-13T20:57:47.156Z","Action":"Autotag and Vectorize Content"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = 'DE380EDB-3301-44D7-9D93-492E3A23D564',
  @Name = 'EntityNames',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 1,
  @Description = 'Names of entities to vectorize. Can be a single entity name, comma-separated list, or array of entity names',
  @IsRequired = 0,
  @ID = '1ED06A16-E3FE-428C-83AD-983C4870968B';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"1ED06A16-E3FE-428C-83AD-983C4870968B","ActionID":"DE380EDB-3301-44D7-9D93-492E3A23D564","Name":"EntityNames","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":true,"Description":"Names of entities to vectorize. Can be a single entity name, comma-separated list, or array of entity names","IsRequired":false,"__mj_CreatedAt":"2025-06-13T20:57:47.213Z","__mj_UpdatedAt":"2025-06-13T20:57:47.213Z","Action":"Vectorize Entity"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = '31911893-AF11-43E7-8E92-B7EF87753152',
  @Name = 'EntityList',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'A comma separated list of entity names to detect changes for. If not provided, all eligible entities will be processed',
  @IsRequired = 0,
  @ID = '43E8F8D4-3C6A-4F15-B06E-ADA7DC4AC115';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"43E8F8D4-3C6A-4F15-B06E-ADA7DC4AC115","ActionID":"31911893-AF11-43E7-8E92-B7EF87753152","Name":"EntityList","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"A comma separated list of entity names to detect changes for. If not provided, all eligible entities will be processed","IsRequired":false,"__mj_CreatedAt":"2025-06-13T20:57:47.276Z","__mj_UpdatedAt":"2025-06-13T20:57:47.276Z","Action":"Run External Change Detection"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Subject',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The subject of the message',
  @IsRequired = 0,
  @ID = '9BABF7FC-0D77-4C49-A861-0EB2D0401442';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"9BABF7FC-0D77-4C49-A861-0EB2D0401442","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Subject","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The subject of the message","IsRequired":false,"__mj_CreatedAt":"2025-06-13T20:57:47.320Z","__mj_UpdatedAt":"2025-06-13T20:57:47.320Z","Action":"Send Single Message"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Body',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The body of the message',
  @IsRequired = 0,
  @ID = 'D77455CE-CAA4-4D09-8D52-790C4E3AE854';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"D77455CE-CAA4-4D09-8D52-790C4E3AE854","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Body","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The body of the message","IsRequired":false,"__mj_CreatedAt":"2025-06-13T20:57:47.333Z","__mj_UpdatedAt":"2025-06-13T20:57:47.333Z","Action":"Send Single Message"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'To',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The recipient of the message',
  @IsRequired = 1,
  @ID = 'CEB39FE6-1B53-406A-A64B-694E24081B47';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"CEB39FE6-1B53-406A-A64B-694E24081B47","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"To","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The recipient of the message","IsRequired":true,"__mj_CreatedAt":"2025-06-13T20:57:47.346Z","__mj_UpdatedAt":"2025-06-13T20:57:47.346Z","Action":"Send Single Message"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'From',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The sender of the message',
  @IsRequired = 1,
  @ID = 'D2561A04-8E97-41F8-BE93-F7B32769D721';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"D2561A04-8E97-41F8-BE93-F7B32769D721","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"From","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The sender of the message","IsRequired":true,"__mj_CreatedAt":"2025-06-13T20:57:47.356Z","__mj_UpdatedAt":"2025-06-13T20:57:47.356Z","Action":"Send Single Message"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'Provider',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The name of the Communication Provider to use to send the message',
  @IsRequired = 1,
  @ID = 'DB2F3F00-48CB-46BF-B671-5BB63447DF8C';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"DB2F3F00-48CB-46BF-B671-5BB63447DF8C","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"Provider","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The name of the Communication Provider to use to send the message","IsRequired":true,"__mj_CreatedAt":"2025-06-13T20:57:47.370Z","__mj_UpdatedAt":"2025-06-13T20:57:47.370Z","Action":"Send Single Message"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spUpdateActionParam @ActionID = '8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D',
  @Name = 'MessageType',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The name of the Message Type (within the provider) to use to send the message',
  @IsRequired = 1,
  @ID = 'E552549A-5D18-4547-813E-5E0A5D4631F5';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Update',
  @ChangesJSON = '{"Type":{"field":"Type","oldValue":"Input     ","newValue":"Input"}}',
  @ChangesDescription = 'Type changed from Input      to Input',
  @FullRecordJSON = '{"ID":"E552549A-5D18-4547-813E-5E0A5D4631F5","ActionID":"8AAE8DA8-BA2B-40E3-B66A-A7E09B3D868D","Name":"MessageType","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The name of the Message Type (within the provider) to use to send the message","IsRequired":true,"__mj_CreatedAt":"2025-06-13T20:57:47.380Z","__mj_UpdatedAt":"2025-06-13T20:57:47.380Z","Action":"Send Single Message"}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Categories
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [ParentID] uniqueidentifier NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Parent] NVARCHAR(255) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionCategory @ID = '89c71c97-c871-47f1-ba80-4f402374d8ce',
  @Name = 'Demo',
  @Description = 'Demo Actions',
  @ParentID = NULL,
  @Status = 'Pending';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Categories',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"89c71c97-c871-47f1-ba80-4f402374d8ce","Name":"Demo","Description":"Demo Actions","ParentID":null,"Status":"Pending","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Parent":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = 'd80f7cf1-61f4-41e5-a619-b26d50cf46d4',
  @CategoryID = '89C71C97-C871-47F1-BA80-4F402374D8CE',
  @Name = 'Get Weather',
  @Description = 'Retrieves current weather information for a specified location using free public weather APIs',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__GetWeather';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"d80f7cf1-61f4-41e5-a619-b26d50cf46d4","CategoryID":"89C71C97-C871-47F1-BA80-4F402374D8CE","Name":"Get Weather","Description":"Retrieves current weather information for a specified location using free public weather APIs","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__GetWeather","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'e5e90ab0-df32-4602-9045-fb150ef25a50',
  @ActionID = 'D80F7CF1-61F4-41E5-A619-B26D50CF46D4',
  @Name = 'Location',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'City name or location to get weather for (e.g., ''New York'', ''London''). Either this or Latitude/Longitude must be provided',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"e5e90ab0-df32-4602-9045-fb150ef25a50","ActionID":"D80F7CF1-61F4-41E5-A619-B26D50CF46D4","Name":"Location","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"City name or location to get weather for (e.g., ''New York'', ''London''). Either this or Latitude/Longitude must be provided","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '90c1a357-d8f8-4688-8891-1fb1dd254530',
  @ActionID = 'D80F7CF1-61F4-41E5-A619-B26D50CF46D4',
  @Name = 'Latitude',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Latitude coordinate for weather lookup. Must be used with Longitude parameter',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"90c1a357-d8f8-4688-8891-1fb1dd254530","ActionID":"D80F7CF1-61F4-41E5-A619-B26D50CF46D4","Name":"Latitude","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Latitude coordinate for weather lookup. Must be used with Longitude parameter","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '6a211b0e-7aaf-44e7-a745-dd25ad0fc318',
  @ActionID = 'D80F7CF1-61F4-41E5-A619-B26D50CF46D4',
  @Name = 'Longitude',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Longitude coordinate for weather lookup. Must be used with Latitude parameter',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"6a211b0e-7aaf-44e7-a745-dd25ad0fc318","ActionID":"D80F7CF1-61F4-41E5-A619-B26D50CF46D4","Name":"Longitude","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Longitude coordinate for weather lookup. Must be used with Latitude parameter","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '953a52b0-64c2-49c6-b382-9c17df6a9e7b',
  @ActionID = 'D80F7CF1-61F4-41E5-A619-B26D50CF46D4',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Weather data retrieved successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"953a52b0-64c2-49c6-b382-9c17df6a9e7b","ActionID":"D80F7CF1-61F4-41E5-A619-B26D50CF46D4","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Weather data retrieved successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'c84e8a02-71bc-47fd-98e2-3872c86a594b',
  @ActionID = 'D80F7CF1-61F4-41E5-A619-B26D50CF46D4',
  @ResultCode = 'LOCATION_NOT_FOUND',
  @IsSuccess = 0,
  @Description = 'The specified location could not be found';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"c84e8a02-71bc-47fd-98e2-3872c86a594b","ActionID":"D80F7CF1-61F4-41E5-A619-B26D50CF46D4","ResultCode":"LOCATION_NOT_FOUND","IsSuccess":false,"Description":"The specified location could not be found","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '3c9382fd-31bb-4f84-a179-bdadff2aafa9',
  @ActionID = 'D80F7CF1-61F4-41E5-A619-B26D50CF46D4',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Either Location or both Latitude and Longitude parameters are required';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"3c9382fd-31bb-4f84-a179-bdadff2aafa9","ActionID":"D80F7CF1-61F4-41E5-A619-B26D50CF46D4","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Either Location or both Latitude and Longitude parameters are required","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '312a8b30-ce34-4871-b0d9-e4e64e51d63a',
  @ActionID = 'D80F7CF1-61F4-41E5-A619-B26D50CF46D4',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to retrieve weather data due to API error';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"312a8b30-ce34-4871-b0d9-e4e64e51d63a","ActionID":"D80F7CF1-61F4-41E5-A619-B26D50CF46D4","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to retrieve weather data due to API error","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = 'fccfac04-4783-4044-9cbb-a5200671beff',
  @CategoryID = '89C71C97-C871-47F1-BA80-4F402374D8CE',
  @Name = 'Get Stock Price',
  @Description = 'Retrieves current stock price and related information for a specified ticker symbol',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__GetStockPrice';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"fccfac04-4783-4044-9cbb-a5200671beff","CategoryID":"89C71C97-C871-47F1-BA80-4F402374D8CE","Name":"Get Stock Price","Description":"Retrieves current stock price and related information for a specified ticker symbol","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__GetStockPrice","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '76138000-c2d7-4340-be18-7d1ed44e78b6',
  @ActionID = 'FCCFAC04-4783-4044-9CBB-A5200671BEFF',
  @Name = 'Ticker',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Stock ticker symbol (e.g., AAPL, MSFT, GOOGL)',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"76138000-c2d7-4340-be18-7d1ed44e78b6","ActionID":"FCCFAC04-4783-4044-9CBB-A5200671BEFF","Name":"Ticker","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Stock ticker symbol (e.g., AAPL, MSFT, GOOGL)","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '9495fd7b-9ba2-457b-b06d-08c855cbe26d',
  @ActionID = 'FCCFAC04-4783-4044-9CBB-A5200671BEFF',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Stock data retrieved successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"9495fd7b-9ba2-457b-b06d-08c855cbe26d","ActionID":"FCCFAC04-4783-4044-9CBB-A5200671BEFF","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Stock data retrieved successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '0d161c0e-e1d2-4564-ae3f-b26548d1bbab',
  @ActionID = 'FCCFAC04-4783-4044-9CBB-A5200671BEFF',
  @ResultCode = 'INVALID_TICKER',
  @IsSuccess = 0,
  @Description = 'The specified ticker symbol is invalid or not found';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"0d161c0e-e1d2-4564-ae3f-b26548d1bbab","ActionID":"FCCFAC04-4783-4044-9CBB-A5200671BEFF","ResultCode":"INVALID_TICKER","IsSuccess":false,"Description":"The specified ticker symbol is invalid or not found","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '6dbbef4f-18de-4c4a-8fac-a458b024da83',
  @ActionID = 'FCCFAC04-4783-4044-9CBB-A5200671BEFF',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Ticker parameter is required';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"6dbbef4f-18de-4c4a-8fac-a458b024da83","ActionID":"FCCFAC04-4783-4044-9CBB-A5200671BEFF","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Ticker parameter is required","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'c9bcb838-cf36-4f86-afe9-a3001da04563',
  @ActionID = 'FCCFAC04-4783-4044-9CBB-A5200671BEFF',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to retrieve stock data due to API error';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"c9bcb838-cf36-4f86-afe9-a3001da04563","ActionID":"FCCFAC04-4783-4044-9CBB-A5200671BEFF","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to retrieve stock data due to API error","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = '6c8dd5d4-c63f-4693-9847-f4fd3a6a1694',
  @CategoryID = '89C71C97-C871-47F1-BA80-4F402374D8CE',
  @Name = 'Calculate Expression',
  @Description = 'Evaluates mathematical expressions supporting basic arithmetic, parentheses, and common math functions',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__CalculateExpression';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"6c8dd5d4-c63f-4693-9847-f4fd3a6a1694","CategoryID":"89C71C97-C871-47F1-BA80-4F402374D8CE","Name":"Calculate Expression","Description":"Evaluates mathematical expressions supporting basic arithmetic, parentheses, and common math functions","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__CalculateExpression","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '65701e7e-7639-4b48-8e8e-939c15e3e8cd',
  @ActionID = '6C8DD5D4-C63F-4693-9847-F4FD3A6A1694',
  @Name = 'Expression',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Mathematical expression to evaluate (e.g., ''(2*3)+4/15'', ''sqrt(16)+pow(2,3)'')',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"65701e7e-7639-4b48-8e8e-939c15e3e8cd","ActionID":"6C8DD5D4-C63F-4693-9847-F4FD3A6A1694","Name":"Expression","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Mathematical expression to evaluate (e.g., ''(2*3)+4/15'', ''sqrt(16)+pow(2,3)'')","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'bd3e8580-6070-44e0-a345-55ea0222c6bc',
  @ActionID = '6C8DD5D4-C63F-4693-9847-F4FD3A6A1694',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Expression calculated successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"bd3e8580-6070-44e0-a345-55ea0222c6bc","ActionID":"6C8DD5D4-C63F-4693-9847-F4FD3A6A1694","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Expression calculated successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '5cac8682-72ad-45b2-a55a-a15a47fba09a',
  @ActionID = '6C8DD5D4-C63F-4693-9847-F4FD3A6A1694',
  @ResultCode = 'INVALID_EXPRESSION',
  @IsSuccess = 0,
  @Description = 'The expression is invalid or contains unsafe code';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"5cac8682-72ad-45b2-a55a-a15a47fba09a","ActionID":"6C8DD5D4-C63F-4693-9847-F4FD3A6A1694","ResultCode":"INVALID_EXPRESSION","IsSuccess":false,"Description":"The expression is invalid or contains unsafe code","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '468f0d81-45b2-458f-9af8-5409fb92b623',
  @ActionID = '6C8DD5D4-C63F-4693-9847-F4FD3A6A1694',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Expression parameter is required';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"468f0d81-45b2-458f-9af8-5409fb92b623","ActionID":"6C8DD5D4-C63F-4693-9847-F4FD3A6A1694","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Expression parameter is required","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = 'd9f5cdcd-296d-48c9-a97f-a8e353cec2be',
  @CategoryID = '89C71C97-C871-47F1-BA80-4F402374D8CE',
  @Name = 'Color Converter',
  @Description = 'Converts colors between different formats (HEX, RGB, HSL, HSV) and provides color analysis',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__ColorConverter';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"d9f5cdcd-296d-48c9-a97f-a8e353cec2be","CategoryID":"89C71C97-C871-47F1-BA80-4F402374D8CE","Name":"Color Converter","Description":"Converts colors between different formats (HEX, RGB, HSL, HSV) and provides color analysis","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__ColorConverter","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'e19f588c-ec5e-4b63-ad67-a83f7be03b48',
  @ActionID = 'D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE',
  @Name = 'Color',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Color in HEX (#RGB or #RRGGBB), RGB (rgb(r,g,b)), HSL (hsl(h,s%,l%)), or color name format',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"e19f588c-ec5e-4b63-ad67-a83f7be03b48","ActionID":"D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE","Name":"Color","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Color in HEX (#RGB or #RRGGBB), RGB (rgb(r,g,b)), HSL (hsl(h,s%,l%)), or color name format","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'ee81e101-b190-4133-a4a2-0f1b798d0aed',
  @ActionID = 'D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Color converted successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"ee81e101-b190-4133-a4a2-0f1b798d0aed","ActionID":"D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Color converted successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'fcfc9f93-32e0-40d9-9734-b38c7e2fcfcc',
  @ActionID = 'D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE',
  @ResultCode = 'INVALID_FORMAT',
  @IsSuccess = 0,
  @Description = 'The color format is not recognized or invalid';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"fcfc9f93-32e0-40d9-9734-b38c7e2fcfcc","ActionID":"D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE","ResultCode":"INVALID_FORMAT","IsSuccess":false,"Description":"The color format is not recognized or invalid","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'b342ffd9-51ba-4940-84f8-f7f1dd9b229c',
  @ActionID = 'D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE',
  @ResultCode = 'INVALID_VALUES',
  @IsSuccess = 0,
  @Description = 'Color values are out of valid range';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"b342ffd9-51ba-4940-84f8-f7f1dd9b229c","ActionID":"D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE","ResultCode":"INVALID_VALUES","IsSuccess":false,"Description":"Color values are out of valid range","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '2eeedfa8-a4ba-4929-a2ad-5c61f172e270',
  @ActionID = 'D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Color parameter is required';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"2eeedfa8-a4ba-4929-a2ad-5c61f172e270","ActionID":"D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Color parameter is required","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '7783ee78-ffc9-44f0-8ff1-f72092d2b2a9',
  @ActionID = 'D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to convert color';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"7783ee78-ffc9-44f0-8ff1-f72092d2b2a9","ActionID":"D9F5CDCD-296D-48C9-A97F-A8E353CEC2BE","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to convert color","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = 'beaee095-37ee-4f9d-bca4-530dd2baa572',
  @CategoryID = '89C71C97-C871-47F1-BA80-4F402374D8CE',
  @Name = 'Text Analyzer',
  @Description = 'Analyzes text content providing statistics, readability scores, and word frequency analysis',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__TextAnalyzer';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"beaee095-37ee-4f9d-bca4-530dd2baa572","CategoryID":"89C71C97-C871-47F1-BA80-4F402374D8CE","Name":"Text Analyzer","Description":"Analyzes text content providing statistics, readability scores, and word frequency analysis","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__TextAnalyzer","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '424e8921-d16e-4674-82c0-abe4d7ce7564',
  @ActionID = 'BEAEE095-37EE-4F9D-BCA4-530DD2BAA572',
  @Name = 'Text',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The text content to analyze',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"424e8921-d16e-4674-82c0-abe4d7ce7564","ActionID":"BEAEE095-37EE-4F9D-BCA4-530DD2BAA572","Name":"Text","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The text content to analyze","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'f2eb1488-29e7-41d8-8a0b-f5829478fba5',
  @ActionID = 'BEAEE095-37EE-4F9D-BCA4-530DD2BAA572',
  @Name = 'IncludeWordFrequency',
  @DefaultValue = 'false',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Boolean flag to include word frequency analysis in results',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"f2eb1488-29e7-41d8-8a0b-f5829478fba5","ActionID":"BEAEE095-37EE-4F9D-BCA4-530DD2BAA572","Name":"IncludeWordFrequency","DefaultValue":"false","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Boolean flag to include word frequency analysis in results","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '445fcd07-2c8b-4995-add5-0f0783c94c8d',
  @ActionID = 'BEAEE095-37EE-4F9D-BCA4-530DD2BAA572',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Text analyzed successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"445fcd07-2c8b-4995-add5-0f0783c94c8d","ActionID":"BEAEE095-37EE-4F9D-BCA4-530DD2BAA572","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Text analyzed successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'fa206b60-37ed-40c4-8301-5e392f2a8138',
  @ActionID = 'BEAEE095-37EE-4F9D-BCA4-530DD2BAA572',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Text parameter is required';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"fa206b60-37ed-40c4-8301-5e392f2a8138","ActionID":"BEAEE095-37EE-4F9D-BCA4-530DD2BAA572","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Text parameter is required","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '37bbaaf6-fe4d-49d9-9458-944324ffae2a',
  @ActionID = 'BEAEE095-37EE-4F9D-BCA4-530DD2BAA572',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to analyze text';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"37bbaaf6-fe4d-49d9-9458-944324ffae2a","ActionID":"BEAEE095-37EE-4F9D-BCA4-530DD2BAA572","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to analyze text","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = '82e7a384-9c9c-449e-bd0a-f6e8531f2634',
  @CategoryID = '89C71C97-C871-47F1-BA80-4F402374D8CE',
  @Name = 'Unit Converter',
  @Description = 'Converts values between different units of measurement including length, weight, temperature, volume, area, speed, and time',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__UnitConverter';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"82e7a384-9c9c-449e-bd0a-f6e8531f2634","CategoryID":"89C71C97-C871-47F1-BA80-4F402374D8CE","Name":"Unit Converter","Description":"Converts values between different units of measurement including length, weight, temperature, volume, area, speed, and time","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__UnitConverter","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '77b750f2-ea0c-4347-9e65-1b9a4282b8b9',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @Name = 'Value',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The numeric value to convert',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"77b750f2-ea0c-4347-9e65-1b9a4282b8b9","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","Name":"Value","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The numeric value to convert","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '66829045-8beb-44c9-905c-fd17a39d9057',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @Name = 'FromUnit',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The unit to convert from (e.g., ''miles'', ''kg'', ''celsius'')',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"66829045-8beb-44c9-905c-fd17a39d9057","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","Name":"FromUnit","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The unit to convert from (e.g., ''miles'', ''kg'', ''celsius'')","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '93ea21fb-68d0-435c-8a58-61cc2485a2d5',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @Name = 'ToUnit',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The unit to convert to (e.g., ''kilometers'', ''pounds'', ''fahrenheit'')',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"93ea21fb-68d0-435c-8a58-61cc2485a2d5","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","Name":"ToUnit","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The unit to convert to (e.g., ''kilometers'', ''pounds'', ''fahrenheit'')","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '609d8fc4-09a3-4069-9be8-6c851e6bee94',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Unit conversion completed successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"609d8fc4-09a3-4069-9be8-6c851e6bee94","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Unit conversion completed successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '4a86643d-5610-4747-8add-da64e93c201c',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Value, FromUnit, and ToUnit parameters are required';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"4a86643d-5610-4747-8add-da64e93c201c","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Value, FromUnit, and ToUnit parameters are required","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'd5bdbc7f-ad1b-4394-8086-6f8997907a20',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @ResultCode = 'INVALID_VALUE',
  @IsSuccess = 0,
  @Description = 'Value must be a valid number';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"d5bdbc7f-ad1b-4394-8086-6f8997907a20","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","ResultCode":"INVALID_VALUE","IsSuccess":false,"Description":"Value must be a valid number","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'a8731d02-96be-4beb-b6cb-108d65e0564b',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @ResultCode = 'UNKNOWN_UNIT',
  @IsSuccess = 0,
  @Description = 'One or more units are not recognized';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"a8731d02-96be-4beb-b6cb-108d65e0564b","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","ResultCode":"UNKNOWN_UNIT","IsSuccess":false,"Description":"One or more units are not recognized","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '3d8ed4ee-fb2e-4995-96bf-431582646efa',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @ResultCode = 'INCOMPATIBLE_UNITS',
  @IsSuccess = 0,
  @Description = 'Cannot convert between different unit categories';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"3d8ed4ee-fb2e-4995-96bf-431582646efa","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","ResultCode":"INCOMPATIBLE_UNITS","IsSuccess":false,"Description":"Cannot convert between different unit categories","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'a15bf737-67e0-4b08-a838-d1f481ae5966',
  @ActionID = '82E7A384-9C9C-449E-BD0A-F6E8531F2634',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to convert units';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"a15bf737-67e0-4b08-a838-d1f481ae5966","ActionID":"82E7A384-9C9C-449E-BD0A-F6E8531F2634","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to convert units","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Categories
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [ParentID] uniqueidentifier NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Parent] NVARCHAR(255) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionCategory @ID = '83f1bbe0-8566-40bf-a74e-cc679cb6a886',
  @Name = 'Utilities',
  @Description = 'Utility Actions',
  @ParentID = NULL,
  @Status = 'Pending';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Categories',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"83f1bbe0-8566-40bf-a74e-cc679cb6a886","Name":"Utilities","Description":"Utility Actions","ParentID":null,"Status":"Pending","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Parent":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = 'bdd26907-6d07-4a9c-81d7-d7afdf44ed4c',
  @CategoryID = '83F1BBE0-8566-40BF-A74E-CC679CB6A886',
  @Name = 'Business Days Calculator',
  @Description = 'Calculates business days between dates, accounting for weekends and holidays. Can add/subtract business days from a date',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__BusinessDaysCalculator';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"bdd26907-6d07-4a9c-81d7-d7afdf44ed4c","CategoryID":"83F1BBE0-8566-40BF-A74E-CC679CB6A886","Name":"Business Days Calculator","Description":"Calculates business days between dates, accounting for weekends and holidays. Can add/subtract business days from a date","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__BusinessDaysCalculator","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'b32f318e-c969-46be-8317-edca666fb0b0',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @Name = 'Operation',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Operation to perform: ''DaysBetween'', ''AddDays'', or ''SubtractDays''',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"b32f318e-c969-46be-8317-edca666fb0b0","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","Name":"Operation","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Operation to perform: ''DaysBetween'', ''AddDays'', or ''SubtractDays''","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '9e0e1c76-bc38-46f1-b399-ac87ea3f78b2',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @Name = 'StartDate',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Starting date (YYYY-MM-DD format)',
  @IsRequired = 1;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"9e0e1c76-bc38-46f1-b399-ac87ea3f78b2","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","Name":"StartDate","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Starting date (YYYY-MM-DD format)","IsRequired":true,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'a5d9b445-c38b-4932-a764-3f9afd2f1fb8',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @Name = 'EndDate',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Ending date (for DaysBetween operation, YYYY-MM-DD format)',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"a5d9b445-c38b-4932-a764-3f9afd2f1fb8","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","Name":"EndDate","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Ending date (for DaysBetween operation, YYYY-MM-DD format)","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '9989add6-f115-4fc7-af8c-f5c13f7f7865',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @Name = 'Days',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Number of business days to add/subtract (for AddDays/SubtractDays operations)',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"9989add6-f115-4fc7-af8c-f5c13f7f7865","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","Name":"Days","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Number of business days to add/subtract (for AddDays/SubtractDays operations)","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'f272c32f-3501-4c30-ad90-8536a8468b96',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @Name = 'ExcludeHolidays',
  @DefaultValue = 'true',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Boolean to exclude holidays (default: true)',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"f272c32f-3501-4c30-ad90-8536a8468b96","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","Name":"ExcludeHolidays","DefaultValue":"true","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Boolean to exclude holidays (default: true)","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'f713f017-0737-4a61-a8d2-528b62010513',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @Name = 'Country',
  @DefaultValue = 'US',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Country code for holiday calendar (default: ''US'')',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"f713f017-0737-4a61-a8d2-528b62010513","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","Name":"Country","DefaultValue":"US","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Country code for holiday calendar (default: ''US'')","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'b35ba2dc-92af-4de0-b0d2-66581ca0531f',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Business days calculated successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"b35ba2dc-92af-4de0-b0d2-66581ca0531f","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Business days calculated successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'bf19429b-b295-4f83-8450-c8a84db369e3',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Required parameters are missing';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"bf19429b-b295-4f83-8450-c8a84db369e3","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Required parameters are missing","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '50200114-226c-4d96-bfca-42eec5e0108c',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @ResultCode = 'INVALID_DATE',
  @IsSuccess = 0,
  @Description = 'Invalid date format provided';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"50200114-226c-4d96-bfca-42eec5e0108c","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","ResultCode":"INVALID_DATE","IsSuccess":false,"Description":"Invalid date format provided","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '213a31f6-0c36-491d-ba26-ecb1de925ee9',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @ResultCode = 'INVALID_VALUE',
  @IsSuccess = 0,
  @Description = 'Invalid value provided for Days parameter';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"213a31f6-0c36-491d-ba26-ecb1de925ee9","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","ResultCode":"INVALID_VALUE","IsSuccess":false,"Description":"Invalid value provided for Days parameter","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '7cfca097-f008-4c39-8bdf-669a26d06efd',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @ResultCode = 'INVALID_OPERATION',
  @IsSuccess = 0,
  @Description = 'Invalid operation specified';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"7cfca097-f008-4c39-8bdf-669a26d06efd","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","ResultCode":"INVALID_OPERATION","IsSuccess":false,"Description":"Invalid operation specified","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'ca263e39-4e7e-408b-9447-1fc64ee25559',
  @ActionID = 'BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to calculate business days';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"ca263e39-4e7e-408b-9447-1fc64ee25559","ActionID":"BDD26907-6D07-4A9C-81D7-D7AFDF44ED4C","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to calculate business days","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = 'ae4310e3-1b99-42d0-a371-ff51b35fc2be',
  @CategoryID = '83F1BBE0-8566-40BF-A74E-CC679CB6A886',
  @Name = 'IP Geolocation',
  @Description = 'Retrieves geolocation information for an IP address including location, timezone, ISP, and privacy indicators',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__IPGeolocation';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"ae4310e3-1b99-42d0-a371-ff51b35fc2be","CategoryID":"83F1BBE0-8566-40BF-A74E-CC679CB6A886","Name":"IP Geolocation","Description":"Retrieves geolocation information for an IP address including location, timezone, ISP, and privacy indicators","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__IPGeolocation","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '0d8651ae-b1d1-4251-b274-5df0176480c9',
  @ActionID = 'AE4310E3-1B99-42D0-A371-FF51B35FC2BE',
  @Name = 'IPAddress',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'The IP address to lookup (optional - uses caller''s IP if not provided)',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"0d8651ae-b1d1-4251-b274-5df0176480c9","ActionID":"AE4310E3-1B99-42D0-A371-FF51B35FC2BE","Name":"IPAddress","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"The IP address to lookup (optional - uses caller''s IP if not provided)","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '548e5f8c-432c-4d2c-9267-b97518ff6e06',
  @ActionID = 'AE4310E3-1B99-42D0-A371-FF51B35FC2BE',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Geolocation data retrieved successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"548e5f8c-432c-4d2c-9267-b97518ff6e06","ActionID":"AE4310E3-1B99-42D0-A371-FF51B35FC2BE","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Geolocation data retrieved successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '46f79f03-c351-4ff5-8863-f14d1696767d',
  @ActionID = 'AE4310E3-1B99-42D0-A371-FF51B35FC2BE',
  @ResultCode = 'INVALID_IP',
  @IsSuccess = 0,
  @Description = 'Invalid IP address format';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"46f79f03-c351-4ff5-8863-f14d1696767d","ActionID":"AE4310E3-1B99-42D0-A371-FF51B35FC2BE","ResultCode":"INVALID_IP","IsSuccess":false,"Description":"Invalid IP address format","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '81a8918f-a8e8-4ecb-9b14-75c762203912',
  @ActionID = 'AE4310E3-1B99-42D0-A371-FF51B35FC2BE',
  @ResultCode = 'LOOKUP_FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to retrieve geolocation data';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"81a8918f-a8e8-4ecb-9b14-75c762203912","ActionID":"AE4310E3-1B99-42D0-A371-FF51B35FC2BE","ResultCode":"LOOKUP_FAILED","IsSuccess":false,"Description":"Failed to retrieve geolocation data","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '86b5a9c2-21fd-404f-977c-16b246b3089f',
  @ActionID = 'AE4310E3-1B99-42D0-A371-FF51B35FC2BE',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to get IP geolocation';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"86b5a9c2-21fd-404f-977c-16b246b3089f","ActionID":"AE4310E3-1B99-42D0-A371-FF51B35FC2BE","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to get IP geolocation","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Actions
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [CategoryID] uniqueidentifier NULL,
  [Name] NVARCHAR(425) NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [UserPrompt] NVARCHAR(MAX) NULL,
  [UserComments] NVARCHAR(MAX) NULL,
  [Code] NVARCHAR(MAX) NULL,
  [CodeComments] NVARCHAR(MAX) NULL,
  [CodeApprovalStatus] NVARCHAR(20) NOT NULL,
  [CodeApprovalComments] NVARCHAR(MAX) NULL,
  [CodeApprovedByUserID] uniqueidentifier NULL,
  [CodeApprovedAt] datetime NULL,
  [CodeLocked] BIT NOT NULL,
  [ForceCodeGeneration] BIT NOT NULL,
  [RetentionPeriod] INT NULL,
  [Status] NVARCHAR(20) NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [DriverClass] NVARCHAR(255) NULL,
  [Category] NVARCHAR(255) NULL,
  [CodeApprovedByUser] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateAction @ID = '28e73588-901b-4a1f-b6f9-049e2f213c94',
  @CategoryID = '83F1BBE0-8566-40BF-A74E-CC679CB6A886',
  @Name = 'Census Data Lookup',
  @Description = 'Retrieves US Census demographic and economic data for a given ZIP code or city/state location',
  @Type = 'Custom',
  @UserPrompt = NULL,
  @UserComments = NULL,
  @Code = NULL,
  @CodeComments = NULL,
  @CodeApprovalStatus = 'Pending',
  @CodeApprovalComments = NULL,
  @CodeApprovedByUserID = NULL,
  @CodeApprovedAt = NULL,
  @CodeLocked = 0,
  @ForceCodeGeneration = 0,
  @RetentionPeriod = NULL,
  @Status = 'Active',
  @DriverClass = '__CensusDataLookup';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Actions',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"28e73588-901b-4a1f-b6f9-049e2f213c94","CategoryID":"83F1BBE0-8566-40BF-A74E-CC679CB6A886","Name":"Census Data Lookup","Description":"Retrieves US Census demographic and economic data for a given ZIP code or city/state location","Type":"Custom","UserPrompt":null,"UserComments":null,"Code":null,"CodeComments":null,"CodeApprovalStatus":"Pending","CodeApprovalComments":null,"CodeApprovedByUserID":null,"CodeApprovedAt":null,"CodeLocked":false,"ForceCodeGeneration":false,"RetentionPeriod":null,"Status":"Active","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"DriverClass":"__CensusDataLookup","Category":null,"CodeApprovedByUser":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '98b13dd0-19b1-4702-a91d-f6ecd056f0fe',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @Name = 'ZipCode',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'ZIP code to lookup (either this or City/State required)',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"98b13dd0-19b1-4702-a91d-f6ecd056f0fe","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","Name":"ZipCode","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"ZIP code to lookup (either this or City/State required)","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '2b916089-c5b0-42fe-b1ac-dfef32c0ba1b',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @Name = 'City',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'City name (must be used with State)',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"2b916089-c5b0-42fe-b1ac-dfef32c0ba1b","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","Name":"City","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"City name (must be used with State)","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = '1177fda7-6c5f-4a5c-82b8-d7ffcafc2345',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @Name = 'State',
  @DefaultValue = NULL,
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'State name or abbreviation (must be used with City)',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"1177fda7-6c5f-4a5c-82b8-d7ffcafc2345","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","Name":"State","DefaultValue":null,"Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"State name or abbreviation (must be used with City)","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Params
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [Name] NVARCHAR(255) NOT NULL,
  [DefaultValue] NVARCHAR(MAX) NULL,
  [Type] NCHAR(10) NOT NULL,
  [ValueType] NVARCHAR(30) NOT NULL,
  [IsArray] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [IsRequired] BIT NOT NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionParam @ID = 'e59756c1-4124-4f24-9cae-1da0ca24f50a',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @Name = 'DataSet',
  @DefaultValue = 'summary',
  @Type = 'Input',
  @ValueType = 'Scalar',
  @IsArray = 0,
  @Description = 'Type of data to retrieve (default: ''summary'')',
  @IsRequired = 0;

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Params',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"e59756c1-4124-4f24-9cae-1da0ca24f50a","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","Name":"DataSet","DefaultValue":"summary","Type":"Input","ValueType":"Scalar","IsArray":false,"Description":"Type of data to retrieve (default: ''summary'')","IsRequired":false,"__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'bb5f64c4-dd20-424d-9277-634f8a0a0cd4',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @ResultCode = 'SUCCESS',
  @IsSuccess = 1,
  @Description = 'Census data retrieved successfully';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"bb5f64c4-dd20-424d-9277-634f8a0a0cd4","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","ResultCode":"SUCCESS","IsSuccess":true,"Description":"Census data retrieved successfully","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '2edc3488-1c48-437e-aeea-003debca0223',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @ResultCode = 'MISSING_PARAMETERS',
  @IsSuccess = 0,
  @Description = 'Either ZipCode or both City and State parameters are required';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"2edc3488-1c48-437e-aeea-003debca0223","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","ResultCode":"MISSING_PARAMETERS","IsSuccess":false,"Description":"Either ZipCode or both City and State parameters are required","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = 'b4dcceb5-7f48-45be-929a-d91b3e98c0b0',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @ResultCode = 'INVALID_ZIP',
  @IsSuccess = 0,
  @Description = 'Invalid ZIP code format. Must be 5 digits';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"b4dcceb5-7f48-45be-929a-d91b3e98c0b0","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","ResultCode":"INVALID_ZIP","IsSuccess":false,"Description":"Invalid ZIP code format. Must be 5 digits","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '57a4e3ab-6188-402f-b143-058b3e7a2278',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @ResultCode = 'INVALID_STATE',
  @IsSuccess = 0,
  @Description = 'Invalid state name or abbreviation';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"57a4e3ab-6188-402f-b143-058b3e7a2278","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","ResultCode":"INVALID_STATE","IsSuccess":false,"Description":"Invalid state name or abbreviation","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '62f03515-2f7c-40f4-ba03-0bc82ea0a865',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @ResultCode = 'NOT_FOUND',
  @IsSuccess = 0,
  @Description = 'Location not found or no data available';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"62f03515-2f7c-40f4-ba03-0bc82ea0a865","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","ResultCode":"NOT_FOUND","IsSuccess":false,"Description":"Location not found or no data available","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO

-- Save Action Result Codes
DECLARE @ResultTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [ActionID] uniqueidentifier NOT NULL,
  [ResultCode] NVARCHAR(255) NOT NULL,
  [IsSuccess] BIT NOT NULL,
  [Description] NVARCHAR(MAX) NULL,
  [__mj_CreatedAt] DATETIMEOFFSET NOT NULL,
  [__mj_UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Action] NVARCHAR(425) NULL
);

INSERT INTO
  @ResultTable
EXEC [__mj].spCreateActionResultCode @ID = '60df73f4-ab4b-472e-9ef9-39f3619ccd94',
  @ActionID = '28E73588-901B-4A1F-B6F9-049E2F213C94',
  @ResultCode = 'FAILED',
  @IsSuccess = 0,
  @Description = 'Failed to retrieve census data';

DECLARE @ID NVARCHAR(MAX);

SELECT
  @ID = CONCAT('ID', '|', ID)
FROM
  @ResultTable;

IF @ID IS NOT NULL
BEGIN
DECLARE @ResultChangesTable
TABLE (
  [ID] uniqueidentifier NOT NULL,
  [EntityID] uniqueidentifier NOT NULL,
  [RecordID] NVARCHAR(750) NOT NULL,
  [UserID] uniqueidentifier NOT NULL,
  [Type] NVARCHAR(20) NOT NULL,
  [Source] NVARCHAR(20) NOT NULL,
  [ChangedAt] DATETIMEOFFSET NOT NULL,
  [ChangesJSON] NVARCHAR(MAX) NOT NULL,
  [ChangesDescription] NVARCHAR(MAX) NOT NULL,
  [FullRecordJSON] NVARCHAR(MAX) NOT NULL,
  [Status] NVARCHAR(50) NOT NULL,
  [ErrorLog] NVARCHAR(MAX) NULL,
  [ReplayRunID] uniqueidentifier NULL,
  [IntegrationID] uniqueidentifier NULL,
  [Comments] NVARCHAR(MAX) NULL,
  [CreatedAt] DATETIMEOFFSET NOT NULL,
  [UpdatedAt] DATETIMEOFFSET NOT NULL,
  [Entity] NVARCHAR(255) NULL,
  [User] NVARCHAR(100) NULL,
  [Integration] NVARCHAR(100) NULL
);

INSERT INTO
  @ResultChangesTable
EXEC [__mj].spCreateRecordChange_Internal @EntityName = 'Action Result Codes',
  @RecordID = @ID,
  @UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
  @Type = 'Create',
  @ChangesJSON = '',
  @ChangesDescription = 'Record Created',
  @FullRecordJSON = '{"ID":"60df73f4-ab4b-472e-9ef9-39f3619ccd94","ActionID":"28E73588-901B-4A1F-B6F9-049E2F213C94","ResultCode":"FAILED","IsSuccess":false,"Description":"Failed to retrieve census data","__mj_CreatedAt":null,"__mj_UpdatedAt":null,"Action":null}',
  @Status = 'Complete',
  @Comments = NULL;
END;

SELECT
  *
FROM
  @ResultTable;;

GO


-- End of SQL Logging Session
-- Session ID: 653cd928-43e5-4c81-911b-a814b32fbd7f
-- Completed: 2025-06-13T21:37:12.746Z
-- Duration: 1415ms
-- Total Statements: 85
