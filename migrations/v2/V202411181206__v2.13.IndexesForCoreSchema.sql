-- indexes here are custom, not fkey generations

CREATE INDEX IX_EntityField_Name
ON ${flyway:defaultSchema}.EntityField (Name);

-- Index on Name
CREATE INDEX IX_Entity_Name
ON ${flyway:defaultSchema}.Entity (Name);

-- Index on BaseTable
CREATE INDEX IX_Entity_BaseTable
ON ${flyway:defaultSchema}.Entity (BaseTable);

-- Index on BaseView
CREATE INDEX IX_Entity_BaseView
ON ${flyway:defaultSchema}.Entity (BaseView);

-- Index on SchemaName
CREATE INDEX IX_Entity_SchemaName
ON ${flyway:defaultSchema}.Entity (SchemaName);

CREATE INDEX IX_Entity_Name_BaseTable_SchemaName
ON ${flyway:defaultSchema}.Entity (Name, BaseTable, SchemaName);

CREATE INDEX IX_Entity_ID_SchemaName_BaseTable
ON [${flyway:defaultSchema}].Entity (ID, SchemaName, BaseTable);

CREATE INDEX IX_EntityField_EntityID_Name
ON [${flyway:defaultSchema}].EntityField (EntityID, Name);


 
-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Actions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CategoryID in table Action
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Action_CategoryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Action]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Action_CategoryID ON [${flyway:defaultSchema}].[Action] ([CategoryID]);

-- Index for foreign key CodeApprovedByUserID in table Action
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Action_CodeApprovedByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Action]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Action_CodeApprovedByUserID ON [${flyway:defaultSchema}].[Action] ([CodeApprovedByUserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Authorizations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ActionID in table ActionAuthorization
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionAuthorization_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionAuthorization]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionAuthorization_ActionID ON [${flyway:defaultSchema}].[ActionAuthorization] ([ActionID]);

-- Index for foreign key AuthorizationID in table ActionAuthorization
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionAuthorization_AuthorizationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionAuthorization]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionAuthorization_AuthorizationID ON [${flyway:defaultSchema}].[ActionAuthorization] ([AuthorizationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Categories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table ActionCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionCategory_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionCategory_ParentID ON [${flyway:defaultSchema}].[ActionCategory] ([ParentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Contexts
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ActionID in table ActionContext
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionContext_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionContext]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionContext_ActionID ON [${flyway:defaultSchema}].[ActionContext] ([ActionID]);

-- Index for foreign key ContextTypeID in table ActionContext
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionContext_ContextTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionContext]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionContext_ContextTypeID ON [${flyway:defaultSchema}].[ActionContext] ([ContextTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Context Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Execution Logs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ActionID in table ActionExecutionLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionExecutionLog_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionExecutionLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionExecutionLog_ActionID ON [${flyway:defaultSchema}].[ActionExecutionLog] ([ActionID]);

-- Index for foreign key UserID in table ActionExecutionLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionExecutionLog_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionExecutionLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionExecutionLog_UserID ON [${flyway:defaultSchema}].[ActionExecutionLog] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Filters
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Libraries
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ActionID in table ActionLibrary
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionLibrary_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionLibrary]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionLibrary_ActionID ON [${flyway:defaultSchema}].[ActionLibrary] ([ActionID]);

-- Index for foreign key LibraryID in table ActionLibrary
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionLibrary_LibraryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionLibrary]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionLibrary_LibraryID ON [${flyway:defaultSchema}].[ActionLibrary] ([LibraryID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Params
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ActionID in table ActionParam
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionParam_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionParam]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionParam_ActionID ON [${flyway:defaultSchema}].[ActionParam] ([ActionID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Action Result Codes
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ActionID in table ActionResultCode
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ActionResultCode_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ActionResultCode]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ActionResultCode_ActionID ON [${flyway:defaultSchema}].[ActionResultCode] ([ActionID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Actions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key DefaultModelID in table AIAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIAction_DefaultModelID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIAction_DefaultModelID ON [${flyway:defaultSchema}].[AIAction] ([DefaultModelID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Models
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key AIModelTypeID in table AIModel
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIModel_AIModelTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIModel]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIModel_AIModelTypeID ON [${flyway:defaultSchema}].[AIModel] ([AIModelTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Model Actions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key AIModelID in table AIModelAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIModelAction_AIModelID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIModelAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIModelAction_AIModelID ON [${flyway:defaultSchema}].[AIModelAction] ([AIModelID]);

-- Index for foreign key AIActionID in table AIModelAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIModelAction_AIActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIModelAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIModelAction_AIActionID ON [${flyway:defaultSchema}].[AIModelAction] ([AIActionID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Model Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Prompts
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key TemplateID in table AIPrompt
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIPrompt_TemplateID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIPrompt]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIPrompt_TemplateID ON [${flyway:defaultSchema}].[AIPrompt] ([TemplateID]);

-- Index for foreign key CategoryID in table AIPrompt
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIPrompt_CategoryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIPrompt]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIPrompt_CategoryID ON [${flyway:defaultSchema}].[AIPrompt] ([CategoryID]);

-- Index for foreign key TypeID in table AIPrompt
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIPrompt_TypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIPrompt]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIPrompt_TypeID ON [${flyway:defaultSchema}].[AIPrompt] ([TypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Prompt Categories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table AIPromptCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIPromptCategory_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIPromptCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIPromptCategory_ParentID ON [${flyway:defaultSchema}].[AIPromptCategory] ([ParentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Prompt Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: AI Result Cache
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key AIPromptID in table AIResultCache
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIResultCache_AIPromptID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIResultCache]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIResultCache_AIPromptID ON [${flyway:defaultSchema}].[AIResultCache] ([AIPromptID]);

-- Index for foreign key AIModelID in table AIResultCache
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AIResultCache_AIModelID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AIResultCache]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AIResultCache_AIModelID ON [${flyway:defaultSchema}].[AIResultCache] ([AIModelID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Applications
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Application Entities
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ApplicationID in table ApplicationEntity
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ApplicationEntity_ApplicationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ApplicationEntity]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ApplicationEntity_ApplicationID ON [${flyway:defaultSchema}].[ApplicationEntity] ([ApplicationID]);

-- Index for foreign key EntityID in table ApplicationEntity
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ApplicationEntity_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ApplicationEntity]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ApplicationEntity_EntityID ON [${flyway:defaultSchema}].[ApplicationEntity] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Application Settings
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ApplicationID in table ApplicationSetting
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ApplicationSetting_ApplicationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ApplicationSetting]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ApplicationSetting_ApplicationID ON [${flyway:defaultSchema}].[ApplicationSetting] ([ApplicationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Audit Logs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key UserID in table AuditLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuditLog_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuditLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuditLog_UserID ON [${flyway:defaultSchema}].[AuditLog] ([UserID]);

-- Index for foreign key AuditLogTypeID in table AuditLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuditLog_AuditLogTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuditLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuditLog_AuditLogTypeID ON [${flyway:defaultSchema}].[AuditLog] ([AuditLogTypeID]);

-- Index for foreign key AuthorizationID in table AuditLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuditLog_AuthorizationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuditLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuditLog_AuthorizationID ON [${flyway:defaultSchema}].[AuditLog] ([AuthorizationID]);

-- Index for foreign key EntityID in table AuditLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuditLog_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuditLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuditLog_EntityID ON [${flyway:defaultSchema}].[AuditLog] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Audit Log Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table AuditLogType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuditLogType_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuditLogType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuditLogType_ParentID ON [${flyway:defaultSchema}].[AuditLogType] ([ParentID]);

-- Index for foreign key AuthorizationID in table AuditLogType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuditLogType_AuthorizationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuditLogType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuditLogType_AuthorizationID ON [${flyway:defaultSchema}].[AuditLogType] ([AuthorizationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Authorizations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table Authorization
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Authorization_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Authorization]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Authorization_ParentID ON [${flyway:defaultSchema}].[Authorization] ([ParentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Authorization Roles
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key AuthorizationID in table AuthorizationRole
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuthorizationRole_AuthorizationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuthorizationRole]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuthorizationRole_AuthorizationID ON [${flyway:defaultSchema}].[AuthorizationRole] ([AuthorizationID]);

-- Index for foreign key RoleID in table AuthorizationRole
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_AuthorizationRole_RoleID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[AuthorizationRole]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_AuthorizationRole_RoleID ON [${flyway:defaultSchema}].[AuthorizationRole] ([RoleID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Communication Base Message Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Communication Logs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CommunicationProviderID in table CommunicationLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CommunicationLog_CommunicationProviderID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CommunicationLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CommunicationLog_CommunicationProviderID ON [${flyway:defaultSchema}].[CommunicationLog] ([CommunicationProviderID]);

-- Index for foreign key CommunicationProviderMessageTypeID in table CommunicationLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CommunicationLog_CommunicationProviderMessageTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CommunicationLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CommunicationLog_CommunicationProviderMessageTypeID ON [${flyway:defaultSchema}].[CommunicationLog] ([CommunicationProviderMessageTypeID]);

-- Index for foreign key CommunicationRunID in table CommunicationLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CommunicationLog_CommunicationRunID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CommunicationLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CommunicationLog_CommunicationRunID ON [${flyway:defaultSchema}].[CommunicationLog] ([CommunicationRunID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Communication Providers
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Communication Provider Message Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CommunicationProviderID in table CommunicationProviderMessageType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CommunicationProviderMessageType_CommunicationProviderID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CommunicationProviderMessageType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CommunicationProviderMessageType_CommunicationProviderID ON [${flyway:defaultSchema}].[CommunicationProviderMessageType] ([CommunicationProviderID]);

-- Index for foreign key CommunicationBaseMessageTypeID in table CommunicationProviderMessageType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CommunicationProviderMessageType_CommunicationBaseMessageTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CommunicationProviderMessageType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CommunicationProviderMessageType_CommunicationBaseMessageTypeID ON [${flyway:defaultSchema}].[CommunicationProviderMessageType] ([CommunicationBaseMessageTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Communication Runs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key UserID in table CommunicationRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CommunicationRun_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CommunicationRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CommunicationRun_UserID ON [${flyway:defaultSchema}].[CommunicationRun] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Companies
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Company Integrations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CompanyID in table CompanyIntegration
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegration_CompanyID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegration]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegration_CompanyID ON [${flyway:defaultSchema}].[CompanyIntegration] ([CompanyID]);

-- Index for foreign key IntegrationID in table CompanyIntegration
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegration_IntegrationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegration]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegration_IntegrationID ON [${flyway:defaultSchema}].[CompanyIntegration] ([IntegrationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Company Integration Record Maps
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CompanyIntegrationID in table CompanyIntegrationRecordMap
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegrationRecordMap_CompanyIntegrationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegrationRecordMap]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegrationRecordMap_CompanyIntegrationID ON [${flyway:defaultSchema}].[CompanyIntegrationRecordMap] ([CompanyIntegrationID]);

-- Index for foreign key EntityID in table CompanyIntegrationRecordMap
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegrationRecordMap_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegrationRecordMap]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegrationRecordMap_EntityID ON [${flyway:defaultSchema}].[CompanyIntegrationRecordMap] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Company Integration Runs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CompanyIntegrationID in table CompanyIntegrationRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegrationRun_CompanyIntegrationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegrationRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegrationRun_CompanyIntegrationID ON [${flyway:defaultSchema}].[CompanyIntegrationRun] ([CompanyIntegrationID]);

-- Index for foreign key RunByUserID in table CompanyIntegrationRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegrationRun_RunByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegrationRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegrationRun_RunByUserID ON [${flyway:defaultSchema}].[CompanyIntegrationRun] ([RunByUserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Company Integration Run API Logs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CompanyIntegrationRunID in table CompanyIntegrationRunAPILog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegrationRunAPILog_CompanyIntegrationRunID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegrationRunAPILog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegrationRunAPILog_CompanyIntegrationRunID ON [${flyway:defaultSchema}].[CompanyIntegrationRunAPILog] ([CompanyIntegrationRunID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Company Integration Run Details
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CompanyIntegrationRunID in table CompanyIntegrationRunDetail
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegrationRunDetail_CompanyIntegrationRunID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegrationRunDetail]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegrationRunDetail_CompanyIntegrationRunID ON [${flyway:defaultSchema}].[CompanyIntegrationRunDetail] ([CompanyIntegrationRunID]);

-- Index for foreign key EntityID in table CompanyIntegrationRunDetail
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_CompanyIntegrationRunDetail_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[CompanyIntegrationRunDetail]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_CompanyIntegrationRunDetail_EntityID ON [${flyway:defaultSchema}].[CompanyIntegrationRunDetail] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content File Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Items
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ContentSourceID in table ContentItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentItem_ContentSourceID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentItem_ContentSourceID ON [${flyway:defaultSchema}].[ContentItem] ([ContentSourceID]);

-- Index for foreign key ContentTypeID in table ContentItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentItem_ContentTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentItem_ContentTypeID ON [${flyway:defaultSchema}].[ContentItem] ([ContentTypeID]);

-- Index for foreign key ContentSourceTypeID in table ContentItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentItem_ContentSourceTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentItem_ContentSourceTypeID ON [${flyway:defaultSchema}].[ContentItem] ([ContentSourceTypeID]);

-- Index for foreign key ContentFileTypeID in table ContentItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentItem_ContentFileTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentItem_ContentFileTypeID ON [${flyway:defaultSchema}].[ContentItem] ([ContentFileTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Item Attributes
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ContentItemID in table ContentItemAttribute
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentItemAttribute_ContentItemID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentItemAttribute]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentItemAttribute_ContentItemID ON [${flyway:defaultSchema}].[ContentItemAttribute] ([ContentItemID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Item Tags
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ItemID in table ContentItemTag
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentItemTag_ItemID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentItemTag]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentItemTag_ItemID ON [${flyway:defaultSchema}].[ContentItemTag] ([ItemID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Process Runs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key SourceID in table ContentProcessRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentProcessRun_SourceID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentProcessRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentProcessRun_SourceID ON [${flyway:defaultSchema}].[ContentProcessRun] ([SourceID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Sources
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ContentTypeID in table ContentSource
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentSource_ContentTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentSource]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentSource_ContentTypeID ON [${flyway:defaultSchema}].[ContentSource] ([ContentTypeID]);

-- Index for foreign key ContentSourceTypeID in table ContentSource
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentSource_ContentSourceTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentSource]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentSource_ContentSourceTypeID ON [${flyway:defaultSchema}].[ContentSource] ([ContentSourceTypeID]);

-- Index for foreign key ContentFileTypeID in table ContentSource
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentSource_ContentFileTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentSource]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentSource_ContentFileTypeID ON [${flyway:defaultSchema}].[ContentSource] ([ContentFileTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Source Params
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ContentSourceID in table ContentSourceParam
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentSourceParam_ContentSourceID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentSourceParam]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentSourceParam_ContentSourceID ON [${flyway:defaultSchema}].[ContentSourceParam] ([ContentSourceID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Source Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Source Type Params
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key AIModelID in table ContentType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ContentType_AIModelID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ContentType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ContentType_AIModelID ON [${flyway:defaultSchema}].[ContentType] ([AIModelID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Content Type Attributes
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Conversations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key UserID in table Conversation
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Conversation_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Conversation]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Conversation_UserID ON [${flyway:defaultSchema}].[Conversation] ([UserID]);

-- Index for foreign key LinkedEntityID in table Conversation
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Conversation_LinkedEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Conversation]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Conversation_LinkedEntityID ON [${flyway:defaultSchema}].[Conversation] ([LinkedEntityID]);

-- Index for foreign key DataContextID in table Conversation
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Conversation_DataContextID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Conversation]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Conversation_DataContextID ON [${flyway:defaultSchema}].[Conversation] ([DataContextID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Conversation Details
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ConversationID in table ConversationDetail
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ConversationDetail_ConversationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ConversationDetail]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ConversationDetail_ConversationID ON [${flyway:defaultSchema}].[ConversationDetail] ([ConversationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Dashboards
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key UserID in table Dashboard
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Dashboard_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Dashboard]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Dashboard_UserID ON [${flyway:defaultSchema}].[Dashboard] ([UserID]);

-- Index for foreign key CategoryID in table Dashboard
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Dashboard_CategoryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Dashboard]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Dashboard_CategoryID ON [${flyway:defaultSchema}].[Dashboard] ([CategoryID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Dashboard Categories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table DashboardCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DashboardCategory_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DashboardCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DashboardCategory_ParentID ON [${flyway:defaultSchema}].[DashboardCategory] ([ParentID]);

-- Index for foreign key UserID in table DashboardCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DashboardCategory_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DashboardCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DashboardCategory_UserID ON [${flyway:defaultSchema}].[DashboardCategory] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Data Contexts
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key UserID in table DataContext
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DataContext_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DataContext]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DataContext_UserID ON [${flyway:defaultSchema}].[DataContext] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Data Context Items
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key DataContextID in table DataContextItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DataContextItem_DataContextID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DataContextItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DataContextItem_DataContextID ON [${flyway:defaultSchema}].[DataContextItem] ([DataContextID]);

-- Index for foreign key ViewID in table DataContextItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DataContextItem_ViewID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DataContextItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DataContextItem_ViewID ON [${flyway:defaultSchema}].[DataContextItem] ([ViewID]);

-- Index for foreign key QueryID in table DataContextItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DataContextItem_QueryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DataContextItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DataContextItem_QueryID ON [${flyway:defaultSchema}].[DataContextItem] ([QueryID]);

-- Index for foreign key EntityID in table DataContextItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DataContextItem_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DataContextItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DataContextItem_EntityID ON [${flyway:defaultSchema}].[DataContextItem] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Datasets
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Dataset Items
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key DatasetID in table DatasetItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DatasetItem_DatasetID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DatasetItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DatasetItem_DatasetID ON [${flyway:defaultSchema}].[DatasetItem] ([DatasetID]);

-- Index for foreign key EntityID in table DatasetItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DatasetItem_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DatasetItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DatasetItem_EntityID ON [${flyway:defaultSchema}].[DatasetItem] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Duplicate Runs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table DuplicateRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DuplicateRun_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DuplicateRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DuplicateRun_EntityID ON [${flyway:defaultSchema}].[DuplicateRun] ([EntityID]);

-- Index for foreign key StartedByUserID in table DuplicateRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DuplicateRun_StartedByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DuplicateRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DuplicateRun_StartedByUserID ON [${flyway:defaultSchema}].[DuplicateRun] ([StartedByUserID]);

-- Index for foreign key SourceListID in table DuplicateRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DuplicateRun_SourceListID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DuplicateRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DuplicateRun_SourceListID ON [${flyway:defaultSchema}].[DuplicateRun] ([SourceListID]);

-- Index for foreign key ApprovedByUserID in table DuplicateRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DuplicateRun_ApprovedByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DuplicateRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DuplicateRun_ApprovedByUserID ON [${flyway:defaultSchema}].[DuplicateRun] ([ApprovedByUserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Duplicate Run Details
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key DuplicateRunID in table DuplicateRunDetail
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DuplicateRunDetail_DuplicateRunID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DuplicateRunDetail]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DuplicateRunDetail_DuplicateRunID ON [${flyway:defaultSchema}].[DuplicateRunDetail] ([DuplicateRunID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Duplicate Run Detail Matches
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key DuplicateRunDetailID in table DuplicateRunDetailMatch
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DuplicateRunDetailMatch_DuplicateRunDetailID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DuplicateRunDetailMatch]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DuplicateRunDetailMatch_DuplicateRunDetailID ON [${flyway:defaultSchema}].[DuplicateRunDetailMatch] ([DuplicateRunDetailID]);

-- Index for foreign key RecordMergeLogID in table DuplicateRunDetailMatch
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_DuplicateRunDetailMatch_RecordMergeLogID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[DuplicateRunDetailMatch]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_DuplicateRunDetailMatch_RecordMergeLogID ON [${flyway:defaultSchema}].[DuplicateRunDetailMatch] ([RecordMergeLogID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Employees
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CompanyID in table Employee
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Employee_CompanyID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Employee]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Employee_CompanyID ON [${flyway:defaultSchema}].[Employee] ([CompanyID]);

-- Index for foreign key SupervisorID in table Employee
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Employee_SupervisorID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Employee]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Employee_SupervisorID ON [${flyway:defaultSchema}].[Employee] ([SupervisorID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Employee Company Integrations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EmployeeID in table EmployeeCompanyIntegration
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EmployeeCompanyIntegration_EmployeeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EmployeeCompanyIntegration]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EmployeeCompanyIntegration_EmployeeID ON [${flyway:defaultSchema}].[EmployeeCompanyIntegration] ([EmployeeID]);

-- Index for foreign key CompanyIntegrationID in table EmployeeCompanyIntegration
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EmployeeCompanyIntegration_CompanyIntegrationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EmployeeCompanyIntegration]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EmployeeCompanyIntegration_CompanyIntegrationID ON [${flyway:defaultSchema}].[EmployeeCompanyIntegration] ([CompanyIntegrationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Employee Roles
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EmployeeID in table EmployeeRole
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EmployeeRole_EmployeeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EmployeeRole]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EmployeeRole_EmployeeID ON [${flyway:defaultSchema}].[EmployeeRole] ([EmployeeID]);

-- Index for foreign key RoleID in table EmployeeRole
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EmployeeRole_RoleID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EmployeeRole]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EmployeeRole_RoleID ON [${flyway:defaultSchema}].[EmployeeRole] ([RoleID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Employee Skills
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EmployeeID in table EmployeeSkill
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EmployeeSkill_EmployeeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EmployeeSkill]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EmployeeSkill_EmployeeID ON [${flyway:defaultSchema}].[EmployeeSkill] ([EmployeeID]);

-- Index for foreign key SkillID in table EmployeeSkill
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EmployeeSkill_SkillID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EmployeeSkill]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EmployeeSkill_SkillID ON [${flyway:defaultSchema}].[EmployeeSkill] ([SkillID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entities
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table Entity
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Entity_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Entity]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Entity_ParentID ON [${flyway:defaultSchema}].[Entity] ([ParentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Actions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntityAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityAction_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityAction_EntityID ON [${flyway:defaultSchema}].[EntityAction] ([EntityID]);

-- Index for foreign key ActionID in table EntityAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityAction_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityAction_ActionID ON [${flyway:defaultSchema}].[EntityAction] ([ActionID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Action Filters
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityActionID in table EntityActionFilter
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityActionFilter_EntityActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityActionFilter]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityActionFilter_EntityActionID ON [${flyway:defaultSchema}].[EntityActionFilter] ([EntityActionID]);

-- Index for foreign key ActionFilterID in table EntityActionFilter
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityActionFilter_ActionFilterID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityActionFilter]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityActionFilter_ActionFilterID ON [${flyway:defaultSchema}].[EntityActionFilter] ([ActionFilterID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Action Invocations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityActionID in table EntityActionInvocation
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityActionInvocation_EntityActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityActionInvocation]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityActionInvocation_EntityActionID ON [${flyway:defaultSchema}].[EntityActionInvocation] ([EntityActionID]);

-- Index for foreign key InvocationTypeID in table EntityActionInvocation
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityActionInvocation_InvocationTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityActionInvocation]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityActionInvocation_InvocationTypeID ON [${flyway:defaultSchema}].[EntityActionInvocation] ([InvocationTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Action Invocation Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Action Params
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityActionID in table EntityActionParam
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityActionParam_EntityActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityActionParam]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityActionParam_EntityActionID ON [${flyway:defaultSchema}].[EntityActionParam] ([EntityActionID]);

-- Index for foreign key ActionParamID in table EntityActionParam
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityActionParam_ActionParamID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityActionParam]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityActionParam_ActionParamID ON [${flyway:defaultSchema}].[EntityActionParam] ([ActionParamID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity AI Actions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntityAIAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityAIAction_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityAIAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityAIAction_EntityID ON [${flyway:defaultSchema}].[EntityAIAction] ([EntityID]);

-- Index for foreign key AIModelID in table EntityAIAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityAIAction_AIModelID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityAIAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityAIAction_AIModelID ON [${flyway:defaultSchema}].[EntityAIAction] ([AIModelID]);

-- Index for foreign key AIActionID in table EntityAIAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityAIAction_AIActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityAIAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityAIAction_AIActionID ON [${flyway:defaultSchema}].[EntityAIAction] ([AIActionID]);

-- Index for foreign key OutputEntityID in table EntityAIAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityAIAction_OutputEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityAIAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityAIAction_OutputEntityID ON [${flyway:defaultSchema}].[EntityAIAction] ([OutputEntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Communication Fields
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityCommunicationMessageTypeID in table EntityCommunicationField
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityCommunicationField_EntityCommunicationMessageTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityCommunicationField]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityCommunicationField_EntityCommunicationMessageTypeID ON [${flyway:defaultSchema}].[EntityCommunicationField] ([EntityCommunicationMessageTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Communication Message Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntityCommunicationMessageType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityCommunicationMessageType_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityCommunicationMessageType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityCommunicationMessageType_EntityID ON [${flyway:defaultSchema}].[EntityCommunicationMessageType] ([EntityID]);

-- Index for foreign key BaseMessageTypeID in table EntityCommunicationMessageType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityCommunicationMessageType_BaseMessageTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityCommunicationMessageType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityCommunicationMessageType_BaseMessageTypeID ON [${flyway:defaultSchema}].[EntityCommunicationMessageType] ([BaseMessageTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Documents
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key TypeID in table EntityDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityDocument_TypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityDocument_TypeID ON [${flyway:defaultSchema}].[EntityDocument] ([TypeID]);

-- Index for foreign key EntityID in table EntityDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityDocument_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityDocument_EntityID ON [${flyway:defaultSchema}].[EntityDocument] ([EntityID]);

-- Index for foreign key VectorDatabaseID in table EntityDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityDocument_VectorDatabaseID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityDocument_VectorDatabaseID ON [${flyway:defaultSchema}].[EntityDocument] ([VectorDatabaseID]);

-- Index for foreign key TemplateID in table EntityDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityDocument_TemplateID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityDocument_TemplateID ON [${flyway:defaultSchema}].[EntityDocument] ([TemplateID]);

-- Index for foreign key AIModelID in table EntityDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityDocument_AIModelID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityDocument_AIModelID ON [${flyway:defaultSchema}].[EntityDocument] ([AIModelID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Document Runs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityDocumentID in table EntityDocumentRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityDocumentRun_EntityDocumentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityDocumentRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityDocumentRun_EntityDocumentID ON [${flyway:defaultSchema}].[EntityDocumentRun] ([EntityDocumentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Document Settings
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityDocumentID in table EntityDocumentSetting
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityDocumentSetting_EntityDocumentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityDocumentSetting]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityDocumentSetting_EntityDocumentID ON [${flyway:defaultSchema}].[EntityDocumentSetting] ([EntityDocumentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Document Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Fields
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntityField
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityField_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityField]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityField_EntityID ON [${flyway:defaultSchema}].[EntityField] ([EntityID]);

-- Index for foreign key RelatedEntityID in table EntityField
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityField_RelatedEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityField]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityField_RelatedEntityID ON [${flyway:defaultSchema}].[EntityField] ([RelatedEntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Field Values
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityFieldID in table EntityFieldValue
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityFieldValue_EntityFieldID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityFieldValue]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityFieldValue_EntityFieldID ON [${flyway:defaultSchema}].[EntityFieldValue] ([EntityFieldID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Permissions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntityPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityPermission_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityPermission_EntityID ON [${flyway:defaultSchema}].[EntityPermission] ([EntityID]);

-- Index for foreign key RoleID in table EntityPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityPermission_RoleID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityPermission_RoleID ON [${flyway:defaultSchema}].[EntityPermission] ([RoleID]);

-- Index for foreign key ReadRLSFilterID in table EntityPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityPermission_ReadRLSFilterID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityPermission_ReadRLSFilterID ON [${flyway:defaultSchema}].[EntityPermission] ([ReadRLSFilterID]);

-- Index for foreign key CreateRLSFilterID in table EntityPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityPermission_CreateRLSFilterID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityPermission_CreateRLSFilterID ON [${flyway:defaultSchema}].[EntityPermission] ([CreateRLSFilterID]);

-- Index for foreign key UpdateRLSFilterID in table EntityPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityPermission_UpdateRLSFilterID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityPermission_UpdateRLSFilterID ON [${flyway:defaultSchema}].[EntityPermission] ([UpdateRLSFilterID]);

-- Index for foreign key DeleteRLSFilterID in table EntityPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityPermission_DeleteRLSFilterID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityPermission_DeleteRLSFilterID ON [${flyway:defaultSchema}].[EntityPermission] ([DeleteRLSFilterID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Record Documents
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntityRecordDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityRecordDocument_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityRecordDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityRecordDocument_EntityID ON [${flyway:defaultSchema}].[EntityRecordDocument] ([EntityID]);

-- Index for foreign key EntityDocumentID in table EntityRecordDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityRecordDocument_EntityDocumentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityRecordDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityRecordDocument_EntityDocumentID ON [${flyway:defaultSchema}].[EntityRecordDocument] ([EntityDocumentID]);

-- Index for foreign key VectorIndexID in table EntityRecordDocument
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityRecordDocument_VectorIndexID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityRecordDocument]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityRecordDocument_VectorIndexID ON [${flyway:defaultSchema}].[EntityRecordDocument] ([VectorIndexID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Relationships
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntityRelationship
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityRelationship_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityRelationship]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityRelationship_EntityID ON [${flyway:defaultSchema}].[EntityRelationship] ([EntityID]);

-- Index for foreign key RelatedEntityID in table EntityRelationship
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityRelationship_RelatedEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityRelationship]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityRelationship_RelatedEntityID ON [${flyway:defaultSchema}].[EntityRelationship] ([RelatedEntityID]);

-- Index for foreign key DisplayUserViewID in table EntityRelationship
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityRelationship_DisplayUserViewID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityRelationship]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityRelationship_DisplayUserViewID ON [${flyway:defaultSchema}].[EntityRelationship] ([DisplayUserViewID]);

-- Index for foreign key DisplayComponentID in table EntityRelationship
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntityRelationship_DisplayComponentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntityRelationship]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntityRelationship_DisplayComponentID ON [${flyway:defaultSchema}].[EntityRelationship] ([DisplayComponentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Relationship Display Components
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Settings
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table EntitySetting
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_EntitySetting_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[EntitySetting]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_EntitySetting_EntityID ON [${flyway:defaultSchema}].[EntitySetting] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Error Logs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CompanyIntegrationRunID in table ErrorLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ErrorLog_CompanyIntegrationRunID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ErrorLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ErrorLog_CompanyIntegrationRunID ON [${flyway:defaultSchema}].[ErrorLog] ([CompanyIntegrationRunID]);

-- Index for foreign key CompanyIntegrationRunDetailID in table ErrorLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ErrorLog_CompanyIntegrationRunDetailID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ErrorLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ErrorLog_CompanyIntegrationRunDetailID ON [${flyway:defaultSchema}].[ErrorLog] ([CompanyIntegrationRunDetailID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Explorer Navigation Items
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Files
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CategoryID in table File
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_File_CategoryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[File]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_File_CategoryID ON [${flyway:defaultSchema}].[File] ([CategoryID]);

-- Index for foreign key ProviderID in table File
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_File_ProviderID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[File]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_File_ProviderID ON [${flyway:defaultSchema}].[File] ([ProviderID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: File Categories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table FileCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_FileCategory_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[FileCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_FileCategory_ParentID ON [${flyway:defaultSchema}].[FileCategory] ([ParentID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: File Entity Record Links
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key FileID in table FileEntityRecordLink
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_FileEntityRecordLink_FileID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[FileEntityRecordLink]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_FileEntityRecordLink_FileID ON [${flyway:defaultSchema}].[FileEntityRecordLink] ([FileID]);

-- Index for foreign key EntityID in table FileEntityRecordLink
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_FileEntityRecordLink_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[FileEntityRecordLink]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_FileEntityRecordLink_EntityID ON [${flyway:defaultSchema}].[FileEntityRecordLink] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: File Storage Providers
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: flyway _schema _histories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Integrations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Integration URL Formats
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key IntegrationID in table IntegrationURLFormat
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_IntegrationURLFormat_IntegrationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[IntegrationURLFormat]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_IntegrationURLFormat_IntegrationID ON [${flyway:defaultSchema}].[IntegrationURLFormat] ([IntegrationID]);

-- Index for foreign key EntityID in table IntegrationURLFormat
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_IntegrationURLFormat_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[IntegrationURLFormat]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_IntegrationURLFormat_EntityID ON [${flyway:defaultSchema}].[IntegrationURLFormat] ([EntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Libraries
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Library Items
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key LibraryID in table LibraryItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_LibraryItem_LibraryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[LibraryItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_LibraryItem_LibraryID ON [${flyway:defaultSchema}].[LibraryItem] ([LibraryID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Lists
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table List
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_List_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[List]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_List_EntityID ON [${flyway:defaultSchema}].[List] ([EntityID]);

-- Index for foreign key UserID in table List
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_List_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[List]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_List_UserID ON [${flyway:defaultSchema}].[List] ([UserID]);

-- Index for foreign key CategoryID in table List
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_List_CategoryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[List]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_List_CategoryID ON [${flyway:defaultSchema}].[List] ([CategoryID]);

-- Index for foreign key CompanyIntegrationID in table List
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_List_CompanyIntegrationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[List]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_List_CompanyIntegrationID ON [${flyway:defaultSchema}].[List] ([CompanyIntegrationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: List Categories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table ListCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ListCategory_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ListCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ListCategory_ParentID ON [${flyway:defaultSchema}].[ListCategory] ([ParentID]);

-- Index for foreign key UserID in table ListCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ListCategory_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ListCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ListCategory_UserID ON [${flyway:defaultSchema}].[ListCategory] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: List Details
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ListID in table ListDetail
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ListDetail_ListID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ListDetail]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ListDetail_ListID ON [${flyway:defaultSchema}].[ListDetail] ([ListID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Output Delivery Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Output Format Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Output Trigger Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Queries
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CategoryID in table Query
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Query_CategoryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Query]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Query_CategoryID ON [${flyway:defaultSchema}].[Query] ([CategoryID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Query Categories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table QueryCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_QueryCategory_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[QueryCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_QueryCategory_ParentID ON [${flyway:defaultSchema}].[QueryCategory] ([ParentID]);

-- Index for foreign key UserID in table QueryCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_QueryCategory_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[QueryCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_QueryCategory_UserID ON [${flyway:defaultSchema}].[QueryCategory] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Query Fields
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key QueryID in table QueryField
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_QueryField_QueryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[QueryField]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_QueryField_QueryID ON [${flyway:defaultSchema}].[QueryField] ([QueryID]);

-- Index for foreign key SourceEntityID in table QueryField
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_QueryField_SourceEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[QueryField]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_QueryField_SourceEntityID ON [${flyway:defaultSchema}].[QueryField] ([SourceEntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Query Permissions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key QueryID in table QueryPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_QueryPermission_QueryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[QueryPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_QueryPermission_QueryID ON [${flyway:defaultSchema}].[QueryPermission] ([QueryID]);

-- Index for foreign key RoleID in table QueryPermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_QueryPermission_RoleID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[QueryPermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_QueryPermission_RoleID ON [${flyway:defaultSchema}].[QueryPermission] ([RoleID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Queues
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key QueueTypeID in table Queue
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Queue_QueueTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Queue]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Queue_QueueTypeID ON [${flyway:defaultSchema}].[Queue] ([QueueTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Queue Tasks
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key QueueID in table QueueTask
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_QueueTask_QueueID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[QueueTask]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_QueueTask_QueueID ON [${flyway:defaultSchema}].[QueueTask] ([QueueID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Queue Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Recommendations
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key RecommendationRunID in table Recommendation
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Recommendation_RecommendationRunID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Recommendation]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Recommendation_RecommendationRunID ON [${flyway:defaultSchema}].[Recommendation] ([RecommendationRunID]);

-- Index for foreign key SourceEntityID in table Recommendation
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Recommendation_SourceEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Recommendation]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Recommendation_SourceEntityID ON [${flyway:defaultSchema}].[Recommendation] ([SourceEntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Recommendation Items
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key RecommendationID in table RecommendationItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecommendationItem_RecommendationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecommendationItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecommendationItem_RecommendationID ON [${flyway:defaultSchema}].[RecommendationItem] ([RecommendationID]);

-- Index for foreign key DestinationEntityID in table RecommendationItem
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecommendationItem_DestinationEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecommendationItem]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecommendationItem_DestinationEntityID ON [${flyway:defaultSchema}].[RecommendationItem] ([DestinationEntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Recommendation Providers
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Recommendation Runs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key RecommendationProviderID in table RecommendationRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecommendationRun_RecommendationProviderID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecommendationRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecommendationRun_RecommendationProviderID ON [${flyway:defaultSchema}].[RecommendationRun] ([RecommendationProviderID]);

-- Index for foreign key RunByUserID in table RecommendationRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecommendationRun_RunByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecommendationRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecommendationRun_RunByUserID ON [${flyway:defaultSchema}].[RecommendationRun] ([RunByUserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Record Changes
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table RecordChange
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordChange_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordChange]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordChange_EntityID ON [${flyway:defaultSchema}].[RecordChange] ([EntityID]);

-- Index for foreign key UserID in table RecordChange
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordChange_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordChange]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordChange_UserID ON [${flyway:defaultSchema}].[RecordChange] ([UserID]);

-- Index for foreign key ReplayRunID in table RecordChange
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordChange_ReplayRunID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordChange]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordChange_ReplayRunID ON [${flyway:defaultSchema}].[RecordChange] ([ReplayRunID]);

-- Index for foreign key IntegrationID in table RecordChange
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordChange_IntegrationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordChange]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordChange_IntegrationID ON [${flyway:defaultSchema}].[RecordChange] ([IntegrationID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Record Change Replay Runs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key UserID in table RecordChangeReplayRun
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordChangeReplayRun_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordChangeReplayRun]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordChangeReplayRun_UserID ON [${flyway:defaultSchema}].[RecordChangeReplayRun] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Record Merge Deletion Logs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key RecordMergeLogID in table RecordMergeDeletionLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordMergeDeletionLog_RecordMergeLogID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordMergeDeletionLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordMergeDeletionLog_RecordMergeLogID ON [${flyway:defaultSchema}].[RecordMergeDeletionLog] ([RecordMergeLogID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Record Merge Logs
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table RecordMergeLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordMergeLog_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordMergeLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordMergeLog_EntityID ON [${flyway:defaultSchema}].[RecordMergeLog] ([EntityID]);

-- Index for foreign key InitiatedByUserID in table RecordMergeLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordMergeLog_InitiatedByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordMergeLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordMergeLog_InitiatedByUserID ON [${flyway:defaultSchema}].[RecordMergeLog] ([InitiatedByUserID]);

-- Index for foreign key ApprovedByUserID in table RecordMergeLog
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_RecordMergeLog_ApprovedByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[RecordMergeLog]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_RecordMergeLog_ApprovedByUserID ON [${flyway:defaultSchema}].[RecordMergeLog] ([ApprovedByUserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Reports
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CategoryID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_CategoryID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_CategoryID ON [${flyway:defaultSchema}].[Report] ([CategoryID]);

-- Index for foreign key UserID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_UserID ON [${flyway:defaultSchema}].[Report] ([UserID]);

-- Index for foreign key ConversationID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_ConversationID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_ConversationID ON [${flyway:defaultSchema}].[Report] ([ConversationID]);

-- Index for foreign key ConversationDetailID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_ConversationDetailID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_ConversationDetailID ON [${flyway:defaultSchema}].[Report] ([ConversationDetailID]);

-- Index for foreign key DataContextID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_DataContextID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_DataContextID ON [${flyway:defaultSchema}].[Report] ([DataContextID]);

-- Index for foreign key OutputTriggerTypeID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_OutputTriggerTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_OutputTriggerTypeID ON [${flyway:defaultSchema}].[Report] ([OutputTriggerTypeID]);

-- Index for foreign key OutputFormatTypeID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_OutputFormatTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_OutputFormatTypeID ON [${flyway:defaultSchema}].[Report] ([OutputFormatTypeID]);

-- Index for foreign key OutputDeliveryTypeID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_OutputDeliveryTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_OutputDeliveryTypeID ON [${flyway:defaultSchema}].[Report] ([OutputDeliveryTypeID]);

-- Index for foreign key OutputWorkflowID in table Report
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Report_OutputWorkflowID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Report]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Report_OutputWorkflowID ON [${flyway:defaultSchema}].[Report] ([OutputWorkflowID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Report Categories
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table ReportCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ReportCategory_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ReportCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ReportCategory_ParentID ON [${flyway:defaultSchema}].[ReportCategory] ([ParentID]);

-- Index for foreign key UserID in table ReportCategory
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ReportCategory_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ReportCategory]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ReportCategory_UserID ON [${flyway:defaultSchema}].[ReportCategory] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Report Snapshots
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ReportID in table ReportSnapshot
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ReportSnapshot_ReportID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ReportSnapshot]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ReportSnapshot_ReportID ON [${flyway:defaultSchema}].[ReportSnapshot] ([ReportID]);

-- Index for foreign key UserID in table ReportSnapshot
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ReportSnapshot_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ReportSnapshot]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ReportSnapshot_UserID ON [${flyway:defaultSchema}].[ReportSnapshot] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Resource Links
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key UserID in table ResourceLink
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ResourceLink_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ResourceLink]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ResourceLink_UserID ON [${flyway:defaultSchema}].[ResourceLink] ([UserID]);

-- Index for foreign key ResourceTypeID in table ResourceLink
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ResourceLink_ResourceTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ResourceLink]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ResourceLink_ResourceTypeID ON [${flyway:defaultSchema}].[ResourceLink] ([ResourceTypeID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Resource Permissions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ResourceTypeID in table ResourcePermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ResourcePermission_ResourceTypeID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ResourcePermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ResourcePermission_ResourceTypeID ON [${flyway:defaultSchema}].[ResourcePermission] ([ResourceTypeID]);

-- Index for foreign key RoleID in table ResourcePermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ResourcePermission_RoleID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ResourcePermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ResourcePermission_RoleID ON [${flyway:defaultSchema}].[ResourcePermission] ([RoleID]);

-- Index for foreign key UserID in table ResourcePermission
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ResourcePermission_UserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ResourcePermission]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ResourcePermission_UserID ON [${flyway:defaultSchema}].[ResourcePermission] ([UserID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Resource Types
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key EntityID in table ResourceType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ResourceType_EntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ResourceType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ResourceType_EntityID ON [${flyway:defaultSchema}].[ResourceType] ([EntityID]);

-- Index for foreign key CategoryEntityID in table ResourceType
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ResourceType_CategoryEntityID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ResourceType]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ResourceType_CategoryEntityID ON [${flyway:defaultSchema}].[ResourceType] ([CategoryEntityID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Roles
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Row Level Security Filters
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Scheduled Actions
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key CreatedByUserID in table ScheduledAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ScheduledAction_CreatedByUserID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ScheduledAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ScheduledAction_CreatedByUserID ON [${flyway:defaultSchema}].[ScheduledAction] ([CreatedByUserID]);

-- Index for foreign key ActionID in table ScheduledAction
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ScheduledAction_ActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ScheduledAction]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ScheduledAction_ActionID ON [${flyway:defaultSchema}].[ScheduledAction] ([ActionID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Scheduled Action Params
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ScheduledActionID in table ScheduledActionParam
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ScheduledActionParam_ScheduledActionID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ScheduledActionParam]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ScheduledActionParam_ScheduledActionID ON [${flyway:defaultSchema}].[ScheduledActionParam] ([ScheduledActionID]);

-- Index for foreign key ActionParamID in table ScheduledActionParam
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_ScheduledActionParam_ActionParamID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[ScheduledActionParam]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_ScheduledActionParam_ActionParamID ON [${flyway:defaultSchema}].[ScheduledActionParam] ([ActionParamID]);


-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Schema Info
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------



-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Skills
-- Item: Index for Foreign Keys
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------
-- Index for foreign key ParentID in table Skill
IF NOT EXISTS (
    SELECT 1
    FROM sys.indexes
    WHERE name = 'IDX_AUTO_MJ_FKEY_Skill_ParentID' 
    AND object_id = OBJECT_ID('[${flyway:defaultSchema}].[Skill]')
)
CREATE INDEX IDX_AUTO_MJ_FKEY_Skill_ParentID ON [${flyway:defaultSchema}].[Skill] ([ParentID]);






GO
 



DROP PROC IF EXISTS [${flyway:defaultSchema}].[spUpdateExistingEntityFieldsFromSchema]
GO
CREATE PROC [${flyway:defaultSchema}].[spUpdateExistingEntityFieldsFromSchema]
    @ExcludedSchemaNames NVARCHAR(MAX)
AS
BEGIN
    -- Step 1: Parse the excluded schema names into a table
    DECLARE @ExcludedSchemas TABLE (SchemaName NVARCHAR(255));
    INSERT INTO @ExcludedSchemas(SchemaName)
    SELECT TRIM(value) FROM STRING_SPLIT(@ExcludedSchemaNames, ',');

    -- Step 2: Precompute the join results in a CTE
    WITH PrecomputedData AS (
        SELECT 
            ef.ID AS EntityFieldID,
            ef.AutoUpdateDescription,
            ef.Description AS ExistingDescription,
            fromSQL.Description AS SQLDescription,
            fromSQL.Type,
            fromSQL.Length,
            fromSQL.Precision,
            fromSQL.Scale,
            fromSQL.AllowsNull,
            fromSQL.DefaultValue,
            fromSQL.AutoIncrement,
            fromSQL.IsVirtual,
            fromSQL.Sequence,
            re.ID AS RelatedEntityID,
            fk.referenced_column AS RelatedEntityFieldName,
            CASE WHEN pk.ColumnName IS NOT NULL THEN 1 ELSE 0 END AS IsPrimaryKey,
            CASE 
                WHEN pk.ColumnName IS NOT NULL THEN 1 
                ELSE CASE WHEN uk.ColumnName IS NOT NULL THEN 1 ELSE 0 END
            END AS IsUnique,
            e.VirtualEntity,
            excludedSchemas.SchemaName AS ExcludedSchemaName
        FROM
            [${flyway:defaultSchema}].EntityField ef
        INNER JOIN
            vwSQLColumnsAndEntityFields fromSQL
        ON
            ef.EntityID = fromSQL.EntityID AND
            ef.Name = fromSQL.FieldName
        INNER JOIN
            [${flyway:defaultSchema}].Entity e 
        ON
            ef.EntityID = e.ID
        LEFT OUTER JOIN
            vwForeignKeys fk
        ON
            ef.Name = fk.[column] AND
            e.BaseTable = fk.[table] AND
            e.SchemaName = fk.[schema_name]
        LEFT OUTER JOIN 
            [${flyway:defaultSchema}].Entity re -- Related Entity
        ON
            re.BaseTable = fk.referenced_table AND
            re.SchemaName = fk.[referenced_schema]
        LEFT OUTER JOIN 
            [${flyway:defaultSchema}].vwTablePrimaryKeys pk
        ON
            e.BaseTable = pk.TableName AND
            ef.Name = pk.ColumnName AND
            e.SchemaName = pk.SchemaName
        LEFT OUTER JOIN 
            [${flyway:defaultSchema}].vwTableUniqueKeys uk
        ON
            e.BaseTable = uk.TableName AND
            ef.Name = uk.ColumnName AND
            e.SchemaName = uk.SchemaName
        LEFT OUTER JOIN
            @ExcludedSchemas excludedSchemas
        ON
            e.SchemaName = excludedSchemas.SchemaName
    )
    -- Step 3: Perform the update using the precomputed data
    UPDATE ef
    SET
        ef.Description = IIF(pd.AutoUpdateDescription=1, CONVERT(NVARCHAR(MAX), pd.SQLDescription), pd.ExistingDescription),
        ef.Type = pd.Type,
        ef.Length = pd.Length,
        ef.Precision = pd.Precision,
        ef.Scale = pd.Scale,
        ef.AllowsNull = pd.AllowsNull,
        ef.DefaultValue = pd.DefaultValue,
        ef.AutoIncrement = pd.AutoIncrement,
        ef.IsVirtual = pd.IsVirtual,
        ef.Sequence = pd.Sequence,
        ef.RelatedEntityID = pd.RelatedEntityID,
        ef.RelatedEntityFieldName = pd.RelatedEntityFieldName,
        ef.IsPrimaryKey = pd.IsPrimaryKey,
        ef.IsUnique = pd.IsUnique,
        ef.${flyway:defaultSchema}_UpdatedAt = GETUTCDATE()
    FROM
        [${flyway:defaultSchema}].EntityField ef
    INNER JOIN
        PrecomputedData pd
    ON
        ef.ID = pd.EntityFieldID
    WHERE
        pd.VirtualEntity = 0
        AND pd.EntityFieldID IS NOT NULL -- only where we HAVE ALREADY CREATED EntityField records
        AND pd.ExcludedSchemaName IS NULL; -- Only include non-excluded schemas
END
GO
 





DROP VIEW IF EXISTS [${flyway:defaultSchema}].[vwSQLColumnsAndEntityFields]
GO
CREATE VIEW [${flyway:defaultSchema}].[vwSQLColumnsAndEntityFields]
AS
WITH FilteredColumns AS (
    SELECT *
    FROM sys.all_columns
    WHERE default_object_id IS NOT NULL
)
SELECT 
	e.EntityID,
	e.EntityName Entity,
	e.SchemaName,
	e.TableName TableName,
	ef.ID EntityFieldID,
	ef.Sequence EntityFieldSequence,
	ef.Name EntityFieldName,
	c.column_id Sequence,
  basetable_columns.column_id BaseTableSequence,
	c.name FieldName,
	COALESCE(bt.name, t.name) Type, -- get the type from the base type (bt) if it exists, this is in the case of a user-defined type being used, t.name would be the UDT name.
	IIF(t.is_user_defined = 1, t.name, NULL) UserDefinedType, -- we have a user defined type, so pass that to the view caller too
	c.max_length Length,
	c.precision Precision,
	c.scale Scale,
	c.is_nullable AllowsNull,
	IIF(COALESCE(bt.name, t.name) IN ('timestamp', 'rowversion'), 1, IIF(basetable_columns.is_identity IS NULL, 0, basetable_columns.is_identity)) AutoIncrement,
	c.column_id,
	IIF(basetable_columns.column_id IS NULL OR cc.definition IS NOT NULL, 1, 0) IsVirtual, -- updated so that we take into account that computed columns are virtual always, previously only looked for existence of a column in table vs. a view
	basetable_columns.object_id,
	dc.name AS DefaultConstraintName,
    dc.definition AS DefaultValue,
	cc.definition ComputedColumnDefinition,
	COALESCE(EP_View.value, EP_Table.value) AS [Description], -- Dynamically choose description - first look at view level if a description was defined there (rare) and then go to table if it was defined there (often not there either)
	EP_View.value AS ViewColumnDescription,
	EP_Table.value AS TableColumnDescription
FROM
	FilteredColumns c
INNER JOIN
	[${flyway:defaultSchema}].vwSQLTablesAndEntities e
ON
  c.object_id = COALESCE(e.view_object_id, e.object_id)
INNER JOIN
	sys.types t 
ON
	c.user_type_id = t.user_type_id
LEFT OUTER JOIN
    sys.types bt
ON
    t.system_type_id = bt.user_type_id AND t.is_user_defined = 1 -- Join to fetch base type for UDTs
INNER JOIN
	sys.all_objects basetable 
ON
	e.object_id = basetable.object_id
LEFT OUTER JOIN 
    sys.computed_columns cc 
ON 
	e.object_id = cc.object_id AND 
	c.name = cc.name
LEFT OUTER JOIN
	sys.all_columns basetable_columns -- join in all columns from base table and line them up - that way we know if a field is a VIEW only field or a TABLE field (virtual vs. in table)
ON
	basetable.object_id = basetable_columns.object_id AND
	c.name = basetable_columns.name 
LEFT OUTER JOIN
	${flyway:defaultSchema}.EntityField ef 
ON
	e.EntityID = ef.EntityID AND
	c.name = ef.Name
LEFT OUTER JOIN 
    sys.default_constraints dc 
ON 
  e.object_id = dc.parent_object_id AND
	basetable_columns.column_id = dc.parent_column_id
LEFT OUTER JOIN 
    sys.extended_properties EP_Table 
ON 
	EP_Table.major_id = basetable_columns.object_id AND 
	EP_Table.minor_id = basetable_columns.column_id AND 
	EP_Table.name = 'MS_Description'
LEFT OUTER JOIN 
    sys.extended_properties EP_View 
ON 
	EP_View.major_id = c.object_id AND 
	EP_View.minor_id = c.column_id AND 
	EP_View.name = 'MS_Description'
GO
