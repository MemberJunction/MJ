-- SQL Logging Session
-- Session ID: 633f2301-2efa-4893-bdbf-07d52b87169b
-- Started: 2025-08-06T03:24:49.297Z
-- Description: MetadataSync push operation
-- Format: Migration-ready with Flyway schema placeholders
-- Generated by MemberJunction SQLServerDataProvider

-- Save Templates (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateTemplate @ID = 'dfb2293c-9d7a-45d6-b073-a6f541975fc9',
@Name = N'Permission Denied - Users',
@Description = N'Template for AI Prompt: Permission Denied - Users',
@CategoryID = 'B09D433E-F36B-1410-8DB1-00021F8B792E',
@UserPrompt = NULL,
@UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
@ActiveAt = NULL,
@DisabledAt = NULL,
@IsActive = 1;

-- Save Template Contents (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateTemplateContent @ID = 'de37bcc4-7b54-4f12-892c-1b3671529d12',
@TemplateID = 'DFB2293C-9D7A-45D6-B073-A6F541975FC9',
@TypeID = 'E7AFCCEC-6A37-EF11-86D4-000D3A4E707E',
@TemplateText = N'# Permission Denied - Users

I''m sorry, but you don''t have the necessary permissions to create or update users in the system.

**Required Permissions:**
- Create permission on the Users entity
- Update permission on the Users entity

These permissions are required to onboard new users because the process involves:
1. Creating a new user record
2. Updating user information and settings

**Next Steps:**
Please contact your system administrator to request the appropriate permissions. Once you have the necessary permissions, you can try again.

**Error Details:**
- Missing permission type: Entity Permission
- Entity: Users
- Required operations: Create, Update',
@Priority = 1,
@IsActive = 1;

-- Save AI Prompts (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIPrompt @ID = '38B15B99-E33E-400F-A762-E40699697983',
@Name = N'Permission Denied - Users',
@Description = N'Error message shown when user lacks permissions to create or update Users entity',
@TemplateID = 'DFB2293C-9D7A-45D6-B073-A6F541975FC9',
@CategoryID = '315BDCC3-2409-4EEC-B021-AB767D8516E8',
@TypeID = 'A6DA423E-F36B-1410-8DAC-00021F8B792E',
@Status = N'Active',
@ResponseFormat = N'Text',
@ModelSpecificResponseFormat = NULL,
@AIModelTypeID = NULL,
@MinPowerRank = 0,
@SelectionStrategy = N'Default',
@PowerPreference = N'Highest',
@ParallelizationMode = N'None',
@ParallelCount = NULL,
@ParallelConfigParam = NULL,
@OutputType = N'string',
@OutputExample = NULL,
@ValidationBehavior = N'Warn',
@MaxRetries = 0,
@RetryDelayMS = 0,
@RetryStrategy = N'Fixed',
@ResultSelectorPromptID = NULL,
@EnableCaching = 0,
@CacheTTLSeconds = NULL,
@CacheMatchType = N'Exact',
@CacheSimilarityThreshold = NULL,
@CacheMustMatchModel = 1,
@CacheMustMatchVendor = 1,
@CacheMustMatchAgent = 0,
@CacheMustMatchConfig = 0,
@PromptRole = N'System',
@PromptPosition = N'First',
@Temperature = NULL,
@TopP = NULL,
@TopK = NULL,
@MinP = NULL,
@FrequencyPenalty = NULL,
@PresencePenalty = NULL,
@Seed = NULL,
@StopSequences = NULL,
@IncludeLogProbs = 0,
@TopLogProbs = NULL,
@FailoverStrategy = N'SameModelDifferentVendor',
@FailoverMaxAttempts = 3,
@FailoverDelaySeconds = 5,
@FailoverModelStrategy = N'PreferSameModel',
@FailoverErrorScope = N'All';

-- Save Templates (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateTemplate @ID = 'c76038c1-368a-496b-aed8-346cbae41eea',
@Name = N'Permission Denied - User Roles',
@Description = N'Template for AI Prompt: Permission Denied - User Roles',
@CategoryID = 'B09D433E-F36B-1410-8DB1-00021F8B792E',
@UserPrompt = NULL,
@UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
@ActiveAt = NULL,
@DisabledAt = NULL,
@IsActive = 1;

-- Save Template Contents (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateTemplateContent @ID = '3ef1127c-3239-408b-9f9b-da58ca81891b',
@TemplateID = 'C76038C1-368A-496B-AED8-346CBAE41EEA',
@TypeID = 'E7AFCCEC-6A37-EF11-86D4-000D3A4E707E',
@TemplateText = N'# Permission Denied - User Roles

I''m sorry, but you don''t have the necessary permissions to assign roles to users.

**Required Permission:**
- Create permission on the User Roles entity

This permission is required because the onboarding process needs to assign roles to the new user to grant them appropriate access to the system.

**Next Steps:**
Please contact your system administrator to request the "Create" permission for the User Roles entity. Once you have this permission, you can proceed with user onboarding.

**Error Details:**
- Missing permission type: Entity Permission
- Entity: User Roles
- Required operation: Create',
@Priority = 1,
@IsActive = 1;

-- Save AI Prompts (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIPrompt @ID = '12AC656C-62B8-459C-B6CD-80E4C18EC8AC',
@Name = N'Permission Denied - User Roles',
@Description = N'Error message shown when user lacks permissions to create User Roles',
@TemplateID = 'C76038C1-368A-496B-AED8-346CBAE41EEA',
@CategoryID = '315BDCC3-2409-4EEC-B021-AB767D8516E8',
@TypeID = 'A6DA423E-F36B-1410-8DAC-00021F8B792E',
@Status = N'Active',
@ResponseFormat = N'Text',
@ModelSpecificResponseFormat = NULL,
@AIModelTypeID = NULL,
@MinPowerRank = 0,
@SelectionStrategy = N'Default',
@PowerPreference = N'Highest',
@ParallelizationMode = N'None',
@ParallelCount = NULL,
@ParallelConfigParam = NULL,
@OutputType = N'string',
@OutputExample = NULL,
@ValidationBehavior = N'Warn',
@MaxRetries = 0,
@RetryDelayMS = 0,
@RetryStrategy = N'Fixed',
@ResultSelectorPromptID = NULL,
@EnableCaching = 0,
@CacheTTLSeconds = NULL,
@CacheMatchType = N'Exact',
@CacheSimilarityThreshold = NULL,
@CacheMustMatchModel = 1,
@CacheMustMatchVendor = 1,
@CacheMustMatchAgent = 0,
@CacheMustMatchConfig = 0,
@PromptRole = N'System',
@PromptPosition = N'First',
@Temperature = NULL,
@TopP = NULL,
@TopK = NULL,
@MinP = NULL,
@FrequencyPenalty = NULL,
@PresencePenalty = NULL,
@Seed = NULL,
@StopSequences = NULL,
@IncludeLogProbs = 0,
@TopLogProbs = NULL,
@FailoverStrategy = N'SameModelDifferentVendor',
@FailoverMaxAttempts = 3,
@FailoverDelaySeconds = 5,
@FailoverModelStrategy = N'PreferSameModel',
@FailoverErrorScope = N'All';

-- Save Templates (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateTemplate @ID = '5740bfd9-7513-4720-8949-1048cf9364c7',
@Name = N'Permission Denied - Employees',
@Description = N'Template for AI Prompt: Permission Denied - Employees',
@CategoryID = 'B09D433E-F36B-1410-8DB1-00021F8B792E',
@UserPrompt = NULL,
@UserID = 'ECAFCCEC-6A37-EF11-86D4-000D3A4E707E',
@ActiveAt = NULL,
@DisabledAt = NULL,
@IsActive = 1;

-- Save Template Contents (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateTemplateContent @ID = '672224d6-1374-4891-ae5a-3b2886196baa',
@TemplateID = '5740BFD9-7513-4720-8949-1048CF9364C7',
@TypeID = 'E7AFCCEC-6A37-EF11-86D4-000D3A4E707E',
@TemplateText = N'# Permission Denied - Employees

I''m sorry, but you don''t have the necessary permissions to create employee records.

**Required Permission:**
- Create permission on the Employees entity

This permission is required when onboarding users who will be linked to employee records in the system.

**Next Steps:**
Please contact your system administrator to request the "Create" permission for the Employees entity. Alternatively, you may be able to create users without linking them to employee records.

**Error Details:**
- Missing permission type: Entity Permission
- Entity: Employees
- Required operation: Create',
@Priority = 1,
@IsActive = 1;

-- Save AI Prompts (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIPrompt @ID = 'BF027FCB-CE89-4D85-8CC5-83EA60A5A007',
@Name = N'Permission Denied - Employees',
@Description = N'Error message shown when user lacks permissions to create Employees',
@TemplateID = '5740BFD9-7513-4720-8949-1048CF9364C7',
@CategoryID = '315BDCC3-2409-4EEC-B021-AB767D8516E8',
@TypeID = 'A6DA423E-F36B-1410-8DAC-00021F8B792E',
@Status = N'Active',
@ResponseFormat = N'Text',
@ModelSpecificResponseFormat = NULL,
@AIModelTypeID = NULL,
@MinPowerRank = 0,
@SelectionStrategy = N'Default',
@PowerPreference = N'Highest',
@ParallelizationMode = N'None',
@ParallelCount = NULL,
@ParallelConfigParam = NULL,
@OutputType = N'string',
@OutputExample = NULL,
@ValidationBehavior = N'Warn',
@MaxRetries = 0,
@RetryDelayMS = 0,
@RetryStrategy = N'Fixed',
@ResultSelectorPromptID = NULL,
@EnableCaching = 0,
@CacheTTLSeconds = NULL,
@CacheMatchType = N'Exact',
@CacheSimilarityThreshold = NULL,
@CacheMustMatchModel = 1,
@CacheMustMatchVendor = 1,
@CacheMustMatchAgent = 0,
@CacheMustMatchConfig = 0,
@PromptRole = N'System',
@PromptPosition = N'First',
@Temperature = NULL,
@TopP = NULL,
@TopK = NULL,
@MinP = NULL,
@FrequencyPenalty = NULL,
@PresencePenalty = NULL,
@Seed = NULL,
@StopSequences = NULL,
@IncludeLogProbs = 0,
@TopLogProbs = NULL,
@FailoverStrategy = N'SameModelDifferentVendor',
@FailoverMaxAttempts = 3,
@FailoverDelaySeconds = 5,
@FailoverModelStrategy = N'PreferSameModel',
@FailoverErrorScope = N'All';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = 'AF1A0DE4-E0DB-4290-A316-FB1CB35FEF11',
@AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Check Users Permission',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 1,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = 'C8094D90-1194-4C81-AE0F-77E85FD54169',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{"CanCreate": "permissions.users.canCreate", "CanUpdate": "permissions.users.canUpdate"}',
@PositionX = 100,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"PermissionType": "static:EntityPermission", "PermissionName": "static:Users"}';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = 'AE444D5A-0CDC-41B2-A369-3BA12A7E1AAA',
@AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Check User Roles Permission',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = 'C8094D90-1194-4C81-AE0F-77E85FD54169',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{"CanCreate": "permissions.userRoles.canCreate"}',
@PositionX = 200,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"PermissionType": "static:EntityPermission", "PermissionName": "static:User Roles"}';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = 'B6431F43-41DA-4405-9EF5-C98F21409FA6',
@AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Check Employees Permission',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = 'C8094D90-1194-4C81-AE0F-77E85FD54169',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{"CanCreate": "permissions.employees.canCreate"}',
@PositionX = 300,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"PermissionType": "static:EntityPermission", "PermissionName": "static:Employees"}';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = '620AD7B8-8BA8-4615-AF66-6BB38F1B5DDB',
@AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Permission Denied - Users',
@Description = NULL,
@StepType = N'Prompt',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = NULL,
@SubAgentID = NULL,
@PromptID = '38B15B99-E33E-400F-A762-E40699697983',
@ActionOutputMapping = NULL,
@PositionX = 100,
@PositionY = 250,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = NULL;

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = '8DE19F37-02DF-4717-A8FA-98085F62FE2D',
@AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Permission Denied - Roles',
@Description = NULL,
@StepType = N'Prompt',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = NULL,
@SubAgentID = NULL,
@PromptID = '12AC656C-62B8-459C-B6CD-80E4C18EC8AC',
@ActionOutputMapping = NULL,
@PositionX = 200,
@PositionY = 250,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = NULL;

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStep @ID = 'CB7B4615-1CCB-403F-B406-25F51130D703',
@AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Permission Denied - Employees',
@Description = NULL,
@StepType = N'Prompt',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = NULL,
@SubAgentID = NULL,
@PromptID = 'BF027FCB-CE89-4D85-8CC5-83EA60A5A007',
@ActionOutputMapping = NULL,
@PositionX = 300,
@PositionY = 250,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = NULL;

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Collect User Information',
@Description = NULL,
@StepType = N'Prompt',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = NULL,
@SubAgentID = NULL,
@PromptID = '003C2419-899C-48BB-B184-0A5CDEAAC4A9',
@ActionOutputMapping = NULL,
@PositionX = 400,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = NULL,
@ID = '3DB38E5E-FB94-401C-94AB-0B2D7E18302C';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Validate User Data',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = '540BFDE1-02B5-432C-9490-BD34AF853FE8',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{"IsUnique": "emailIsUnique", "ExistingUserID": "existingUserID"}',
@PositionX = 600,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"Email": "payload.userData.email"}',
@ID = '286C4DE2-133C-42CD-9BA9-96F46156AF95';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Create Employee Record',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = 'CC9C1E62-8AB9-4A46-886D-66F6B4295982',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{"EmployeeID": "createdEmployeeID"}',
@PositionX = 800,
@PositionY = 50,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"FirstName": "payload.userData.firstName", "LastName": "payload.userData.lastName", "Email": "payload.userData.email", "Title": "payload.userData.title", "Phone": "payload.userData.employeeData.phone", "CompanyID": "payload.userData.employeeData.companyID", "SupervisorID": "payload.userData.employeeData.supervisorID"}',
@ID = '5A421648-5261-4A49-862D-465C71F5A87E';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Create User Record',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = '4A57DE26-16DB-47A4-82AB-DFC74B3152FA',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{"UserID": "createdUserID", "Name": "createdUserName"}',
@PositionX = 800,
@PositionY = 150,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"FirstName": "payload.userData.firstName", "LastName": "payload.userData.lastName", "Email": "payload.userData.email", "Title": "payload.userData.title", "Type": "payload.userData.type", "IsActive": "true", "EmployeeID": "payload.createdEmployeeID"}',
@ID = '8297F22F-76CC-4C2F-B3E7-3650CC25AFDE';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Assign User Roles',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = '873F5441-D1A9-497B-AE32-F9D1A23843C6',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{"AssignedUserRoleIDs": "assignedUserRoleIDs", "AssignedCount": "assignedRoleCount"}',
@PositionX = 1000,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"UserID": "payload.createdUserID", "RoleNames": "payload.userData.roles"}',
@ID = '5A977380-2AA5-4119-A329-4450FC603025';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Prepare Welcome Email',
@Description = NULL,
@StepType = N'Prompt',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = NULL,
@SubAgentID = NULL,
@PromptID = 'DA7216B1-C842-4CE5-AEC7-6160E14F0C95',
@ActionOutputMapping = NULL,
@PositionX = 1200,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = NULL,
@ID = 'D4F0E61E-9E0C-420D-9F92-6CECF0884C81';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Send Email',
@Description = NULL,
@StepType = N'Action',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = 'DC4C7E64-2D93-43E4-9F02-F5D7E702784A',
@SubAgentID = NULL,
@PromptID = NULL,
@ActionOutputMapping = N'{}',
@PositionX = 1400,
@PositionY = 100,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = N'{"Subject": "payload.emailSubject", "Body": "payload.emailBody", "To": "payload.userData.email", "From": "static:noreply@memberjunction.com", "Provider": "static:SendGrid", "MessageType": "static:Email"}',
@ID = 'EA96D877-DEDB-4C7F-9ADC-CB74E6C2A291';

-- Save MJ: AI Agent Steps (core SP call only)
EXEC [${flyway:defaultSchema}].spUpdateAIAgentStep @AgentID = '3CF3AE08-1B17-4D07-B235-885EED030CB8',
@Name = N'Email Already Exists',
@Description = NULL,
@StepType = N'Prompt',
@StartingStep = 0,
@TimeoutSeconds = 600,
@RetryCount = 0,
@OnErrorBehavior = N'fail',
@ActionID = NULL,
@SubAgentID = NULL,
@PromptID = '566D0D19-C986-4847-8EB0-1A1E59FAC06B',
@ActionOutputMapping = NULL,
@PositionX = 600,
@PositionY = 250,
@Width = 200,
@Height = 80,
@Status = N'Active',
@ActionInputMapping = NULL,
@ID = '23157416-28D0-422A-AF69-6E4D46E0E212';

-- Save MJ: AI Agent Step Paths (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStepPath @ID = '7B8F1886-2D38-45A8-A7C6-AF0034F9CABE',
@OriginStepID = 'AF1A0DE4-E0DB-4290-A316-FB1CB35FEF11',
@DestinationStepID = 'AE444D5A-0CDC-41B2-A369-3BA12A7E1AAA',
@Condition = N'payload.permissions.users.canCreate == true && payload.permissions.users.canUpdate == true',
@Priority = 1,
@Description = N'Continue if user has permissions for Users entity',
@PathPoints = NULL;

-- Save MJ: AI Agent Step Paths (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStepPath @ID = 'E74798B9-6059-4095-B0CD-372179DA94DF',
@OriginStepID = 'AF1A0DE4-E0DB-4290-A316-FB1CB35FEF11',
@DestinationStepID = '620AD7B8-8BA8-4615-AF66-6BB38F1B5DDB',
@Condition = N'payload.permissions.users.canCreate != true || payload.permissions.users.canUpdate != true',
@Priority = 2,
@Description = N'Show error if lacking Users permissions',
@PathPoints = NULL;

-- Save MJ: AI Agent Step Paths (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStepPath @ID = 'D82281A7-A7D6-4E31-B651-0FC125027EF2',
@OriginStepID = 'AE444D5A-0CDC-41B2-A369-3BA12A7E1AAA',
@DestinationStepID = 'B6431F43-41DA-4405-9EF5-C98F21409FA6',
@Condition = N'payload.permissions.userRoles.canCreate == true',
@Priority = 1,
@Description = N'Continue if user has permissions for User Roles',
@PathPoints = NULL;

-- Save MJ: AI Agent Step Paths (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStepPath @ID = '7168F0F1-EBBD-43CA-9A3A-7708D487899B',
@OriginStepID = 'AE444D5A-0CDC-41B2-A369-3BA12A7E1AAA',
@DestinationStepID = '8DE19F37-02DF-4717-A8FA-98085F62FE2D',
@Condition = N'payload.permissions.userRoles.canCreate != true',
@Priority = 2,
@Description = N'Show error if lacking User Roles permissions',
@PathPoints = NULL;

-- Save MJ: AI Agent Step Paths (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAIAgentStepPath @ID = '46D56803-999B-4800-8161-434F59204D40',
@OriginStepID = 'B6431F43-41DA-4405-9EF5-C98F21409FA6',
@DestinationStepID = '3DB38E5E-FB94-401C-94AB-0B2D7E18302C',
@Condition = N'true',
@Priority = 1,
@Description = N'Always proceed after checking all permissions',
@PathPoints = NULL;


-- End of SQL Logging Session
-- Session ID: 633f2301-2efa-4893-bdbf-07d52b87169b
-- Completed: 2025-08-06T03:25:07.701Z
-- Duration: 18404ms
-- Total Statements: 28
