-- SQL Logging Session
-- Session ID: 02e20b7f-55ac-4d6b-9044-142819e7a5d0
-- Started: 2025-07-27T14:51:08.804Z
-- Description: MetadataSync push operation
-- Format: Migration-ready with Flyway schema placeholders
-- Generated by MemberJunction SQLServerDataProvider

-- Save Action Categories (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionCategory @ID = '0B85DD97-4A22-4E27-9878-E620E99889DF',
@Name = N'Data Enrichment',
@Description = N'Data enrichment and enhancement actions',
@ParentID = NULL,
@Status = N'Pending';

-- Save Actions (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAction @ID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@CategoryID = '0B85DD97-4A22-4E27-9878-E620E99889DF',
@Name = N'Apollo Enrichment - Contacts',
@Description = N'Enriches contact records with verified email addresses, employment history, and education details using Apollo.io API. Matches contacts by name and email combinations and provides comprehensive contact enrichment.',
@Type = N'Custom',
@UserPrompt = NULL,
@UserComments = NULL,
@Code = NULL,
@CodeComments = NULL,
@CodeApprovalStatus = N'Pending',
@CodeApprovalComments = NULL,
@CodeApprovedByUserID = NULL,
@CodeApprovedAt = NULL,
@CodeLocked = 0,
@ForceCodeGeneration = 0,
@RetentionPeriod = NULL,
@Status = N'Active',
@DriverClass = N'ApolloEnrichmentContactsAction',
@ParentID = NULL,
@IconClass = NULL;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '599044A2-D268-F011-8DCA-00224829DAAF',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'TwitterField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name to store Twitter URL (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'DF9B5B7A-D568-F011-8DCA-00224829DAAF',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'FacebookField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name to store Facebook URL (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'E09B5B7A-D568-F011-8DCA-00224829DAAF',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'ProfilePictureURLField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name to store the Twitter URL (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '513EE959-9369-F011-8DCA-00224829DAAF',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'TitleField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name to store the contact''s job title',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '6D53D24F-947E-47AE-BC99-0971AB522F9D',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'LinkedInField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name to store LinkedIn URL (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '37290D24-A8D1-415A-A4AE-48207ECFFDA3',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'EducationHistoryFieldMappings',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Simple Object',
@IsArray = 0,
@Description = N'JSON mapping for education history fields including EntityName, ContactIDFieldName, InstitutionFieldName, DegreeFieldName (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'A6AF966D-1C2C-46DE-BE4F-4F43D54D4C88',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'FirstNameField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name in the target entity that contains the first name',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '0AEFD4B1-8F99-49D2-89CB-7FE31571C660',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'EnrichedAtField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name to store the timestamp when enrichment was last performed',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '75B1D375-30BD-4297-88D2-AD89351AF27B',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'EmploymentHistoryFieldMappings',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Simple Object',
@IsArray = 0,
@Description = N'JSON mapping for employment history fields including EntityName, ContactIDFieldName, OrganizationFieldName, TitleFieldName (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '2BFB9CAB-0D0F-4BD8-9CB3-C00907AF9FF1',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'LastNameField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name in the target entity that contains the last name',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '271D1B1D-47D5-4A3B-B492-C47D201487DF',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'EmailField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name in the target entity that contains the email address',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'A479CEB9-98AD-4262-A34F-CA0E26FCE2AE',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'Filter',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'SQL filter expression to identify records that need enrichment (e.g., ''Email IS NOT NULL AND LastEnrichedAt IS NULL'')',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'E312B6AC-9582-4504-961A-D4DE7509675E',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'EntityName',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Target entity name containing contact records to enrich',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '4BE390FC-2652-4C53-B8DB-E40D12C63D44',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'AccountNameField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name that contains the account/organization name (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '7959ACE9-D505-499C-8939-FFA81ABE5C04',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@Name = N'DomainField',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Scalar',
@IsArray = 0,
@Description = N'Field name containing domain information (optional)',
@IsRequired = 0;

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '5C2D34E7-518A-47AF-AABB-054E1BBF534C',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'MISSING_ENTITY_NAME',
@IsSuccess = 0,
@Description = N'EntityName parameter is required';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '16040316-DD99-45CC-BCCA-1565DA23FA66',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'SUCCESS',
@IsSuccess = 1,
@Description = N'Contact enrichment completed successfully';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '5828258A-1BE8-40ED-B9EC-24270D481AB2',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'MISSING_FILTER_PARAM',
@IsSuccess = 0,
@Description = N'FilterParam is required to identify records for enrichment';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '96DC1491-01B2-4D11-A90D-299E59E3ABA8',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'APOLLO_API_ERROR',
@IsSuccess = 0,
@Description = N'Error communicating with Apollo.io API';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '179B1A17-2696-4C4C-B421-3977E2B3AFA7',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'MISSING_EMAIL_FIELD',
@IsSuccess = 0,
@Description = N'EmailField parameter is required';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '9D3774ED-3EE8-4A16-8BF5-6117F5BD59E2',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'MISSING_NAME_FIELDS',
@IsSuccess = 0,
@Description = N'FirstNameField and LastNameField parameters are required';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'CFAC6FEF-F6C0-4100-87D4-673C34C0C0DD',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'RATE_LIMIT_EXCEEDED',
@IsSuccess = 0,
@Description = N'Apollo.io API rate limit exceeded';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '0F3A7EB0-82C1-47FB-A581-CA71DCA5EDF3',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'FAILED',
@IsSuccess = 0,
@Description = N'General failure in contact enrichment operation';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'D62FB0EE-BAE4-49B1-920A-D53B7146B55C',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'MISSING_API_KEY',
@IsSuccess = 0,
@Description = N'Apollo.io API key not found in environment variables';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'F021E44E-1231-4689-87F6-F1FED6B30F1F',
@ActionID = 'BE9B9B7F-791B-4E97-AC17-7E93B52B237C',
@ResultCode = N'NO_MATCHES_FOUND',
@IsSuccess = 1,
@Description = N'No matches found in Apollo.io for the provided contact information';

-- Save Actions (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateAction @ID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@CategoryID = '0B85DD97-4A22-4E27-9878-E620E99889DF',
@Name = N'Apollo Enrichment - Accounts',
@Description = N'Enriches account/organization records with company information, technologies used, and associated contacts using Apollo.io API. Processes accounts by domain name and automatically discovers contacts within each organization.',
@Type = N'Custom',
@UserPrompt = NULL,
@UserComments = NULL,
@Code = NULL,
@CodeComments = NULL,
@CodeApprovalStatus = N'Pending',
@CodeApprovalComments = NULL,
@CodeApprovedByUserID = NULL,
@CodeApprovedAt = NULL,
@CodeLocked = 0,
@ForceCodeGeneration = 0,
@RetentionPeriod = NULL,
@Status = N'Active',
@DriverClass = N'ApolloEnrichmentAccountsAction',
@ParentID = NULL,
@IconClass = NULL;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = 'AD2A3656-27ED-4289-8C2D-0288FCE6485F',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@Name = N'ContactEntityFieldMappings',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Simple Object',
@IsArray = 0,
@Description = N'JSON mapping for contact entity fields (optional) - for auto-discovered contacts from organizations. When this property is provided it includes EntityName, EmailField, AccountIDField, EnrichedAtField, FirstNameField, LastNameField, EmailSourceField (optional), ActivityCountField (optional), LinkedInField (optional), FacebookField (optional), TwitterField (optional), ProfilePictureURLField (optional)',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '20F00571-000C-4C30-B83A-35579F792E55',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@Name = N'AccountTechnologyEntityFieldMappings',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Simple Object',
@IsArray = 0,
@Description = N'JSON mapping for account technology entity fields (optional) - tracks technologies used by organizations. When this property is provided it includes EntityName, AccountIDField, TechnologyIDField, TechnologyField, CategoryField, EndedUseAtField',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '7E50CB2C-7259-4060-9477-8A126E13F490',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@Name = N'AccountEntityFieldMappings',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Simple Object',
@IsArray = 0,
@Description = N'JSON mapping for account entity fields including EntityName, DomainField, AccountIDField, Filter, EnrichedAtField, AddressField (optional), CityField (optional), StateProvinceField (optional), PostalCodeField (optional), PhoneNumberField (optional), CountryField (optional), LogoURLField (optional), DescriptionField (optional), LinkedInField (optional), FacebookField (optional), TwitterField (optional)',
@IsRequired = 1;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '04326334-FB25-47A2-AE27-BCD513B1DDE5',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@Name = N'TechnologyCategoryEntityFieldMappings',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Simple Object',
@IsArray = 0,
@Description = N'JSON mapping for technology category entity fields (optional) - categorizes technologies. When this property is provided it includes EntityName, IDField, NameField',
@IsRequired = 0;

-- Save Action Params (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionParam @ID = '3A12B240-067E-4B12-929F-D803CDAF00CB',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@Name = N'ContactEducationHistoryEntityFieldMappings',
@DefaultValue = NULL,
@Type = N'Input',
@ValueType = N'Simple Object',
@IsArray = 0,
@Description = N'JSON mapping for contact education history entity fields (optional) - stores education details for contacts. When this property is provided it includes EntityName, ContactIDField, InstitutionField, DegreeField, GradeLevelField, StartDateField, EndDateField, IsCurrentField',
@IsRequired = 0;

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '57895B33-9F72-4CFF-95E1-3CD1BD2BE2AD',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@ResultCode = N'MISSING_ACCOUNT_ENTITY_MAPPING',
@IsSuccess = 0,
@Description = N'AccountEntityFieldNameJSON parameter is required';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'F7F63E73-FD2C-4F07-BC7C-6228AE1E7E62',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@ResultCode = N'SUCCESS',
@IsSuccess = 1,
@Description = N'Account enrichment completed successfully';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'CACF2749-E2B2-4DAE-8FD1-8B373C651710',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@ResultCode = N'RATE_LIMIT_EXCEEDED',
@IsSuccess = 0,
@Description = N'Apollo.io API rate limit exceeded';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '96917FBC-3A7A-4635-9296-9ECF97039662',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@ResultCode = N'FAILED',
@IsSuccess = 0,
@Description = N'General failure in account enrichment operation';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = '0E1A64DF-8FF5-40B6-A5B4-E416DC2739D1',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@ResultCode = N'APOLLO_API_ERROR',
@IsSuccess = 0,
@Description = N'Error communicating with Apollo.io API';

-- Save Action Result Codes (core SP call only)
EXEC [${flyway:defaultSchema}].spCreateActionResultCode @ID = 'C5CD8C1D-7B9B-4BE9-B7B0-EE37FBEAC7AF',
@ActionID = 'E57641A1-B7C2-4EAB-BB17-8C9631E89095',
@ResultCode = N'MISSING_API_KEY',
@IsSuccess = 0,
@Description = N'Apollo.io API key not found in environment variables';


-- End of SQL Logging Session
-- Session ID: 02e20b7f-55ac-4d6b-9044-142819e7a5d0
-- Completed: 2025-07-27T14:51:10.291Z
-- Duration: 1487ms
-- Total Statements: 39
