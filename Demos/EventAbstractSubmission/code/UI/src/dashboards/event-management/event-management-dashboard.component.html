<div class="event-dashboard">
  <!-- Header -->
  <div class="dashboard-header">
    <h2>Event Management</h2>
    <button kendoButton [primary]="true" (click)="onCreateEvent()">
      <span class="k-icon k-i-plus"></span>
      Create Event
    </button>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="loading-container">
    <kendo-loader [type]="'infinite-spinner'" [size]="'large'"></kendo-loader>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading" class="dashboard-content">
    <!-- KPI Cards -->
    <div class="kpi-section">
      <mj-kpi-card
        title="Total Events"
        [value]="totalEvents"
        icon="calendar">
      </mj-kpi-card>
      <mj-kpi-card
        title="Submissions"
        [value]="totalSubmissions"
        icon="file">
      </mj-kpi-card>
      <mj-kpi-card
        title="Speakers"
        [value]="totalSpeakers"
        icon="user">
      </mj-kpi-card>
    </div>

    <!-- Events List -->
    <kendo-card class="events-card">
      <kendo-card-header>
        <div class="card-header-content">
          <h3>Events</h3>
          <button kendoButton [size]="'small'" (click)="onRefresh()">
            <span class="k-icon k-i-refresh"></span>
            Refresh
          </button>
        </div>
      </kendo-card-header>
      <kendo-card-body>
        <div *ngIf="events.length === 0" class="empty-state">
          No events found. Create your first event to get started.
        </div>
        <kendo-grid
          *ngIf="events.length > 0"
          [data]="events"
          [height]="500"
          [sortable]="true"
          [filterable]="true"
          [pageable]="true"
          [pageSize]="10">
          <kendo-grid-column field="Name" title="Event Name" [width]="300"></kendo-grid-column>
          <kendo-grid-column field="StartDate" title="Start Date" [width]="140" format="{0:d}"></kendo-grid-column>
          <kendo-grid-column field="EndDate" title="End Date" [width]="140" format="{0:d}"></kendo-grid-column>
          <kendo-grid-column field="Status" title="Status" [width]="140">
            <ng-template kendoGridCellTemplate let-dataItem>
              <mj-status-badge [status]="dataItem.Status"></mj-status-badge>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-command-column title="Actions" [width]="180">
            <ng-template kendoGridCellTemplate let-dataItem>
              <button kendoButton [size]="'small'" (click)="onViewEvent(dataItem)">
                View
              </button>
              <button kendoButton [size]="'small'" (click)="onEditEvent(dataItem)" style="margin-left: 8px;">
                Edit
              </button>
            </ng-template>
          </kendo-grid-command-column>
        </kendo-grid>
      </kendo-card-body>
    </kendo-card>
  </div>
</div>
