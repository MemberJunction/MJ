{
  "description": "Requirements Analyst Agent returns FunctionalRequirements in two modes: Draft (with questions) or Final (complete)",

  "example_1_draft_mode": {
    "action": "return_to_parent",
    "output": {
      "FunctionalRequirements": "# DRAFT - Needs Clarification\n\n## What We Know\n\nThe user wants to create an agent that analyzes customer feedback and generates weekly summary reports. This involves:\n\n- **Data Collection**: Gathering feedback from multiple sources\n- **Analysis**: Processing and analyzing the feedback data\n- **Reporting**: Creating summary reports on a weekly schedule\n\n## Questions for User\n\n1. **Data Sources**: Where should the agent collect feedback from?\n   - Database tables (which entities/tables)?\n   - External APIs (support tickets, review sites)?\n   - File uploads?\n   - Other sources?\n\n2. **Analysis Requirements**: What kind of analysis do you need?\n   - Sentiment analysis (positive/negative/neutral)?\n   - Topic/theme categorization?\n   - Trend identification?\n   - Priority/severity scoring?\n\n3. **Report Distribution**: How should the weekly reports be delivered?\n   - Email to specific recipients?\n   - Saved to database?\n   - Dashboard/UI display?\n   - File export (PDF, Excel)?\n\n4. **Scheduling**: When should the weekly report run?\n   - Specific day/time (e.g., Monday 9 AM)?\n   - Automated via scheduled job?\n   - Manual trigger?\n\n5. **Success Criteria**: How will you measure if this agent is working well?\n   - Report delivery timeliness?\n   - Analysis accuracy?\n   - Coverage (% of feedback analyzed)?"
    }
  },

  "example_2_final_mode": {
    "action": "return_to_parent",
    "output": {
      "FunctionalRequirements": "# Customer Feedback Analyzer - Functional Requirements\n\n## Business Goal\n\nAutomate the collection, analysis, and reporting of customer feedback to provide weekly actionable insights that drive product improvements and enhance customer satisfaction.\n\n## Functional Requirements\n\n### Data Collection\n- Retrieve customer feedback from CustomerFeedback database table\n- Query feedback submitted in the past 7 days\n- Include feedback text, rating, category, and customer metadata\n- Handle up to 10,000 feedback items per week\n\n### Analysis\n- Perform sentiment analysis on feedback text (positive/negative/neutral)\n- Categorize feedback by product feature area\n- Identify top 10 recurring themes or issues\n- Calculate sentiment distribution and average ratings\n- Flag critical issues (1-2 star ratings with negative sentiment)\n\n### Reporting\n- Generate weekly summary report every Monday at 8 AM\n- Report includes:\n  - Total feedback count and sentiment breakdown\n  - Top themes with frequency counts\n  - Critical issues requiring immediate attention\n  - Week-over-week trend comparison\n  - Actionable recommendations\n- Deliver report via email to product@company.com and support@company.com\n\n## Technical Requirements\n\n### Database Access\n- Read access to CustomerFeedback entity\n- Filter by CreatedAt date range\n- Retrieve fields: ID, FeedbackText, Rating, Category, CustomerID, CreatedAt\n\n### Analysis Engine\n- Use Text Analyzer action for sentiment analysis\n- LLM-based theme extraction and categorization\n- Statistical aggregation for metrics\n\n### Scheduling\n- Run as scheduled job every Monday at 8:00 AM EST\n- Execution window: 8:00 AM - 9:00 AM\n- Timeout: 15 minutes maximum\n\n## Data Requirements\n\n### Input Data\n- CustomerFeedback table with minimum fields:\n  - ID (uniqueidentifier)\n  - FeedbackText (nvarchar)\n  - Rating (int, 1-5)\n  - Category (nvarchar)\n  - CreatedAt (datetime)\n\n### Output Data\n- Email report (HTML format)\n- Store analysis results in FeedbackAnalysis table for historical tracking\n\n## Integration Requirements\n\n- Database Research Agent for querying CustomerFeedback table\n- Text Analyzer action for sentiment analysis\n- Send Single Message action for email delivery (SendGrid provider)\n- Create Record action to save analysis results\n\n## Assumptions\n\n- CustomerFeedback table exists and is populated regularly\n- SendGrid email provider is configured with valid API key\n- Recipients check email on Monday mornings\n- English language feedback only (v1)\n- Historical data available for trend comparison\n\n## Risks\n\n### Technical Risks\n- **Data Volume**: If feedback exceeds 10,000/week, may need batch processing\n- **API Limits**: SendGrid has rate limits that could affect delivery\n- **Analysis Accuracy**: LLM sentiment analysis may have 10-15% error rate\n\n### Business Risks\n- **Actionability**: Reports require human review and action\n- **Alert Fatigue**: Too many critical issues may overwhelm recipients\n\n## Out of Scope\n\n- Real-time feedback analysis (weekly batch only)\n- Responding to customer feedback directly\n- Multi-language support (future version)\n- Predictive analytics or forecasting\n- Custom dashboards or visualizations\n- Integration with external analytics platforms\n\n## Success Criteria\n\n### Primary Metrics\n1. **Coverage**: 95%+ of weekly feedback analyzed successfully\n2. **Timeliness**: Report delivered by 9 AM every Monday\n3. **Accuracy**: Sentiment analysis accuracy ≥ 85% (spot-check validation)\n\n### Secondary Metrics\n- Report generation time < 5 minutes\n- Zero failed email deliveries\n- Critical issues flagged with ≥ 90% precision\n\n### User Acceptance\n- Product team finds insights actionable in 80%+ of reports\n- At least 2 product improvements per month driven by insights"
    }
  }
}
