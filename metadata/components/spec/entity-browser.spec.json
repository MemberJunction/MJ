{
  "name": "EntityBrowser",
  "title": "Entity Browser",
  "description": "A comprehensive entity browser with multi-panel display showing entities in a grid or card view with a sliding details panel, collapsible filters, sorting, and entity record opening capability.",
  "type": "dashboard",
  "functionalRequirements": "## Entity Browser Requirements\n\n### Core Functionality\n- Display entities in a responsive grid or card layout based on user preference\n- Allow users to select view mode (grid vs card)\n- Click on an entity to slide in a details panel from the right\n- Show entity metadata including fields and relationships in the details panel\n- Provide a collapsible filter panel on the left side\n- Support sorting by multiple fields with visual indicators\n- Include a search bar for quick entity filtering\n- Provide an 'Open' button to trigger the OpenEntityRecord callback\n- Remember user's last selected entity and view preferences\n\n### UX Considerations\n- Smooth animations for panel transitions\n- Responsive design that works on different screen sizes\n- Loading states while fetching data\n- Empty states with helpful messages\n- Keyboard navigation support (arrow keys, tab, enter)\n- Visual feedback for hover and selection states\n- Maintain scroll position when switching between entities",
  "dataRequirements": {
    "mode": "views",
    "entities": [
      {
        "name": "MJ: Entities",
        "description": "Metadata about all entities in the system",
        "displayFields": [
          "ID",
          "Name",
          "DisplayName",
          "NameSuffix",
          "Description",
          "SchemaName",
          "BaseTable",
          "BaseView"
        ],
        "filterFields": [
          "SchemaName",
          "BaseTable"
        ],
        "sortFields": [
          "Name",
          "DisplayName"
        ],
        "fieldMetadata": [
          {
            "name": "ID",
            "sequence": 1,
            "defaultInView": false,
            "type": "uniqueidentifier",
            "allowsNull": false,
            "isPrimaryKey": true,
            "description": "Unique identifier for the entity"
          },
          {
            "name": "Name",
            "sequence": 2,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "System name of the entity"
          },
          {
            "name": "DisplayName",
            "sequence": 3,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "User-friendly display name for the entity"
          },
          {
            "name": "NameSuffix",
            "sequence": 4,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "Optional suffix appended to entity names for display purposes"
          },
          {
            "name": "Description",
            "sequence": 5,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "Description of the entity"
          },
          {
            "name": "SchemaName",
            "sequence": 6,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "Database schema name"
          },
          {
            "name": "BaseTable",
            "sequence": 7,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "Base table in the database"
          },
          {
            "name": "BaseView",
            "sequence": 8,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Base view used for the entity"
          }
        ],
        "permissionLevelNeeded": [
          "read"
        ],
        "usageContext": "Main entity list display and filtering"
      },
      {
        "name": "MJ: Entity Fields",
        "description": "Fields belonging to each entity",
        "displayFields": [
          "Name",
          "DisplayName",
          "Type",
          "Length",
          "AllowsNull",
          "IsPrimaryKey",
          "IsUnique"
        ],
        "filterFields": [
          "EntityID"
        ],
        "sortFields": [
          "Sequence",
          "Name"
        ],
        "fieldMetadata": [
          {
            "name": "EntityID",
            "sequence": 1,
            "defaultInView": false,
            "type": "uniqueidentifier",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Reference to parent entity"
          },
          {
            "name": "Name",
            "sequence": 2,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Field name"
          },
          {
            "name": "DisplayName",
            "sequence": 3,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "User-friendly field name"
          },
          {
            "name": "Type",
            "sequence": 4,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Data type of the field"
          },
          {
            "name": "Length",
            "sequence": 5,
            "defaultInView": true,
            "type": "int",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "Maximum length for string fields"
          },
          {
            "name": "AllowsNull",
            "sequence": 6,
            "defaultInView": true,
            "type": "bit",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Whether field allows null values"
          },
          {
            "name": "IsPrimaryKey",
            "sequence": 7,
            "defaultInView": true,
            "type": "bit",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Whether field is part of primary key"
          },
          {
            "name": "IsUnique",
            "sequence": 8,
            "defaultInView": true,
            "type": "bit",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Whether field must be unique"
          },
          {
            "name": "Sequence",
            "sequence": 9,
            "defaultInView": false,
            "type": "int",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Display order of the field"
          }
        ],
        "permissionLevelNeeded": [
          "read"
        ],
        "usageContext": "Details panel to show entity fields"
      },
      {
        "name": "MJ: Entity Relationships",
        "description": "Relationships between entities",
        "displayFields": [
          "RelatedEntity",
          "Type",
          "DisplayName",
          "RelatedEntityJoinField"
        ],
        "filterFields": [
          "EntityID"
        ],
        "sortFields": [
          "Sequence",
          "RelatedEntity"
        ],
        "fieldMetadata": [
          {
            "name": "EntityID",
            "sequence": 1,
            "defaultInView": false,
            "type": "uniqueidentifier",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Reference to parent entity"
          },
          {
            "name": "RelatedEntity",
            "sequence": 2,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "The related entity in the relationship"
          },
          {
            "name": "Type",
            "sequence": 3,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Type of relationship (One to Many, Many to One, etc.)"
          },
          {
            "name": "DisplayName",
            "sequence": 4,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "User-friendly name for the relationship"
          },
          {
            "name": "RelatedEntityJoinField",
            "sequence": 5,
            "defaultInView": true,
            "type": "nvarchar",
            "allowsNull": true,
            "isPrimaryKey": false,
            "description": "The field in the related entity that joins to this entity"
          },
          {
            "name": "Sequence",
            "sequence": 6,
            "defaultInView": false,
            "type": "int",
            "allowsNull": false,
            "isPrimaryKey": false,
            "description": "Display order"
          }
        ],
        "permissionLevelNeeded": [
          "read"
        ],
        "usageContext": "Details panel to show entity relationships"
      }
    ],
    "queries": [],
    "description": "This component requires access to entity metadata including entities, their fields, and relationships to provide a comprehensive entity browsing experience"
  },
  "technicalDesign": "## Technical Architecture\n\n### Component Structure\n- **Root Component (EntityBrowser)**: Manages overall layout and state coordination\n- **EntityList (Child)**: Displays entities in grid/card view with sorting\n- **EntityDetails (Child)**: Sliding panel showing entity fields and relationships\n- **EntityFilter (Child)**: Collapsible filter panel with dynamic filters\n\n### State Management\n- Selected entity ID (persisted in savedUserSettings)\n- View mode (grid/card) (persisted)\n- Active filters (persisted)\n- Sort configuration (persisted)\n- Panel visibility states (details open, filters collapsed)\n- Search query\n- Loading states for async operations\n\n### Layout\n```\n+------------------+------------------------+------------------+\n|                  |                        |                  |\n|   Filter Panel   |    Entity Grid/Cards   |  Details Panel   |\n|   (Collapsible)  |    (Main Content)      |    (Sliding)     |\n|                  |                        |                  |\n|  [Schema Filter] |  +-----+  +-----+      |  Entity: Orders  |\n|  [Table Filter]  |  | Card |  | Card |     |                  |\n|  [Search Box]    |  +-----+  +-----+      |  Fields:         |\n|                  |                        |  - ID            |\n|  Sort By:        |  +-----+  +-----+      |  - CustomerID    |\n|  [Name ↓]        |  | Card |  | Card |     |  - OrderDate     |\n|                  |  +-----+  +-----+      |                  |\n|                  |                        |  Relationships:  |\n|                  |                        |  → Customers     |\n|                  |                        |  → OrderItems    |\n|                  |                        |                  |\n|                  |                        |  [Open Record]   |\n+------------------+------------------------+------------------+\n```\n\n### Data Flow\n1. Root component loads entities on mount\n2. Passes entity data to EntityList\n3. EntityList handles selection and passes selectedId up\n4. Root loads fields/relationships for selected entity\n5. Passes detailed data to EntityDetails\n6. Filter changes trigger data reload\n7. All user preferences saved via onSaveUserSettings\n\n### Interaction Patterns\n- Click entity card → Select and open details\n- Click filter → Apply and reload data\n- Click sort → Update sort and reload\n- Click 'Open' → Trigger OpenEntityRecord callback\n- Press Escape → Close details panel\n- Click outside → Close details panel",
  "properties": [],
  "events": [],
  "exampleUsage": "<EntityBrowser\n  utilities={utilities}\n  styles={styles}\n  components={components}\n  callbacks={callbacks}\n  savedUserSettings={savedUserSettings}\n  onSaveUserSettings={onSaveUserSettings}\n/>",
  "dependencies": [
    {
      "name": "EntityList",
      "location": "registry",
      "namespace": "Admin/Entities",
      "version": "^1.0.0"
    },
    {
      "name": "EntityDetails",
      "location": "registry",
      "namespace": "Admin/Entities",
      "version": "^1.0.0"
    },
    {
      "name": "EntityFilter",
      "location": "registry",
      "namespace": "Admin/Entities",
      "version": "^1.0.0"
    },
    {
      "name": "OpenRecordButton",
      "location": "registry",
      "namespace": "Generic/Navigation",
      "version": "^1.0.0"
    }
  ],
  "libraries": [],
  "code": "@file:../code/entity-browser.js"
}
