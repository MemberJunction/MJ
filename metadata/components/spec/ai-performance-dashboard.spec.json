{
  "name": "AIPerformanceDashboard",
  "location": "embedded",
  "title": "AI Performance Dashboard",
  "description": "Comprehensive dashboard for analyzing AI agent and prompt performance with time-series charts, cost analysis, and drill-down capabilities",
  "type": "dashboard",
  "functionalRequirements": "## AI Performance Dashboard Requirements\n\n### Core Functionality\n- Display multi-line time series charts showing total runs, tokens, and costs over time\n- Support multiple time groupings: day, week, month, quarter\n- Dual Y-axis display (tokens on left, runs/costs on right)\n- Click-to-drill-down on any chart point to see details for that period\n- Show distribution charts (pie/bar) for selected time period\n- Separate tabs for Agent Runs and Prompt Runs analysis\n- Real-time data refresh capabilities\n- Export functionality for charts and data\n\n### Analytics Features\n- Time series trends with moving averages\n- Cost breakdown by agent/prompt\n- Token usage distribution\n- Success/failure rate analysis\n- Performance comparisons across periods\n- Top consumers identification\n- Anomaly detection and alerts\n\n### UX Considerations\n- Responsive layout adapting to container size\n- Interactive tooltips on hover\n- Smooth chart animations\n- Loading states during data fetch\n- Clear visual hierarchy\n- Consistent color coding across charts\n- Mobile-responsive design",
  "dataRequirements": {
    "mode": "views",
    "description": "Loads AI performance data including agent runs, prompt runs, and aggregated metrics",
    "entities": [
      {
        "name": "MJ: AI Agent Runs",
        "description": "Historical agent execution data for performance analysis",
        "displayFields": [
          "ID",
          "AgentID",
          "Agent",
          "StartedAt",
          "CompletedAt",
          "Success",
          "TotalTokensUsed",
          "TotalCost"
        ],
        "filterFields": [
          "StartedAt",
          "Success",
          "AgentID"
        ],
        "sortFields": [
          "StartedAt"
        ],
        "fieldMetadata": [
          {
            "name": "ID",
            "type": "uniqueidentifier",
            "isPrimaryKey": true,
            "allowsNull": false,
            "description": "Unique run identifier"
          },
          {
            "name": "AgentID",
            "type": "uniqueidentifier",
            "allowsNull": false,
            "description": "Reference to AI Agent"
          },
          {
            "name": "Agent",
            "type": "nvarchar",
            "allowsNull": true,
            "description": "Agent name (denormalized)"
          },
          {
            "name": "StartedAt",
            "type": "datetime",
            "allowsNull": false,
            "description": "Execution start timestamp"
          },
          {
            "name": "TotalTokensUsed",
            "type": "int",
            "allowsNull": true,
            "description": "Total tokens consumed"
          },
          {
            "name": "TotalCost",
            "type": "decimal",
            "allowsNull": true,
            "description": "Total cost in USD"
          }
        ],
        "permissionLevelNeeded": [
          "read"
        ]
      },
      {
        "name": "MJ: AI Prompt Runs",
        "description": "Historical prompt execution data for performance analysis",
        "displayFields": [
          "ID",
          "PromptID",
          "Prompt",
          "ModelID",
          "Model",
          "RunAt",
          "CompletedAt",
          "Success",
          "TokensUsed",
          "TotalCost"
        ],
        "filterFields": [
          "RunAt",
          "Success",
          "PromptID",
          "ModelID"
        ],
        "sortFields": [
          "RunAt"
        ],
        "fieldMetadata": [
          {
            "name": "ID",
            "type": "uniqueidentifier",
            "isPrimaryKey": true,
            "allowsNull": false,
            "description": "Unique run identifier"
          },
          {
            "name": "PromptID",
            "type": "uniqueidentifier",
            "allowsNull": false,
            "description": "Reference to AI Prompt"
          },
          {
            "name": "Prompt",
            "type": "nvarchar",
            "allowsNull": true,
            "description": "Prompt name (denormalized)"
          },
          {
            "name": "RunAt",
            "type": "datetime",
            "allowsNull": false,
            "description": "Execution timestamp"
          },
          {
            "name": "TokensUsed",
            "type": "int",
            "allowsNull": true,
            "description": "Total tokens consumed"
          },
          {
            "name": "TotalCost",
            "type": "decimal",
            "allowsNull": true,
            "description": "Total cost in USD"
          }
        ],
        "permissionLevelNeeded": [
          "read"
        ]
      }
    ],
    "queries": []
  },
  "technicalDesign": "## Component Architecture\n\n### Root Component (AIPerformanceDashboard)\n- Manages overall dashboard state and data loading\n- Handles time range selection and grouping\n- Coordinates drill-down state between components\n- Manages tab switching between Agent and Prompt views\n\n### Child Components\n1. **AITimeSeriesChart**: Multi-line chart with dual Y-axes for runs/tokens/costs\n2. **AIDistributionChart**: Pie/bar charts showing breakdown by agent or prompt\n3. **AIDetailTable**: Detailed table view for drill-down data\n4. **AIMetricsSummary**: Key metrics cards for selected period\n\n### Data Flow\n- Root component loads data based on selected time range\n- Aggregates data by selected grouping (day/week/month/quarter)\n- Passes aggregated data to chart components\n- Handles drill-down events and updates detail views\n- Manages state persistence through savedUserSettings\n\n### State Management\n- Selected time range and grouping\n- Active tab (agents vs prompts)\n- Drill-down selection (selected date/period)\n- Chart view preferences\n- Filter states",
  "properties": [],
  "events": [],
  "exampleUsage": "<AIPerformanceDashboard />",
  "code": "@file:../code/ai-performance-dashboard.js",
  "dependencies": [
    "@include:ai-time-series-chart.spec.json",
    "@include:ai-distribution-chart.spec.json",
    "@include:ai-detail-table.spec.json",
    "@include:ai-metrics-summary.spec.json",
    {
      "name": "AIInsightsPanel",
      "location": "registry",
      "namespace": "Generic/UI/AI",
      "version": "^1.0.0"
    },
    {
      "name": "DataExportPanel",
      "location": "registry",
      "namespace": "Generic/UI/Export",
      "version": "^1.0.0"
    }
  ],
  "libraries": []
}
