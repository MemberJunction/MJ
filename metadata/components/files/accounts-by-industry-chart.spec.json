{
  "name": "AccountsByIndustryChart",
  "title": "Accounts by Industry Chart",
  "description": "Interactive pie chart component that visualizes account distribution by industry with click-to-filter functionality",
  "type": "component",
  "location": "embedded",
  "namespace": "CRM/Analytics",
  "functionalRequirements": "## Pie Chart Component\n\n- Display interactive pie chart using Chart.js\n- Show industry names with counts in legend\n- Calculate and display percentages in tooltips\n- Support click-to-select functionality\n- Animate on hover with visual feedback\n- Configurable color schemes\n- Handle 'Others' grouping for small segments",
  "technicalDesign": "## Technical Design\n\n### Props\n- industryData: Grouped and calculated industry data\n- selectedIndustry: Currently selected slice\n- onSliceClick: Callback for slice selection\n- colorScheme: Color palette selection\n- maxIndustries: Maximum slices to show\n\n### Implementation\n- Uses Chart.js for rendering\n- Ref-based chart instance management\n- Cleanup on unmount to prevent memory leaks",
  "properties": [
    {
      "name": "industryData",
      "type": "object",
      "required": true,
      "description": "Object containing labels, data, percentages, and total count"
    },
    {
      "name": "selectedIndustry",
      "type": "string",
      "required": false,
      "description": "Currently selected industry slice"
    },
    {
      "name": "onSliceClick",
      "type": "function",
      "required": true,
      "description": "Callback function when a slice is clicked"
    },
    {
      "name": "colorScheme",
      "type": "string",
      "required": false,
      "description": "Color palette: default, vibrant, or pastel",
      "defaultValue": "default"
    }
  ],
  "libraries": [
    {
      "name": "Chart.js",
      "version": "4.4.0",
      "cdnUrl": "https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js",
      "globalVariable": "Chart",
      "required": true
    }
  ],
  "exampleUsage": "<AccountsByIndustryChart\n  industryData={industryData}\n  selectedIndustry={selectedIndustry}\n  onSliceClick={handleSliceClick}\n  colorScheme=\"default\"\n/>",
  "code": "const AccountsByIndustryChart = ({ industryData, selectedIndustry, onSliceClick, colorScheme = 'default' }) => {\n  const chartRef = useRef(null);\n  const chartInstance = useRef(null);\n  \n  const colorSchemes = {\n    default: [\n      '#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6',\n      '#EC4899', '#14B8A6', '#F97316', '#6366F1', '#84CC16'\n    ],\n    vibrant: [\n      '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',\n      '#DDA0DD', '#98D8C8', '#FFD93D', '#6BCB77', '#FF6B9D'\n    ],\n    pastel: [\n      '#FFE5E5', '#E5F3FF', '#E5FFE5', '#FFF5E5', '#F5E5FF',\n      '#FFE5F5', '#E5FFF5', '#FFF0E5', '#F0E5FF', '#E5F0FF'\n    ]\n  };\n  \n  useEffect(() => {\n    if (chartRef.current && industryData.labels.length > 0) {\n      const ctx = chartRef.current.getContext('2d');\n      \n      if (chartInstance.current) {\n        chartInstance.current.destroy();\n      }\n      \n      chartInstance.current = new Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: industryData.labels,\n          datasets: [{\n            data: industryData.data,\n            backgroundColor: colorSchemes[colorScheme],\n            borderWidth: 2,\n            borderColor: '#fff',\n            hoverOffset: 8\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: 'right',\n              labels: {\n                padding: 15,\n                font: { size: 12 },\n                generateLabels: (chart) => {\n                  const data = chart.data;\n                  return data.labels.map((label, i) => ({\n                    text: `${label} (${industryData.data[i]})`,\n                    fillStyle: data.datasets[0].backgroundColor[i],\n                    hidden: false,\n                    index: i\n                  }));\n                }\n              },\n              onClick: (e, legendItem, legend) => {\n                const index = legendItem.index;\n                const label = industryData.labels[index];\n                onSliceClick(label);\n              }\n            },\n            tooltip: {\n              callbacks: {\n                label: (context) => {\n                  const label = context.label || '';\n                  const value = context.parsed;\n                  const percentage = industryData.percentages[context.dataIndex];\n                  return `${label}: ${value} (${percentage}%)`;\n                }\n              }\n            }\n          },\n          onClick: (event, elements) => {\n            if (elements.length > 0) {\n              const index = elements[0].index;\n              const label = industryData.labels[index];\n              onSliceClick(label);\n            }\n          }\n        }\n      });\n    }\n    \n    return () => {\n      if (chartInstance.current) {\n        chartInstance.current.destroy();\n      }\n    };\n  }, [industryData, colorScheme, onSliceClick]);\n  \n  return (\n    <div style={{ height: '100%', position: 'relative' }}>\n      <canvas ref={chartRef}></canvas>\n    </div>\n  );\n};"
}