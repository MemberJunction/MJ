[
  {
    "fields": {
      "Name": "User Onboarding Flow Agent",
      "Description": "Automated flow agent for onboarding new users into MemberJunction. Handles permission verification, user creation, role assignment, and welcome email delivery through a deterministic workflow.",
      "TypeID": "@lookup:MJ: AI Agent Types.Name=Flow",
      "Status": "Active",
      "ExecutionOrder": 0,
      "ExposeAsAction": true,
      "IconClass": "fa-solid fa-user-plus"
    },
    "relatedEntities": {
      "MJ: AI Agent Prompts": [
        {
          "fields": {
            "AgentID": "@parent:ID",
            "PromptID": "@lookup:AI Prompts.Name=User Onboarding Flow Agent - System Prompt",
            "ExecutionOrder": 0,
            "Status": "Active"
          },
          "primaryKey": {
            "ID": "0C2220BB-8477-4AB5-B72B-EA61D9E9D2CA"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.353Z",
            "checksum": "659059f35d1177bcea528e30fa2372987c7392e23cd3625bfa89ece0d84097dd"
          }
        }
      ],
      "AI Agent Actions": [
        {
          "fields": {
            "AgentID": "@parent:ID",
            "ActionID": "@lookup:Actions.Name=Check User Permission",
            "Status": "Active"
          },
          "primaryKey": {
            "ID": "C28DF6B0-CACF-4CDD-B9B6-C1377F836375"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.371Z",
            "checksum": "19d6a1158c53276725a422517c048419e2a9d0857cfb93be02a27234fda83e5e"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "ActionID": "@lookup:Actions.Name=Validate Email Unique",
            "Status": "Active"
          },
          "primaryKey": {
            "ID": "B5A7C8E9-4D2F-11EE-9E3B-0242AC120002"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.383Z",
            "checksum": "5ec0ed0bf51f284c3cbbeb49de9baf8e8e410fc4e51caf5a9d8af55efc792a10"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "ActionID": "@lookup:Actions.Name=Create User",
            "Status": "Active"
          },
          "primaryKey": {
            "ID": "D92309DC-A212-4729-A502-4984CF90A8E6"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.397Z",
            "checksum": "560391e0b02085758df56f7345e3d8a1dd80c8f0307500396d790816a37a31b3"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "ActionID": "@lookup:Actions.Name=Create Employee",
            "Status": "Active"
          },
          "primaryKey": {
            "ID": "A6C93359-1CA8-41EE-9010-56BDA1EFC8B2"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.409Z",
            "checksum": "694f09c4459a03fa368b10b7fe08e1e581942d13739a0f555d5ed2c489b69ad9"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "ActionID": "@lookup:Actions.Name=Assign User Roles",
            "Status": "Active"
          },
          "primaryKey": {
            "ID": "2BF42A0C-DAE4-494E-BE51-0AC9EF094F3E"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.419Z",
            "checksum": "a7e18d87090d41904507c568627dc2e6d53358f17e2fb9c03c6a24123327757a"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "ActionID": "@lookup:Actions.Name=Send Single Message",
            "Status": "Active"
          },
          "primaryKey": {
            "ID": "0274F2D6-DD12-46BF-969A-982CB585AE62"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.430Z",
            "checksum": "4fe3e09a002bcae5c775d55874e0d0b66b05554433795c99eaff828dbd4e40d8"
          }
        }
      ],
      "MJ: AI Agent Steps": [
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Collect User Information",
            "StepType": "Prompt",
            "StartingStep": true,
            "PromptID": "@lookup:AI Prompts.Name=Collect User Information - Prompt Step",
            "Status": "Active",
            "PositionX": 300,
            "PositionY": 100
          },
          "primaryKey": {
            "ID": "3DB38E5E-FB94-401C-94AB-0B2D7E18302C"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.454Z",
            "checksum": "fffba512e60cd07d4d368ed95cdd4576b5bf83f43cecf4015e2a85b800c66300"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Validate User Data",
            "StepType": "Action",
            "StartingStep": false,
            "ActionID": "@lookup:Actions.Name=Validate Email Unique",
            "ActionInputMapping": "{\"Email\": \"payload.userData.email\"}",
            "ActionOutputMapping": "{\"IsUnique\": \"emailIsUnique\", \"ExistingUserID\": \"existingUserID\"}",
            "Status": "Active",
            "PositionX": 500,
            "PositionY": 100
          },
          "primaryKey": {
            "ID": "286C4DE2-133C-42CD-9BA9-96F46156AF95"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.465Z",
            "checksum": "b8d5f22e31f845d5132f1b01763b355a9558d760eb3680c32c5d4e29662d7d5a"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Create Employee Record",
            "StepType": "Action",
            "StartingStep": false,
            "ActionID": "@lookup:Actions.Name=Create Employee",
            "ActionInputMapping": "{\"FirstName\": \"payload.userData.firstName\", \"LastName\": \"payload.userData.lastName\", \"Email\": \"payload.userData.email\", \"Title\": \"payload.userData.title\", \"Phone\": \"payload.userData.employeeData.phone\", \"CompanyID\": \"payload.userData.employeeData.companyID\", \"SupervisorID\": \"payload.userData.employeeData.supervisorID\"}",
            "ActionOutputMapping": "{\"EmployeeID\": \"createdEmployeeID\"}",
            "Status": "Active",
            "PositionX": 700,
            "PositionY": 50
          },
          "primaryKey": {
            "ID": "5A421648-5261-4A49-862D-465C71F5A87E"
          },
          "sync": {
            "lastModified": "2025-08-04T06:57:59.782Z",
            "checksum": "21e277b2441fa7081bd4975096693ef506747bbd283cddfee8fd23b6ff3c51e8"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Create User Record",
            "StepType": "Action",
            "StartingStep": false,
            "ActionID": "@lookup:Actions.Name=Create User",
            "ActionInputMapping": "{\"FirstName\": \"payload.userData.firstName\", \"LastName\": \"payload.userData.lastName\", \"Email\": \"payload.userData.email\", \"Title\": \"payload.userData.title\", \"Type\": \"payload.userData.type\", \"IsActive\": \"true\", \"EmployeeID\": \"payload.createdEmployeeID\"}",
            "ActionOutputMapping": "{\"UserID\": \"createdUserID\", \"Name\": \"createdUserName\"}",
            "Status": "Active",
            "PositionX": 700,
            "PositionY": 150
          },
          "primaryKey": {
            "ID": "8297F22F-76CC-4C2F-B3E7-3650CC25AFDE"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.149Z",
            "checksum": "54cb5b3a53e8dcb4d59f36ffe739440f1deb169023d28c386d2a4964ac51441a"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Assign User Roles",
            "StepType": "Action",
            "StartingStep": false,
            "ActionID": "@lookup:Actions.Name=Assign User Roles",
            "ActionInputMapping": "{\"UserID\": \"payload.createdUserID\", \"RoleNames\": \"payload.userData.roles\"}",
            "ActionOutputMapping": "{\"AssignedUserRoleIDs\": \"assignedUserRoleIDs\", \"AssignedCount\": \"assignedRoleCount\"}",
            "Status": "Active",
            "PositionX": 900,
            "PositionY": 100
          },
          "primaryKey": {
            "ID": "5A977380-2AA5-4119-A329-4450FC603025"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.169Z",
            "checksum": "7d63d853e8f70bf015b0a9cf8416b8e7f23c52436550bf64d0ffa2adcd16a05d"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Prepare Welcome Email",
            "StepType": "Prompt",
            "StartingStep": false,
            "PromptID": "@lookup:AI Prompts.Name=Prepare Welcome Email - User Onboarding",
            "Status": "Active",
            "PositionX": 1100,
            "PositionY": 100
          },
          "primaryKey": {
            "ID": "D4F0E61E-9E0C-420D-9F92-6CECF0884C81"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.194Z",
            "checksum": "2ed5db50f49746e00994a320362cfdf69666ac52962a9f1499e24adc8bcd71b9"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Send Email",
            "StepType": "Action",
            "StartingStep": false,
            "ActionID": "@lookup:Actions.Name=Send Single Message",
            "ActionInputMapping": "{\"Subject\": \"payload.emailSubject\", \"Body\": \"payload.emailBody\", \"To\": \"payload.userData.email\", \"From\": \"static:noreply@memberjunction.com\", \"Provider\": \"static:SendGrid\", \"MessageType\": \"static:Email\"}",
            "ActionOutputMapping": "{}",
            "Status": "Active",
            "PositionX": 1300,
            "PositionY": 100
          },
          "primaryKey": {
            "ID": "EA96D877-DEDB-4C7F-9ADC-CB74E6C2A291"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.215Z",
            "checksum": "96775869418eed9de36360181d7b4877058097a60323598c464d3ff5a7c6fc62"
          }
        },
        {
          "fields": {
            "AgentID": "@parent:ID",
            "Name": "Email Already Exists",
            "StepType": "Prompt",
            "StartingStep": false,
            "PromptID": "@lookup:AI Prompts.Name=Generic Error Message",
            "Status": "Active",
            "PositionX": 500,
            "PositionY": 250
          },
          "primaryKey": {
            "ID": "23157416-28D0-422A-AF69-6E4D46E0E212"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.235Z",
            "checksum": "0d1a3b735b94dd28fd6dcb2d9403a8195296bd82b5e890adcd44f165513b98e3"
          }
        }
      ],
      "MJ: AI Agent Step Paths": [
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Collect User Information&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Validate User Data&AgentID=@parent:ID",
            "Condition": "payload.confirmed == true",
            "Priority": 1,
            "Description": "Proceed to validation after collecting info"
          },
          "primaryKey": {
            "ID": "CA2BC3FA-6688-46A9-90DE-D92925EB76C1"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.262Z",
            "checksum": "2cd0d7a4a6fc3661f20276e5abb3856af96f1086c9da68796ad07083b5e1931b"
          }
        },
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Validate User Data&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Create Employee Record&AgentID=@parent:ID",
            "Condition": "payload.emailIsUnique == true && payload.userData.isEmployee == true",
            "Priority": 1,
            "Description": "Create employee if requested and email is unique"
          },
          "primaryKey": {
            "ID": "80E2D6D5-D2F8-41DF-A169-3E2383416916"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.277Z",
            "checksum": "96c16fa4a5f52b5a218e4fc54aca9c9f47a3bcd82a9b7286bff916b60b1cfc91"
          }
        },
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Validate User Data&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Create User Record&AgentID=@parent:ID",
            "Condition": "payload.emailIsUnique == true && payload.userData.isEmployee != true",
            "Priority": 2,
            "Description": "Create user directly if not employee"
          },
          "primaryKey": {
            "ID": "48CBE3C2-B9D1-49DC-AF70-61767F464B21"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.289Z",
            "checksum": "cfc8ea210895f1d72fa9fb77ab06bbfe40b7b746f2ba4a7b1b8f64c2e093e7aa"
          }
        },
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Validate User Data&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Email Already Exists&AgentID=@parent:ID",
            "Condition": "payload.emailIsUnique == false",
            "Priority": 3,
            "Description": "Show error if email already exists"
          },
          "primaryKey": {
            "ID": "81CABE7B-2917-475E-A125-6D9DBFEBCE94"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.304Z",
            "checksum": "fbfa2f756ef6684134a4223b893cef067c69dee24970a35731a83c0ef66c7d33"
          }
        },
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Create Employee Record&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Create User Record&AgentID=@parent:ID",
            "Condition": "true",
            "Priority": 1,
            "Description": "Always create user after employee"
          },
          "primaryKey": {
            "ID": "71865532-8C3E-438D-9273-10F05FD241C3"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.313Z",
            "checksum": "b75cd60d3bf331bf22938f7f176c7fd16d4df0ed206f78ea20d6ddf63c3a25ac"
          }
        },
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Create User Record&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Assign User Roles&AgentID=@parent:ID",
            "Condition": "payload.createdUserID != null",
            "Priority": 1,
            "Description": "Assign roles after user creation"
          },
          "primaryKey": {
            "ID": "7D146602-75C0-40BA-8768-BDAFAFA8D906"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.326Z",
            "checksum": "afec7ceab91a93b8d7302988d932516a57d354bac0b54ab5fddc4f1577a5095b"
          }
        },
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Assign User Roles&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Prepare Welcome Email&AgentID=@parent:ID",
            "Condition": "payload.assignedRoleCount > 0",
            "Priority": 1,
            "Description": "Send email after roles assigned"
          },
          "primaryKey": {
            "ID": "5A6B3110-6D40-408D-9EC9-25E03057B158"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.344Z",
            "checksum": "ac1f882db43e7d4d6231e0af5f91126144cc707f908eb6150d4e3e26cc92e217"
          }
        },
        {
          "fields": {
            "OriginStepID": "@lookup:MJ: AI Agent Steps.Name=Prepare Welcome Email&AgentID=@parent:ID",
            "DestinationStepID": "@lookup:MJ: AI Agent Steps.Name=Send Email&AgentID=@parent:ID",
            "Condition": "payload.prepared == true",
            "Priority": 1,
            "Description": "Send email after preparing content"
          },
          "primaryKey": {
            "ID": "CB3A4C77-30C9-44FE-A31F-BF18FB889229"
          },
          "sync": {
            "lastModified": "2025-08-04T06:58:00.357Z",
            "checksum": "95954d9a8d064fccf051af3208840032589ea67acb384dbfc4dc8bb8feaffebc"
          }
        }
      ]
    },
    "primaryKey": {
      "ID": "3CF3AE08-1B17-4D07-B235-885EED030CB8"
    },
    "sync": {
      "lastModified": "2025-08-04T06:57:59.328Z",
      "checksum": "35a0b8972e43ca4686f41c59e7e4b170960308e9fc9dd4e5b7fe330f50d0cc6d"
    }
  }
]